import{_ as F,i as K,o as m,c as h,e as r,a as l,w as o,C as O,z as B,p as f,r as i,D as P,f as V,k as D,J as Q,d as s,t as v,N as W,A as X,E as _,G as Y}from"./index-CYafs7gL.js";const Z={class:"homepage-card-manage"},ee={class:"header-actions"},le={key:0,class:"icon-preview"},ae={key:1,class:"text-icon-preview"},te={class:"color-preview-cell"},oe={class:"ml-10"},ne={__name:"HomepageCardManage",setup(ie){const y=V(!1),C=V([]),p=V(!1),t=V({id:null,title:"",category:"public",description:"",icon:"",text_icon:"",color:"#e3f2fd",url:"",image_url:"",height:100,sort_order:0,is_active:1,is_tab:0}),M=n=>({public:"å…¬å…±è¯¾",professional:"ä¸“ä¸šè¯¾",selected:"ç²¾é€‰"})[n]||n,E=n=>({public:"",professional:"success",selected:"warning"})[n]||"",w=async()=>{y.value=!0;try{const n=await f.getHomepageCards();C.value=n.data||[]}catch(n){console.error("åŠ è½½å¡ç‰‡å¤±è´¥:",n)}finally{y.value=!1}},N=()=>{t.value={id:null,title:"",category:"public",description:"",icon:"",text_icon:"",color:"#e3f2fd",url:"/pages/public/public-book-detail?bookId=",image_url:"",height:100,sort_order:C.value.length,is_active:1,is_tab:0},p.value=!0},T=n=>{t.value={...n},p.value=!0},z=async()=>{if(!t.value.title||!t.value.url){_.warning("è¯·å¡«å†™å¿…å¡«é¡¹");return}try{t.value.id?(await f.updateHomepageCard(t.value.id,t.value),_.success("æ›´æ–°æˆåŠŸ")):(await f.createHomepageCard(t.value),_.success("åˆ›å»ºæˆåŠŸ")),p.value=!1,w()}catch(n){console.error("ä¿å­˜å¤±è´¥:",n)}},I=async(n,e)=>{try{await f.updateHomepageCard(n.id,{is_active:e}),_.success("çŠ¶æ€æ›´æ–°æˆåŠŸ"),n.is_active=e}catch(b){console.error("çŠ¶æ€æ›´æ–°å¤±è´¥:",b),_.error("çŠ¶æ€æ›´æ–°å¤±è´¥")}},A=n=>{Y.confirm("ç¡®å®šè¦åˆ é™¤è¯¥å¡ç‰‡å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{try{await f.deleteHomepageCard(n.id),_.success("åˆ é™¤æˆåŠŸ"),w()}catch(e){console.error("åˆ é™¤å¤±è´¥:",e)}})};return K(()=>{w()}),(n,e)=>{const b=i("el-icon"),g=i("el-button"),d=i("el-table-column"),S=i("el-image"),$=i("el-tag"),x=i("el-switch"),q=i("el-table"),c=i("el-input"),u=i("el-form-item"),k=i("el-radio"),j=i("el-radio-group"),G=i("el-color-picker"),H=i("el-input-number"),J=i("el-form"),L=i("el-dialog"),R=P("loading");return m(),h("div",Z,[r("div",ee,[l(g,{type:"primary",onClick:N},{default:o(()=>[l(b,null,{default:o(()=>[l(D(Q))]),_:1}),e[14]||(e[14]=s(" æ·»åŠ å¡ç‰‡ ",-1))]),_:1})]),O((m(),B(q,{data:C.value,border:"",stripe:"",style:{width:"100%"},class:"mt-20"},{default:o(()=>[l(d,{prop:"id",label:"ID",width:"80",align:"center"}),l(d,{label:"å›¾æ ‡/é¢„è§ˆ",width:"100",align:"center"},{default:o(({row:a})=>[a.icon?(m(),h("div",le,v(a.icon),1)):a.text_icon?(m(),h("div",ae,v(a.text_icon),1)):a.image_url?(m(),B(S,{key:2,src:a.image_url,fit:"cover",class:"image-preview"},null,8,["src"])):(m(),B(b,{key:3},{default:o(()=>[l(D(W))]),_:1}))]),_:1}),l(d,{prop:"title",label:"æ ‡é¢˜","min-width":"120"}),l(d,{prop:"category",label:"åˆ†ç±»",width:"100",align:"center"},{default:o(({row:a})=>[l($,{type:E(a.category)},{default:o(()=>[s(v(M(a.category)),1)]),_:2},1032,["type"])]),_:1}),l(d,{prop:"description",label:"æè¿°","min-width":"150","show-overflow-tooltip":""}),l(d,{prop:"url",label:"é“¾æŽ¥","min-width":"200","show-overflow-tooltip":""}),l(d,{prop:"color",label:"é¢œè‰²",width:"100",align:"center"},{default:o(({row:a})=>[r("div",te,[r("div",{class:"color-box",style:X({backgroundColor:a.color})},null,4),r("span",null,v(a.color),1)])]),_:1}),l(d,{prop:"sort_order",label:"æŽ’åº",width:"80",align:"center"}),l(d,{prop:"height",label:"é«˜åº¦",width:"80",align:"center"},{default:o(({row:a})=>[r("span",null,v(a.height||100)+"rpx",1)]),_:1}),l(d,{prop:"is_active",label:"çŠ¶æ€",width:"100",align:"center"},{default:o(({row:a})=>[l(x,{"model-value":a.is_active,"active-value":1,"inactive-value":0,onChange:U=>I(a,U)},null,8,["model-value","onChange"])]),_:1}),l(d,{label:"æ“ä½œ",width:"150",align:"center",fixed:"right"},{default:o(({row:a})=>[l(g,{size:"small",onClick:U=>T(a)},{default:o(()=>[...e[15]||(e[15]=[s("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(g,{size:"small",type:"danger",onClick:U=>A(a)},{default:o(()=>[...e[16]||(e[16]=[s("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,y.value]]),l(L,{modelValue:p.value,"onUpdate:modelValue":e[13]||(e[13]=a=>p.value=a),title:t.value.id?"ç¼–è¾‘å¡ç‰‡":"æ·»åŠ å¡ç‰‡",width:"600px"},{footer:o(()=>[l(g,{onClick:e[12]||(e[12]=a=>p.value=!1)},{default:o(()=>[...e[23]||(e[23]=[s("å–æ¶ˆ",-1)])]),_:1}),l(g,{type:"primary",onClick:z},{default:o(()=>[...e[24]||(e[24]=[s("ç¡®å®š",-1)])]),_:1})]),default:o(()=>[l(J,{model:t.value,"label-width":"120px"},{default:o(()=>[l(u,{label:"æ ‡é¢˜",required:""},{default:o(()=>[l(c,{modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.title=a),placeholder:"è¯·è¾“å…¥å¡ç‰‡æ ‡é¢˜"},null,8,["modelValue"])]),_:1}),l(u,{label:"åˆ†ç±»"},{default:o(()=>[l(j,{modelValue:t.value.category,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.category=a)},{default:o(()=>[l(k,{label:"public"},{default:o(()=>[...e[17]||(e[17]=[s("å…¬å…±è¯¾",-1)])]),_:1}),l(k,{label:"professional"},{default:o(()=>[...e[18]||(e[18]=[s("ä¸“ä¸šè¯¾",-1)])]),_:1}),l(k,{label:"selected"},{default:o(()=>[...e[19]||(e[19]=[s("ç²¾é€‰",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"æè¿°"},{default:o(()=>[l(c,{modelValue:t.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.description=a),placeholder:"è¯·è¾“å…¥æè¿°"},null,8,["modelValue"])]),_:1}),l(u,{label:"å›¾æ ‡ (Emoji)"},{default:o(()=>[l(c,{modelValue:t.value.icon,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.icon=a),placeholder:"ä¾‹å¦‚: ðŸ’»"},null,8,["modelValue"])]),_:1}),l(u,{label:"æ–‡å­—å›¾æ ‡"},{default:o(()=>[l(c,{modelValue:t.value.text_icon,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.text_icon=a),placeholder:"ä¾‹å¦‚: è®¡",maxlength:"1"},null,8,["modelValue"])]),_:1}),l(u,{label:"å›¾ç‰‡ URL"},{default:o(()=>[l(c,{modelValue:t.value.image_url,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.image_url=a),placeholder:"å›¾ç‰‡é“¾æŽ¥ (æ›¿ä»£å›¾æ ‡)"},null,8,["modelValue"])]),_:1}),l(u,{label:"è·³è½¬é“¾æŽ¥",required:""},{default:o(()=>[l(c,{modelValue:t.value.url,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.url=a),placeholder:"è·³è½¬è·¯å¾„"},null,8,["modelValue"]),e[20]||(e[20]=r("div",{class:"input-hint"},"æ ¼å¼: /pages/practice/practice-detail?id=ç§‘ç›®ID",-1))]),_:1}),l(u,{label:"èƒŒæ™¯é¢œè‰²"},{default:o(()=>[l(G,{modelValue:t.value.color,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.color=a)},null,8,["modelValue"]),r("span",oe,v(t.value.color),1)]),_:1}),l(u,{label:"æŽ’åºå€¼"},{default:o(()=>[l(H,{modelValue:t.value.sort_order,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.sort_order=a),min:0},null,8,["modelValue"])]),_:1}),l(u,{label:"å¡ç‰‡é«˜åº¦"},{default:o(()=>[l(H,{modelValue:t.value.height,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.height=a),min:50,max:500,step:10},null,8,["modelValue"]),e[21]||(e[21]=r("span",{class:"ml-10 text-gray"},"å•ä½: rpx (é»˜è®¤100)",-1))]),_:1}),l(u,{label:"Tabé¡µè·³è½¬"},{default:o(()=>[l(x,{modelValue:t.value.is_tab,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.is_tab=a),"active-value":1,"inactive-value":0},null,8,["modelValue"]),e[22]||(e[22]=r("span",{class:"ml-10 text-gray"},"å¦‚æžœæ˜¯åº•éƒ¨å¯¼èˆªæ é¡µé¢ï¼Œå¿…é¡»å¼€å¯æ­¤é¡¹",-1))]),_:1}),l(u,{label:"å¯ç”¨çŠ¶æ€"},{default:o(()=>[l(x,{modelValue:t.value.is_active,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.is_active=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},de=F(ne,[["__scopeId","data-v-1fb9a226"]]);export{de as default};
