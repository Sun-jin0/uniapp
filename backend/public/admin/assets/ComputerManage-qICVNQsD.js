import{_ as Do,K as Wa,i as No,o as p,c as g,a as l,w as t,p as V,a0 as ra,E as d,f as c,r as I,g as ve,D as Fo,e as u,d as r,C as me,z as $,t as k,b as ua,k as O,O as ia,F as D,y as L,J as yl,a2 as Ka,a3 as Lo,V as Xa,a4 as Eo,m as M,n as da,M as ye,a5 as Ga,Z as Bo,A as Po,P as Jo,G as xe,q as Dl}from"./index-CYafs7gL.js";import{k as pa}from"./katex.min-DPBfLjbn.js";import{R as be}from"./RichEditor-DhNxoQ6j.js";import"./vuedraggable.umd-ZGnjsCIV.js";import"./style-Ca15nGLt.js";var Ro=function(z,A,j){for(var U=j,B=0,J=z.length;U<A.length;){var X=A[U];if(B<=0&&A.slice(U,U+J)===z)return U;X==="\\"?U++:X==="{"?B++:X==="}"&&B--,U++}return-1},qo=function(z){return z.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},Ho=/^\\begin{/,Wo=function(z,A){for(var j,U=[],B=new RegExp("("+A.map(fe=>qo(fe.left)).join("|")+")");j=z.search(B),j!==-1;){j>0&&(U.push({type:"text",data:z.slice(0,j)}),z=z.slice(j));var J=A.findIndex(fe=>z.startsWith(fe.left));if(j=Ro(A[J].right,z,A[J].left.length),j===-1)break;var X=z.slice(0,j+A[J].right.length),ue=Ho.test(X)?X:z.slice(A[J].left.length,j);U.push({type:"math",data:ue,rawData:X,display:A[J].display}),z=z.slice(j+A[J].right.length)}return z!==""&&U.push({type:"text",data:z}),U},Ko=function(z,A){var j=Wo(z,A.delimiters);if(j.length===1&&j[0].type==="text")return null;for(var U=document.createDocumentFragment(),B=0;B<j.length;B++)if(j[B].type==="text")U.appendChild(document.createTextNode(j[B].data));else{var J=document.createElement("span"),X=j[B].data;A.displayMode=j[B].display;try{A.preProcess&&(X=A.preProcess(X)),pa.render(X,J,A)}catch(ue){if(!(ue instanceof pa.ParseError))throw ue;A.errorCallback("KaTeX auto-render: Failed to parse `"+j[B].data+"` with ",ue),U.appendChild(document.createTextNode(j[B].rawData));continue}U.appendChild(J)}return U},Xo=function je(z,A){for(var j=0;j<z.childNodes.length;j++){var U=z.childNodes[j];if(U.nodeType===3){for(var B=U.textContent,J=U.nextSibling,X=0;J&&J.nodeType===Node.TEXT_NODE;)B+=J.textContent,J=J.nextSibling,X++;var ue=Ko(B,A);if(ue){for(var fe=0;fe<X;fe++)U.nextSibling.remove();j+=ue.childNodes.length-1,z.replaceChild(ue,U)}else j+=X}else U.nodeType===1&&(function(){var $e=" "+U.className+" ",Pe=A.ignoredTags.indexOf(U.nodeName.toLowerCase())===-1&&A.ignoredClasses.every(bl=>$e.indexOf(" "+bl+" ")===-1);Pe&&je(U,A)})()}},Go=function(z,A){if(!z)throw new Error("No element provided to render");var j={};for(var U in A)A.hasOwnProperty(U)&&(j[U]=A[U]);j.delimiters=j.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],j.ignoredTags=j.ignoredTags||["script","noscript","style","textarea","pre","code","option"],j.ignoredClasses=j.ignoredClasses||[],j.errorCallback=j.errorCallback||console.error,j.macros=j.macros||{},Xo(z,j)};typeof window<"u"&&(window.katex=pa,window.renderMathInElement=Go);const Zo={class:"computer-manage"},Yo={class:"filter-bar mb-20"},en={class:"filter-card mb-20"},ln=["innerHTML"],an={class:"pagination-container mt-20"},tn={class:"import-container"},on={key:0,class:"mt-20"},nn={class:"mt-20"},sn={class:"mt-20"},rn={class:"mt-20"},un={key:0,class:"mt-20"},dn={class:"mb-20"},pn={key:0,class:"mt-20"},mn={class:"mt-20"},cn={class:"mt-20"},vn={key:0,class:"mt-20"},fn={key:0,class:"text-center mt-10",style:{color:"#909399"}},_n={class:"filter-bar mb-20"},gn=["innerHTML"],yn={class:"subjects-chapters-layout"},bn={class:"subjects-sidebar"},hn={class:"sidebar-header"},wn={class:"subjects-list"},kn=["onClick"],Cn={class:"subject-main"},Vn={class:"subject-name"},xn={class:"chapters-content"},Sn={class:"content-header"},Tn={class:"header-left"},jn={class:"header-title"},$n=["onClick"],Un={key:0,class:"expand-click-area"},In={key:1,class:"expand-placeholder"},Qn={key:1,class:"section-dot"},Mn={class:"filter-card mb-20"},An={class:"tag-questions-expand"},zn={class:"expand-header"},On={class:"expand-title"},Dn={key:0,class:"loading-questions"},Nn={key:1,class:"empty-questions"},Fn={key:2,class:"empty-questions"},Ln={key:3,class:"questions-list"},En={class:"question-header"},Bn={class:"question-index"},Pn={class:"question-type"},Jn={class:"question-id"},Rn={class:"question-meta"},qn={key:0,class:"meta-item"},Hn={class:"meta-value"},Wn={key:1,class:"meta-item"},Kn={class:"meta-value"},Xn={key:2,class:"meta-item"},Gn={class:"meta-value"},Zn={key:3,class:"meta-item"},Yn={class:"meta-value tags-list"},es={class:"question-content"},ls=["innerHTML"],as={key:0,class:"question-options"},ts={class:"option-key"},os=["innerHTML"],ns={key:1,class:"question-answer"},ss=["innerHTML"],rs={key:2,class:"question-analysis"},us=["innerHTML"],is=["onDblclick"],ds={class:"pagination-container mt-20"},ps={style:{"margin-bottom":"15px"}},ms={style:{display:"flex",gap:"8px"}},cs={class:"tags-list"},vs={class:"editor-wrapper"},fs={class:"options-list"},_s={class:"option-editor-wrapper"},gs={class:"subs-list"},ys={class:"sub-header"},bs={class:"sub-index"},hs={class:"sub-content"},ws={class:"editor-wrapper"},ks={class:"editor-wrapper"},Cs={key:2,class:"correction-remark mt-20"},Vs={class:"dialog-footer"},xs={class:"dialog-footer"},Ss={class:"mt-10"},Ts={key:0,class:"batch-import-actions mt-15"},js={class:"richtext-expand-section"},$s={key:0,class:"richtext-editor-wrapper"},Us={key:0},Is={class:"options-list"},Qs={class:"option-row"},Ms={class:"option-label"},As={key:1},zs={class:"sub-questions-list"},Os={class:"sub-question-actions"},Ds={class:"richtext-expand-section"},Ns={key:0,class:"richtext-editor-wrapper"},Fs={class:"richtext-expand-section"},Ls={key:0,class:"richtext-editor-wrapper"},Es={class:"tags-section"},Bs={key:1,class:"batch-import-nav"},Ps={class:"dialog-footer"},Js={key:0,class:"batch-progress"},Rs=["innerHTML"],qs={key:0},Hs={key:1},Ws={key:2},Ks={class:"dialog-footer"},Xs={style:{background:"#f5f5f5",padding:"15px","border-radius":"4px","overflow-x":"auto"}},Gs={style:{background:"#f5f5f5",padding:"15px","border-radius":"4px","overflow-x":"auto"}},Zs={style:{background:"#f5f5f5",padding:"15px","border-radius":"4px","overflow-x":"auto"}},Ys={style:{background:"#f5f5f5",padding:"15px","border-radius":"4px","overflow-x":"auto"}},er={style:{background:"#f5f5f5",padding:"15px","border-radius":"4px","overflow-x":"auto"}},lr={style:{background:"#f5f5f5",padding:"15px","border-radius":"4px","overflow-x":"auto"}},ar={key:0},tr={class:"filter-bar mb-10"},or=["innerHTML"],nr={class:"filter-bar mb-10"},sr=["innerHTML"],rr={class:"pagination-container mt-10"},ur={class:"filter-bar mb-10"},ir={key:0,class:"filter-bar mb-10"},dr={class:"text-muted"},pr=["innerHTML"],mr={class:"filter-bar mb-10"},cr={class:"ml-10"},vr=["innerHTML"],fr={class:"dialog-footer"},_r={__name:"ComputerManage",setup(je){const z=c("corrections"),A=c(!1),j=c(!1),U=c(!1),B=c(!1),J=c("paper-import"),X=c([]),ue=c([]),fe=ve({status:1,page:1,pageSize:20}),$e=c(null),Pe=c(""),bl=c([]),ma=c(0),H=ve({keyword:"",major_id:"",type:"",noValidTags:!1,noChapter:!1,noTags:!1,noMajor:!1,page:1,pageSize:20}),al=c(!1),Nl=c(!1),_e=ve({major_id:"",jsonData:""}),tl=c(!1),hl=c(!1),F=ve({major_ids:[],noMajorOnly:!1,includeOptions:!0,includeSubs:!0}),ol=c(!1),R=ve({major_id:"",chapter_id:"",tag_id:""}),nl=c([]),Ue=c([]),le=c([]),Se=c([]),Ie=c([]),sl=c([]),Fl=c(""),Ll=c({}),rl=c(!1),m=c(null),El=c(!1),Bl=c(!1),ul=c(!1),q=c(null),Pl=c(!1),W=ve({major_id:""}),ge=c(null),il=c(!1),G=c(null),Jl=c(!1),ca=c([]),va=c(0),Qe=c([]),K=ve({chapterId:"",keyword:"",showUnnamed:!1,showInvalid:!1,page:1,pageSize:20}),Rl=c(null),Je=c(""),fa=c(null),dl=c(!1),_a=c(null),pl=c(""),Re=c(!1),ae=ve({name:"",chapterId:""}),qe=c([]),ml=c(!1),He=c({}),wl=c({}),Me=c(!1),ql=c(!1),f=c(null),he=c([]),We=c(!1),Ke=c(!1),Xe=c(!1),cl=c(null),ga=c([]),Ae=c(""),Hl=c(!1),ya=JSON.stringify({exercise_type_name:"å•é€‰é¢˜",stem:"ä¸‹åˆ—å…³äºæ•°æ®ç»“æ„çš„å™è¿°ä¸­ï¼Œæ­£ç¡®çš„æ˜¯ï¼Ÿ",options:[{option_key:"A",option_value:"æ•°æ®ç»“æ„æ˜¯è®¡ç®—æœºå­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼"},{option_key:"B",option_value:"æ•°æ®ç»“æ„åªåŒ…æ‹¬é€»è¾‘ç»“æ„"},{option_key:"C",option_value:"æ•°æ®ç»“æ„åªåŒ…æ‹¬ç‰©ç†ç»“æ„"},{option_key:"D",option_value:"æ•°æ®ç»“æ„ä¸åŒ…æ‹¬ç®—æ³•"}],answer:"A",analysis:"æ•°æ®ç»“æ„æ˜¯è®¡ç®—æœºä¸­å­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼ŒåŒ…æ‹¬é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„ä¸¤ä¸ªæ–¹é¢ã€‚",level:3,knowledgeTags:["æ•°æ®ç»“æ„åŸºæœ¬æ¦‚å¿µ"],exam_full_name:"2024å¹´æ•°æ®ç»“æ„æœŸæœ«è€ƒè¯•",exam_time:"2024"},null,2),ba=JSON.stringify({exercise_type_name:"å¤šé€‰é¢˜",stem:"ä¸‹åˆ—å“ªäº›æ˜¯çº¿æ€§æ•°æ®ç»“æ„ï¼Ÿ",options:[{option_key:"A",option_value:"æ•°ç»„"},{option_key:"B",option_value:"é“¾è¡¨"},{option_key:"C",option_value:"æ ˆ"},{option_key:"D",option_value:"é˜Ÿåˆ—"},{option_key:"E",option_value:"æ ‘"}],answer:"ABCD",analysis:"æ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—éƒ½æ˜¯çº¿æ€§æ•°æ®ç»“æ„ï¼Œæ ‘æ˜¯éçº¿æ€§æ•°æ®ç»“æ„ã€‚",level:2,knowledgeTags:["çº¿æ€§è¡¨","æ•°æ®ç»“æ„åˆ†ç±»"],exam_full_name:"2024å¹´æ•°æ®ç»“æ„æœŸä¸­è€ƒè¯•",exam_time:"2024"},null,2),ha=JSON.stringify({exercise_type_name:"å¡«ç©ºé¢˜",stem:"æ ˆçš„ç‰¹ç‚¹æ˜¯______ï¼Œé˜Ÿåˆ—çš„ç‰¹ç‚¹æ˜¯______ã€‚",answer:"å…ˆè¿›åå‡ºï¼ˆFILOï¼‰ï¼Œå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰",analysis:"æ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰æˆ–å…ˆè¿›åå‡ºï¼ˆFILOï¼‰çš„çº¿æ€§è¡¨ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„çº¿æ€§è¡¨ã€‚",level:2,knowledgeTags:["æ ˆ","é˜Ÿåˆ—"],exam_full_name:"2024å¹´æ•°æ®ç»“æ„å•å…ƒæµ‹è¯•",exam_time:"2024"},null,2),wa=JSON.stringify({exercise_type_name:"è§£ç­”é¢˜",stem:"è¯·ç®€è¿°äºŒå‰æ ‘çš„å‰åºã€ä¸­åºã€ååºéå†ç®—æ³•ï¼Œå¹¶ç»™å‡ºæ—¶é—´å¤æ‚åº¦åˆ†æã€‚",answer:"å‰åºéå†ï¼šæ ¹-å·¦-å³ï¼›ä¸­åºéå†ï¼šå·¦-æ ¹-å³ï¼›ååºéå†ï¼šå·¦-å³-æ ¹ã€‚ä¸‰ç§éå†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(n)ï¼Œå…¶ä¸­nä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ã€‚",analysis:"äºŒå‰æ ‘çš„ä¸‰ç§éå†æ–¹å¼éƒ½æ˜¯é€’å½’ç®—æ³•ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªè®¿é—®ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚",level:4,knowledgeTags:["æ ‘ä¸äºŒå‰æ ‘","äºŒå‰æ ‘éå†"],exam_full_name:"2024å¹´æ•°æ®ç»“æ„æœŸæœ«è€ƒè¯•",exam_time:"2024",total_score:10},null,2),ka=JSON.stringify({exercise_type_name:"è§£ç­”é¢˜",stem:"åè¯è§£é‡Šï¼š",options:[{questionOrder:1,questionStem:"é¡ºåºå­˜å‚¨ä¸é“¾å¼å­˜å‚¨ï¼›",questionAnswer:"é¡ºåºå­˜å‚¨æ–¹å¼å°±æ˜¯åœ¨ä¸€å—è¿ç»­çš„å­˜å‚¨åŒºåŸŸä¸€ä¸ªæ¥ç€ä¸€ä¸ªçš„å­˜æ”¾æ•°æ®...",questionAnalysis:"é¡ºåºå­˜å‚¨æ–¹å¼ä¹Ÿç§°ä¸ºé¡ºåºå­˜å‚¨ç»“æ„ï¼Œä¸€èˆ¬é‡‡ç”¨æ•°ç»„æˆ–è€…ç»“æ„æ•°ç»„æ¥æè¿°...",questionScore:5},{questionOrder:2,questionStem:"å¹¿ä¹‰è¡¨ï¼›",questionAnswer:"å¹¿ä¹‰è¡¨æ˜¯nï¼ˆnâ‰¥0ï¼‰ä¸ªæ•°æ®å…ƒç´ çš„æœ‰åºåºåˆ—...",questionAnalysis:"å¹¿ä¹‰è¡¨å¯ä»¥æ˜¯é€’å½’çš„è¡¨ï¼Œå³å¹¿ä¹‰è¡¨ä¹Ÿå¯ä»¥æ˜¯å…¶è‡ªèº«çš„å­è¡¨ã€‚",questionScore:5}],level:2,knowledgeTags:["æ•°æ®ç»“æ„åŸºæœ¬æ¦‚å¿µ"],exam_full_name:"2024å¹´æ•°æ®ç»“æ„æœŸæœ«è€ƒè¯•",exam_time:"2024",total_score:10},null,2),Ca=JSON.stringify([{exercise_type_name:"å•é€‰é¢˜",stem:"ç¬¬ä¸€é¢˜é¢˜ç›®å†…å®¹",options:[{option_key:"A",option_value:"é€‰é¡¹A"},{option_key:"B",option_value:"é€‰é¡¹B"}],answer:"A",analysis:"ç¬¬ä¸€é¢˜è§£æ"},{exercise_type_name:"å•é€‰é¢˜",stem:"ç¬¬äºŒé¢˜é¢˜ç›®å†…å®¹",options:[{option_key:"A",option_value:"é€‰é¡¹A"},{option_key:"B",option_value:"é€‰é¡¹B"}],answer:"B",analysis:"ç¬¬äºŒé¢˜è§£æ"}],null,2),Ge=o=>{navigator.clipboard.writeText(o).then(()=>{d.success("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(()=>{d.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")})},kl=c(!1),we=c(null),Wl=c("wrong-stats"),Cl=c([]),Kl=c(!1),ze=c([]),te=ve({keyword:"",type:"",page:1,pageSize:20}),Vl=c([]),Va=c(0),Xl=c(!1),Oe=c([]),xl=c([]),Sl=c(!1),ke=ve({type:"",selectedPaper:""}),Te=c([]),vl=c(!1),De=c([]),Ne=c([]),Gl=c(!1),Ce=c([]),oe=ve({keyword:"",type:""}),se=c([]),Ze=c([]),Tl=c(1),jl=c(1),Za=Dl(()=>se.value.reduce((o,e)=>{var s;return o+(((s=e.data)==null?void 0:s.length)||0)},0)),ie=c([]),Zl=c(!1),$l=Dl(()=>ie.value.reduce((o,e)=>{var s;return o+(((s=e.data)==null?void 0:s.length)||0)},0)),Ya=Dl(()=>ie.value.flatMap(e=>e.data||[]).slice(0,5)),et=c(!1),lt=c(!1),at=c(!1),Yl=o=>o?o.replace(/<[^>]+>/g,"").trim().length>0&&o!=="<p><br></p>":!1,tt=o=>o?new Date(o).toLocaleString():"-",Fe=o=>o?o.replace(/<[^>]+>/g,""):"",fl=async()=>{Bl.value=!0;try{const o=await V.getComputerSubjects({admin:1});console.log("è·å–ç§‘ç›®åˆ—è¡¨:",o.data),le.value=o.data||[],ra(()=>{ut()})}catch(o){console.error("è·å–ç§‘ç›®å¤±è´¥:",o),d.error("è·å–ç§‘ç›®åˆ—è¡¨å¤±è´¥")}finally{Bl.value=!1}},xa=(o=null)=>{o?q.value={id:o.id,subject_name:o.name,subject_code:o.code,sort:0,is_on_shelf:o.is_on_shelf??1,category_name:""}:q.value={subject_name:"",subject_code:"",sort:0,is_on_shelf:1,category_name:""},ul.value=!0},ot=async()=>{if(!q.value.subject_name){d.warning("è¯·è¾“å…¥ç§‘ç›®åç§°");return}try{q.value.id?(await V.updateComputerSubject(q.value.id,q.value),d.success("ç§‘ç›®æ›´æ–°æˆåŠŸ")):(await V.createComputerSubject(q.value),d.success("ç§‘ç›®åˆ›å»ºæˆåŠŸ")),ul.value=!1,fl()}catch(o){console.error("ä¿å­˜ç§‘ç›®å¤±è´¥:",o),d.error("ä¿å­˜å¤±è´¥")}},nt=async o=>{try{const e=o.is_on_shelf===1?0:1;await V.updateComputerSubject(o.id,{is_on_shelf:e}),d.success(e===1?"ç§‘ç›®å·²ä¸Šæ¶":"ç§‘ç›®å·²ä¸‹æ¶"),fl()}catch(e){console.error("åˆ‡æ¢ç§‘ç›®çŠ¶æ€å¤±è´¥:",e),d.error("æ“ä½œå¤±è´¥")}},Ye=c({}),ea=c({}),st=Dl(()=>{const o=[],e=new Set(Ie.value.map(s=>String(s)));return Se.value.forEach(s=>{const v=String(s.id),n=Ye.value[v]||[],i=e.has(v),S=n.length>0||!Ye.value.hasOwnProperty(v),h=n.length;o.push({...s,id:v,level:0,isChapter:!0,hasChildren:S,isExpanded:i,sectionCount:h,hasLoaded:Ye.value.hasOwnProperty(v)}),i&&n.length>0&&n.forEach((y,C)=>{console.log("å¤„ç†è€ƒç‚¹:",y),o.push({...y,id:`section-${v}-${y.tag_id||y.id||C}`,originalId:y.tag_id||y.id,name:y.tag_name||y.name||y.TagName||`è€ƒç‚¹${C+1}`,level:1,isSection:!0,parentChapterId:v,totalQuestions:y.question_count||y.totalQuestions||0})})}),o}),la=async o=>{const e=String(o);if(!ea.value[e]){ea.value[e]=!0;try{console.log("è·å–ç« èŠ‚è€ƒç‚¹:",e);const s=await V.getComputerTags({chapterId:e,pageSize:1e3});if(console.log("è·å–åˆ°è€ƒç‚¹æ•°æ®:",s.data),s.data){const v=s.data.list||s.data;console.log("è§£æåçš„è€ƒç‚¹åˆ—è¡¨:",v),v.length>0&&console.log("ç¬¬ä¸€ä¸ªè€ƒç‚¹å­—æ®µ:",v[0]),Ye.value[e]=v}}catch(s){console.error("è·å–è€ƒç‚¹å¤±è´¥:",s),Ye.value[e]=[]}finally{ea.value[e]=!1}}},rt=async o=>{if(!o.isChapter)return;const e=String(o.id),s=Ie.value.findIndex(v=>String(v)===e);s>-1?Ie.value.splice(s,1):(Ie.value.push(e),Ye.value[e]||await la(e))},Z=async o=>{if(!o){Se.value=[];return}Pl.value=!0;try{const e=await V.getComputerChapters({majorId:o});e.data&&e.data.chapters?Se.value=e.data.chapters:Se.value=e.data||[]}catch(e){console.error("è·å–ç« èŠ‚å¤±è´¥:",e)}finally{Pl.value=!1}},Sa=o=>{ge.value=o,W.major_id=o.id,Z(o.id),Ie.value=[]},ut=()=>{le.value.length>0&&!ge.value&&Sa(le.value[0])},Ta=(o=null)=>{o?G.value={id:o.id,major_id:W.major_id,chapter_name:o.name,chapter_code:o.code,sort:0}:G.value={major_id:W.major_id,chapter_name:"",chapter_code:"",sort:0},il.value=!0},it=async()=>{if(!G.value.chapter_name){d.warning("è¯·è¾“å…¥ç« èŠ‚åç§°");return}try{G.value.id?(await V.updateComputerChapter(G.value.id,G.value),d.success("ç« èŠ‚æ›´æ–°æˆåŠŸ")):(await V.createComputerChapter(G.value),d.success("ç« èŠ‚åˆ›å»ºæˆåŠŸ")),il.value=!1,Z(W.major_id)}catch(o){console.error("ä¿å­˜ç« èŠ‚å¤±è´¥:",o),d.error("ä¿å­˜å¤±è´¥")}},dt=o=>{xe.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç« èŠ‚å—ï¼Ÿåˆ é™¤åå°†åŒæ—¶åˆ é™¤è¯¥ç« èŠ‚ä¸‹çš„æ‰€æœ‰é¢˜ç›®ï¼","è­¦å‘Š",{type:"warning"}).then(async()=>{try{await V.deleteComputerChapter(o),d.success("åˆ é™¤æˆåŠŸ"),Z(W.major_id)}catch(e){console.error("åˆ é™¤ç« èŠ‚å¤±è´¥:",e),d.error("åˆ é™¤å¤±è´¥")}})},ja=async()=>{try{const o=await V.getComputerChapters({pageSize:1e3});Qe.value=(o.data||[]).map(e=>({id:e.chapter_id||e.id,name:e.chapter_name||e.name}))}catch(o){console.error("è·å–ç« èŠ‚åˆ—è¡¨å¤±è´¥:",o)}},de=async()=>{Jl.value=!0;try{const o={page:K.page,pageSize:K.pageSize,chapterId:K.chapterId,keyword:K.keyword,showUnnamed:K.showUnnamed,showInvalid:K.showInvalid},e=await V.getComputerTags(o);ca.value=e.data.list||[],va.value=e.data.total||0}catch(o){console.error("è·å–è€ƒç‚¹åˆ—è¡¨å¤±è´¥:",o),d.error("è·å–è€ƒç‚¹åˆ—è¡¨å¤±è´¥")}finally{Jl.value=!1}},$a=o=>{Rl.value=o.tag_id,Je.value=o.tag_name||"",ra(()=>{var e;(e=fa.value)==null||e.focus()})},Ua=async o=>{if(!Je.value.trim()){d.warning("è€ƒç‚¹åç§°ä¸èƒ½ä¸ºç©º");return}try{await V.updateComputerTag(o.tag_id,{tag_name:Je.value.trim()}),d.success("ä¿å­˜æˆåŠŸ"),o.tag_name=Je.value.trim(),Rl.value=null}catch(e){console.error("ä¿å­˜è€ƒç‚¹åç§°å¤±è´¥:",e),d.error("ä¿å­˜å¤±è´¥")}},pt=o=>{_a.value=o,pl.value=o.chapter_id,dl.value=!0},mt=async()=>{if(!pl.value){d.warning("è¯·é€‰æ‹©ç›®æ ‡ç« èŠ‚");return}try{await V.moveComputerTag(_a.value.tag_id,{chapter_id:pl.value}),d.success("ç§»åŠ¨æˆåŠŸ"),dl.value=!1,de()}catch(o){console.error("ç§»åŠ¨è€ƒç‚¹å¤±è´¥:",o),d.error("ç§»åŠ¨å¤±è´¥")}},ct=o=>{if(!o){d.error("è€ƒç‚¹IDä¸èƒ½ä¸ºç©º"),console.error("deleteTag called with invalid id:",o);return}xe.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè€ƒç‚¹å—ï¼Ÿ","è­¦å‘Š",{type:"warning"}).then(async()=>{try{await V.deleteComputerTag(o),d.success("åˆ é™¤æˆåŠŸ"),de()}catch(e){console.error("åˆ é™¤è€ƒç‚¹å¤±è´¥:",e),d.error("åˆ é™¤å¤±è´¥")}})},vt=()=>{xe.confirm("ç¡®å®šè¦æ ¡å¯¹è€ƒç‚¹åç§°å—ï¼Ÿè¿™å°†æŠŠæ‰€æœ‰tag_nameä¸ºçº¯æ•°å­—ä¸”èƒ½åœ¨ç« èŠ‚è¡¨ä¸­æ‰¾åˆ°å¯¹åº”è®°å½•çš„è€ƒç‚¹åç§°æ›¿æ¢ä¸ºå¯¹åº”çš„ç« èŠ‚åç§°ã€‚","ç¡®è®¤æ ¡å¯¹",{type:"info"}).then(async()=>{var o;try{const e=await V.proofreadComputerTags();d.success(`æ ¡å¯¹æˆåŠŸï¼å…±æ›´æ–° ${((o=e.data)==null?void 0:o.updatedCount)||0} ä¸ªè€ƒç‚¹åç§°`),de()}catch(e){console.error("æ ¡å¯¹è€ƒç‚¹åç§°å¤±è´¥:",e),d.error("æ ¡å¯¹å¤±è´¥: "+(e.message||"æœªçŸ¥é”™è¯¯"))}})},ft=async()=>{if(Qe.value.length>0){const o=Qe.value[0];K.chapterId=o.id,K.keyword="",K.showUnnamed=!1,K.showInvalid=!1,K.page=1,await de(),d.info(`å·²ç­›é€‰å‡º"${o.name}"ä¸‹çš„è€ƒç‚¹ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœ‰éœ€è¦ç§»åŠ¨åˆ°å…¶ä»–ç« èŠ‚çš„è€ƒç‚¹`)}},_t=()=>{ae.name="",ae.chapterId="",cl.value=null,Re.value=!0},gt=o=>{qe.value=o},yt=(o,e)=>{e&&!He.value[o.tag_id]&&Ia(o)},bt=()=>{batchTargetChapterId.value="",ml.value=!0},ht=async()=>{if(!batchTargetChapterId.value){d.warning("è¯·é€‰æ‹©ç›®æ ‡ç« èŠ‚");return}try{const o=qe.value.map(e=>e.tag_id);await V.batchMoveComputerTags({tagIds:o,chapter_id:batchTargetChapterId.value}),d.success(`æˆåŠŸç§»åŠ¨ ${o.length} ä¸ªè€ƒç‚¹`),ml.value=!1,qe.value=[],de()}catch(o){console.error("æ‰¹é‡ç§»åŠ¨å¤±è´¥:",o),d.error("æ‰¹é‡ç§»åŠ¨å¤±è´¥")}},Ia=async o=>{if(!o||!o.tag_id){console.error("loadTagQuestions called with invalid tag:",o),d.error("è€ƒç‚¹æ•°æ®æ— æ•ˆ");return}wl.value[o.tag_id]=!0;try{const e=await V.getTagQuestions(o.tag_id);He.value[o.tag_id]=e.data||[]}catch(e){console.error("åŠ è½½è€ƒç‚¹é¢˜ç›®å¤±è´¥:",e),d.error("åŠ è½½é¢˜ç›®å¤±è´¥")}finally{wl.value[o.tag_id]=!1}},wt=async()=>{if(!ae.name.trim()){d.warning("è¯·è¾“å…¥è€ƒç‚¹åç§°");return}if(!ae.chapterId){d.warning("è¯·é€‰æ‹©æ‰€å±ç« èŠ‚");return}try{if(await V.createComputerTag({tag_name:ae.name.trim(),chapter_id:ae.chapterId}),d.success("åˆ›å»ºæˆåŠŸ"),Re.value=!1,cl.value){await la(ae.chapterId);const o=String(ae.chapterId);Ie.value.find(e=>String(e)===o)||Ie.value.push(o),cl.value=null}de()}catch(o){console.error("åˆ›å»ºè€ƒç‚¹å¤±è´¥:",o),d.error("åˆ›å»ºå¤±è´¥")}},kt=()=>{f.value={exercise_type_name:"å•é€‰é¢˜",major_id:"",chapter_id:"",stem:"",stem_richtext:"",answer:"",answer_richtext:"",analysis:"",analysis_richtext:"",level:3,total_score:0,exam_full_name:"",exam_time:"",options:[{option_key:"A",option_value:""},{option_key:"B",option_value:""},{option_key:"C",option_value:""},{option_key:"D",option_value:""}],subQuestions:[],knowledgeTags:[]},he.value=[],We.value=!1,Ke.value=!1,Xe.value=!1,N.value=[],P.value=0,Ve.value=!1,Ae.value="",Me.value=!0},Ct=()=>{N.value=[],P.value=0,Ve.value=!1,Ae.value=""},Vt=async o=>{if(o)try{const e=await V.getComputerChapters({majorId:o});e.data&&e.data.chapters?he.value=e.data.chapters:he.value=e.data||[]}catch(e){console.error("è·å–ç« èŠ‚å¤±è´¥:",e),he.value=[]}else he.value=[];f.value.chapter_id=""},N=c([]),P=c(0),Ve=c(!1),Le=c(!1),Y=c({current:0,total:0,success:0,failed:0}),Ul=c(!1),xt=()=>{if(!Ae.value.trim()){d.warning("è¯·è¾“å…¥JSONæ•°æ®");return}try{const o=JSON.parse(Ae.value.trim()),e=Array.isArray(o)?o:[o];if(e.length===0){d.warning("JSONæ•°æ®ä¸ºç©º");return}N.value=e,P.value=0,Ve.value=e.length>1,Il(e[0]),e.length>1?d.success(`æˆåŠŸè§£æ ${e.length} é“é¢˜ç›®ï¼Œå½“å‰æ˜¾ç¤ºç¬¬ 1 é“`):d.success("æˆåŠŸè§£æ 1 é“é¢˜ç›®")}catch(o){console.error("JSONè§£æå¤±è´¥:",o),d.error("JSONæ ¼å¼é”™è¯¯ï¼š"+o.message)}},Il=o=>{f.value.exercise_type_name=o.exercise_type_name||o.type||"å•é€‰é¢˜",f.value.stem=o.stem||o.title||o.question||"",f.value.stem_richtext=o.stem_richtext||o.stem||"",f.value.answer=o.answer||"",f.value.answer_richtext=o.answer_richtext||o.answer||"",f.value.analysis=o.analysis||o.parse||"",f.value.analysis_richtext=o.analysis_richtext||o.analysis||"",f.value.level=o.level||o.difficulty||3,f.value.total_score=o.total_score||o.score||0,f.value.exam_full_name=o.exam_full_name||o.source||"",f.value.exam_time=o.exam_time||o.year||"",o.options&&Array.isArray(o.options)?o.options.length>0&&o.options[0].questionStem!==void 0?(f.value.subQuestions=o.options.map((s,v)=>({sub_stem:s.questionStem||s.sub_stem||"",sub_answer:s.questionAnswer||s.sub_answer||"",sub_analysis:s.questionAnalysis||s.sub_analysis||"",sub_score:s.questionScore||s.sub_score||0,order_num:s.questionOrder||s.order_num||v+1})),f.value.options=[]):(f.value.options=o.options.map((s,v)=>({option_key:s.option_key||s.key||String.fromCharCode(65+v),option_value:s.option_value||s.value||s.content||s.text||""})),f.value.subQuestions=[]):o.option&&typeof o.option=="object"?(f.value.options=Object.entries(o.option).map(([e,s])=>({option_key:e,option_value:s})),f.value.subQuestions=[]):o.subQuestions&&Array.isArray(o.subQuestions)&&(f.value.subQuestions=o.subQuestions.map((e,s)=>({sub_stem:e.sub_stem||e.stem||"",sub_answer:e.sub_answer||e.answer||"",sub_analysis:e.sub_analysis||e.analysis||"",sub_score:e.sub_score||e.score||0,order_num:e.order_num||s+1})),f.value.options=[]),o.knowledgeTags&&Array.isArray(o.knowledgeTags)?f.value.knowledgeTags=o.knowledgeTags:o.tags&&Array.isArray(o.tags)?f.value.knowledgeTags=o.tags:o.tag&&(f.value.knowledgeTags=[o.tag])},St=()=>{P.value<N.value.length-1&&(P.value++,Il(N.value[P.value]),d.success(`å·²åŠ è½½ç¬¬ ${P.value+1} / ${N.value.length} é“é¢˜ç›®`))},Tt=()=>{P.value>0&&(P.value--,Il(N.value[P.value]),d.success(`å·²åŠ è½½ç¬¬ ${P.value+1} / ${N.value.length} é“é¢˜ç›®`))},Qa=async()=>{if(N.value.length===0){d.warning("æ²¡æœ‰å¯å¯¼å…¥çš„é¢˜ç›®");return}if(!f.value.major_id){d.warning("è¯·å…ˆé€‰æ‹©æ‰€å±ç§‘ç›®");return}if(!await xe.confirm(`ç¡®å®šè¦å¯¼å…¥å…¨éƒ¨ ${N.value.length} é“é¢˜ç›®å—ï¼Ÿ
æ‰€æœ‰é¢˜ç›®å°†ä½¿ç”¨å½“å‰é€‰æ‹©çš„ç§‘ç›®å’Œç« èŠ‚ã€‚`,"ç¡®è®¤æ‰¹é‡å¯¼å…¥",{confirmButtonText:"ç¡®å®šå¯¼å…¥",cancelButtonText:"å–æ¶ˆ",type:"warning"}).catch(()=>!1))return;Le.value=!0,Y.value={current:0,total:N.value.length,success:0,failed:0};const e={å•é€‰é¢˜:1,å¤šé€‰é¢˜:2,å¡«ç©ºé¢˜:3,è§£ç­”é¢˜:4,åˆ¤æ–­é¢˜:5},s=[];for(let v=0;v<N.value.length;v++){const n=N.value[v];Y.value.current=v+1;try{const i=n.stem||n.title||n.question||"",S=n.answer||"",h=n.analysis||n.parse||"",y={stem:i,answer:S,analysis:h,level:n.level||n.difficulty||3,total_score:n.total_score||n.score||0,exam_full_name:n.exam_full_name||n.source||"",exam_time:n.exam_time||n.year||"",exercise_type_name:n.exercise_type_name||n.type||"å•é€‰é¢˜",exercise_type:e[n.exercise_type_name||n.type]||1,major_id:f.value.major_id,chapter_id:f.value.chapter_id||null,options:[],subs:[],knowledgeTags:[]};n.options&&Array.isArray(n.options)?n.options.length>0&&n.options[0].questionStem!==void 0?y.subs=n.options.map((w,x)=>({sub_stem:w.questionStem||w.sub_stem||"",sub_answer:w.questionAnswer||w.sub_answer||"",sub_analysis:w.questionAnalysis||w.sub_analysis||"",sub_score:w.questionScore||w.sub_score||0,order_num:w.questionOrder||w.order_num||x+1})):y.options=n.options.map((w,x)=>({option_key:w.option_key||w.key||String.fromCharCode(65+x),option_value:w.option_value||w.value||w.content||w.text||""})):n.option&&typeof n.option=="object"?y.options=Object.entries(n.option).map(([C,w])=>({option_key:C,option_value:w})):n.subQuestions&&Array.isArray(n.subQuestions)&&(y.subs=n.subQuestions.map((C,w)=>({sub_stem:C.sub_stem||C.stem||"",sub_answer:C.sub_answer||C.answer||"",sub_analysis:C.sub_analysis||C.analysis||"",sub_score:C.sub_score||C.score||0,order_num:C.order_num||w+1}))),n.knowledgeTags&&Array.isArray(n.knowledgeTags)?y.knowledgeTags=n.knowledgeTags:n.tags&&Array.isArray(n.tags)?y.knowledgeTags=n.tags:n.tag&&(y.knowledgeTags=[n.tag]),await V.createComputerQuestion(y),Y.value.success++}catch(i){console.error(`å¯¼å…¥ç¬¬ ${v+1} é¢˜å¤±è´¥:`,i),Y.value.failed++,s.push({index:v+1,stem:n.stem||n.title||"æ— æ ‡é¢˜",error:i.message})}}Le.value=!1,Y.value.failed===0?(d.success(`ğŸ‰ å…¨éƒ¨ ${Y.value.total} é“é¢˜ç›®å¯¼å…¥æˆåŠŸï¼`),Me.value=!1,ee(),W.major_id&&Z(W.major_id)):(d.warning(`å¯¼å…¥å®Œæˆï¼šæˆåŠŸ ${Y.value.success} é“ï¼Œå¤±è´¥ ${Y.value.failed} é“`),s.length>0&&console.error("å¯¼å…¥å¤±è´¥çš„é¢˜ç›®ï¼š",s))},jt=()=>{Ul.value=!0},$t=()=>{Ae.value="",N.value=[],P.value=0,Ve.value=!1,d.success("å·²æ¸…ç©º")},Ut=()=>{const o=String.fromCharCode(65+f.value.options.length);f.value.options.push({option_key:o,option_value:""})},It=o=>{f.value.options.splice(o,1),f.value.options.forEach((e,s)=>{e.option_key=String.fromCharCode(65+s)})},Qt=()=>{const o=f.value.subQuestions.length+1;f.value.subQuestions.push({sub_stem:"",sub_answer:"",sub_analysis:"",sub_score:0,order_num:o})},Mt=o=>{f.value.subQuestions.splice(o,1),f.value.subQuestions.forEach((e,s)=>{e.order_num=s+1})},At=()=>{f.value.knowledgeTags.push("")},zt=o=>{f.value.knowledgeTags.splice(o,1)},aa=o=>{if(!o)return"";const e=document.createElement("div");return e.innerHTML=o,e.textContent||e.innerText||""},Ot=async()=>{if(!f.value.stem){d.warning("è¯·è¾“å…¥é¢˜å¹²");return}if(!f.value.major_id){d.warning("è¯·é€‰æ‹©æ‰€å±ç§‘ç›®");return}ql.value=!0;try{const o={å•é€‰é¢˜:1,å¤šé€‰é¢˜:2,å¡«ç©ºé¢˜:3,è§£ç­”é¢˜:4,åˆ¤æ–­é¢˜:5},e=f.value.stem_richtext?aa(f.value.stem_richtext):f.value.stem,s=f.value.answer_richtext?aa(f.value.answer_richtext):f.value.answer,v=f.value.analysis_richtext?aa(f.value.analysis_richtext):f.value.analysis,n={...f.value,stem:e,answer:s,analysis:v,exercise_type:o[f.value.exercise_type_name]||1,options:["å•é€‰é¢˜","å¤šé€‰é¢˜"].includes(f.value.exercise_type_name)?f.value.options:[],subs:f.value.exercise_type_name==="è§£ç­”é¢˜"?f.value.subQuestions:[],knowledgeTags:f.value.knowledgeTags.filter(i=>i.trim())};await V.createComputerQuestion(n),d.success("é¢˜ç›®åˆ›å»ºæˆåŠŸ"),Ve.value&&P.value<N.value.length-1?(P.value++,Il(N.value[P.value]),d.success(`å·²è‡ªåŠ¨åŠ è½½ç¬¬ ${P.value+1} / ${N.value.length} é“é¢˜ç›®ï¼Œè¯·æ£€æŸ¥å¹¶ç»§ç»­åˆ›å»º`)):(Me.value=!1,N.value=[],P.value=0,Ve.value=!1),ee(),W.major_id&&Z(W.major_id)}catch(o){console.error("åˆ›å»ºé¢˜ç›®å¤±è´¥:",o),d.error("åˆ›å»ºé¢˜ç›®å¤±è´¥")}finally{ql.value=!1}},Dt=async o=>{try{const e=await V.getComputerChapters({majorId:W.major_id});e.data&&e.data.chapters?he.value=e.data.chapters:he.value=e.data||[]}catch(e){console.error("è·å–ç« èŠ‚å¤±è´¥:",e),he.value=[]}f.value={exercise_type_name:"å•é€‰é¢˜",major_id:W.major_id,chapter_id:o.id,stem:"",stem_richtext:"",answer:"",answer_richtext:"",analysis:"",analysis_richtext:"",level:3,total_score:0,exam_full_name:"",exam_time:"",options:[{option_key:"A",option_value:""},{option_key:"B",option_value:""},{option_key:"C",option_value:""},{option_key:"D",option_value:""}],knowledgeTags:[]},We.value=!1,Ke.value=!1,Xe.value=!1,Me.value=!0},Nt=o=>{d.info(`ä»è€ƒç‚¹ "${o.name}" åˆ›å»ºé¢˜ç›®åŠŸèƒ½å¼€å‘ä¸­`)},Ft=o=>{d.info(`æ·»åŠ é¢˜ç›®åˆ°è€ƒç‚¹ "${o.name}" åŠŸèƒ½å¼€å‘ä¸­`)},Lt=o=>{d.info(`ç¼–è¾‘è€ƒç‚¹ "${o.name}" åŠŸèƒ½å¼€å‘ä¸­`)},Et=o=>{cl.value=o,ae.name="",ae.chapterId=o.id,Re.value=!0},Bt=o=>{xe.confirm(`ç¡®å®šè¦åˆ é™¤è€ƒç‚¹ "${o.name}" å—ï¼Ÿ`,"æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{try{await V.deleteComputerTag(o.originalId),d.success("åˆ é™¤æˆåŠŸ"),await la(o.parentChapterId)}catch(e){console.error("åˆ é™¤è€ƒç‚¹å¤±è´¥:",e),d.error("åˆ é™¤å¤±è´¥")}}).catch(()=>{})},Pt=o=>{we.value=o,Wl.value="wrong-stats",Cl.value=[],ze.value=[],Vl.value=[],Oe.value=[],xl.value=[],te.keyword="",te.type="",te.page=1,ke.type="",ke.selectedPaper="",Te.value=[],De.value=[],Ne.value=[],Ce.value=[],oe.keyword="",oe.type="",kl.value=!0,el()},Jt=async()=>{Kl.value=!0;try{const o=await V.getComputerWrongBookStats();Cl.value=o.data||[]}catch(o){console.error("è·å–é”™é¢˜ç»Ÿè®¡å¤±è´¥:",o),d.error("è·å–é”™é¢˜ç»Ÿè®¡å¤±è´¥")}finally{Kl.value=!1}},Rt=o=>{ze.value=o},Ql=c(!1),qt=async()=>{if(ze.value.length===0){d.warning("è¯·é€‰æ‹©è¦æ·»åŠ çš„é¢˜ç›®");return}if(!Ql.value){Ql.value=!0;try{const o=ze.value.map(e=>e.QuestionID);await V.addQuestionsToChapterSet(we.value.id,{questionIds:o,remark:"ä»é”™é¢˜ç»Ÿè®¡æ·»åŠ "}),d.success(`æˆåŠŸæ·»åŠ  ${o.length} é“é¢˜ç›®`),ze.value=[],el(),W.major_id&&Z(W.major_id)}catch(o){console.error("æ·»åŠ é¢˜ç›®å¤±è´¥:",o),d.error("æ·»åŠ é¢˜ç›®å¤±è´¥")}finally{Ql.value=!1}}};let ta=null;const Ht=()=>{ta&&clearTimeout(ta),ta=setTimeout(()=>{te.page=1,Ml()},500)},Ml=async()=>{Xl.value=!0;try{const o={...te,size:te.pageSize},e=await V.searchComputerQuestions(o);Vl.value=e.data.questions||e.data.list||[],Va.value=e.data.total||0}catch(o){console.error("æœç´¢é¢˜ç›®å¤±è´¥:",o)}finally{Xl.value=!1}},Wt=o=>{Oe.value=o},Kt=async()=>{if(Oe.value.length===0){d.warning("è¯·é€‰æ‹©è¦æ·»åŠ çš„é¢˜ç›®");return}try{const o=Oe.value.map(e=>e.question_id);await V.addQuestionsToChapterSet(we.value.id,{questionIds:o,remark:"ä»é¢˜åº“æœç´¢æ·»åŠ "}),d.success(`æˆåŠŸæ·»åŠ  ${o.length} é“é¢˜ç›®`),Oe.value=[],el(),W.major_id&&Z(W.major_id)}catch(o){console.error("æ·»åŠ é¢˜ç›®å¤±è´¥:",o),d.error("æ·»åŠ é¢˜ç›®å¤±è´¥")}},el=async()=>{if(we.value){Sl.value=!0;try{const o=await V.getChapterQuestionSet(we.value.id);xl.value=o.data||[]}catch(o){console.error("è·å–ç« èŠ‚é¢˜é›†å¤±è´¥:",o)}finally{Sl.value=!1}}},Xt=async o=>{try{await xe.confirm("ç¡®å®šè¦ä»é¢˜é›†ä¸­ç§»é™¤è¿™é“é¢˜ç›®å—ï¼Ÿ","ç¡®è®¤",{type:"warning"}),await V.removeQuestionFromChapterSet(we.value.id,o),d.success("ç§»é™¤æˆåŠŸ"),el(),W.major_id&&Z(W.major_id)}catch(e){e!=="cancel"&&(console.error("ç§»é™¤é¢˜ç›®å¤±è´¥:",e),d.error("ç§»é™¤å¤±è´¥"))}},Gt=o=>{o==="wrong-stats"&&Cl.value.length===0&&Jt(),o==="search"&&Vl.value.length===0&&Ml(),o==="from-paper"&&Te.value.length===0&&!ke.type&&Zt()},Zt=async()=>{var o,e;vl.value=!0;try{const[s,v]=await Promise.all([V.getPaperList({paperType:1,pageSize:1e3}),V.getPaperList({paperType:2,pageSize:1e3})]),n=(((o=s.data)==null?void 0:o.list)||[]).map(S=>({...S,paperType:"çœŸé¢˜å·"})),i=(((e=v.data)==null?void 0:e.list)||[]).map(S=>({...S,paperType:"æ¨¡æ‹Ÿå·"}));Te.value=[...n,...i]}catch(s){console.error("è·å–è¯•å·åˆ—è¡¨å¤±è´¥:",s),d.error("è·å–è¯•å·åˆ—è¡¨å¤±è´¥")}finally{vl.value=!1}},Yt=async o=>{var e;if(ke.selectedPaper="",De.value=[],Ne.value=[],Ce.value=[],oe.keyword="",oe.type="",!o){Te.value=[];return}vl.value=!0;try{const s=await V.getPaperList({paperType:o,pageSize:1e3});Te.value=((e=s.data)==null?void 0:e.list)||[]}catch(s){console.error("è·å–è¯•å·åˆ—è¡¨å¤±è´¥:",s),d.error("è·å–è¯•å·åˆ—è¡¨å¤±è´¥"),Te.value=[]}finally{vl.value=!1}},eo=async o=>{var e;if(De.value=[],Ne.value=[],Ce.value=[],oe.keyword="",oe.type="",!!o){Gl.value=!0;try{const s=await V.getPaperDetail(o),v=[];(e=s.data)!=null&&e.questions&&s.data.questions.forEach((n,i)=>{v.push({...n,exercise_number:n.exercise_number||i+1,question_id:n.question_id||n.id})}),De.value=v,Ne.value=v}catch(s){console.error("è·å–è¯•å·é¢˜ç›®å¤±è´¥:",s),d.error("è·å–è¯•å·é¢˜ç›®å¤±è´¥")}finally{Gl.value=!1}}},Ma=()=>{let o=De.value;if(oe.keyword){const e=oe.keyword.toLowerCase();o=o.filter(s=>(s.stem||"").toLowerCase().includes(e))}oe.type&&(o=o.filter(e=>e.exercise_type_name===oe.type)),Ne.value=o},lo=o=>{Ce.value=o},ao=async()=>{var o;if(Ce.value.length===0){d.warning("è¯·é€‰æ‹©è¦æ·»åŠ çš„é¢˜ç›®");return}try{const e=Ce.value.map(s=>s.question_id||s.id).filter(Boolean);await V.addQuestionsToChapterSet(we.value.id,{questionIds:e,remark:`ä»è¯•å·ã€Š${((o=Te.value.find(s=>s.id===ke.selectedPaper))==null?void 0:o.title)||"æœªçŸ¥è¯•å·"}ã€‹æ·»åŠ `}),d.success(`æˆåŠŸæ·»åŠ  ${e.length} é“é¢˜ç›®`),Ce.value=[],el(),W.major_id&&Z(W.major_id)}catch(e){console.error("æ·»åŠ é¢˜ç›®å¤±è´¥:",e),d.error("æ·»åŠ é¢˜ç›®å¤±è´¥")}};Wa(()=>{var o;return(o=m.value)==null?void 0:o.major_id},o=>{o&&(Z(o),sl.value=[],m.value&&(m.value.section_id=""))});const _l=async()=>{A.value=!0;try{const o=await V.getComputerFeedbacks(fe);ue.value=o.data.list||[]}catch(o){console.error("è·å–çº é”™å¤±è´¥:",o)}finally{A.value=!1}},Aa=async()=>{U.value=!0;try{const o=await V.getComputerWrongBookStats();X.value=o.data||[]}catch(o){console.error("è·å–é”™é¢˜ç»Ÿè®¡å¤±è´¥:",o)}finally{U.value=!1}},Al=o=>{if(!o.total_attempts)return 0;const e=(o.total_attempts-o.master_count)/o.total_attempts*100;return Math.round(e*10)/10},to=o=>{$e.value=o,Pe.value="",zl(o.QuestionID)},ee=async()=>{j.value=!0;try{const o={...H,size:H.pageSize},e=await V.searchComputerQuestions(o);bl.value=e.data.questions||e.data.list||[],ma.value=e.data.total||0}catch(o){console.error("æœç´¢é¢˜ç›®å¤±è´¥:",o)}finally{j.value=!1}},oo=()=>{F.major_ids=H.major_id?[H.major_id]:[],F.noMajorOnly=!1,F.includeOptions=!0,F.includeSubs=!0,tl.value=!0},no=async()=>{if(F.major_ids.length===0&&!F.noMajorOnly){d.warning('è¯·é€‰æ‹©ç§‘ç›®æˆ–å‹¾é€‰"ä»…å¯¼å‡ºæ²¡æœ‰ç§‘ç›®çš„é¢˜ç›®"');return}hl.value=!0;try{let o=[];if(F.noMajorOnly){const h={noTags:"true",noMajor:"true",size:1e4},y=await V.searchComputerQuestions(h),C=y.data.questions||y.data.list||[];o=o.concat(C)}if(F.major_ids.length>0)for(const h of F.major_ids){const y={noTags:"true",major_id:h,size:1e4},C=await V.searchComputerQuestions(y),w=C.data.questions||C.data.list||[];o=o.concat(w)}const e=new Map;if(o.forEach(h=>{e.set(h.question_id,h)}),o=Array.from(e.values()),o.length===0){d.warning("æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ— è€ƒç‚¹é¢˜ç›®"),hl.value=!1;return}const s=o.map(h=>{const y={question_id:h.question_id,stem:h.stem,exercise_type_name:h.exercise_type_name,answer:h.answer,analysis:h.analysis,major_name:h.major_name,chapter_name:h.chapter_name,year:h.year,knowledgeTags:[]};return F.includeOptions&&h.options&&h.options.length>0&&(y.options=h.options.map(C=>({key:C.option_key,value:C.option_value}))),F.includeSubs&&h.subs&&h.subs.length>0&&(y.sub_questions=h.subs.map(C=>({order:C.question_order,stem:C.sub_stem,answer:C.sub_answer,analysis:C.sub_analysis}))),y}),v=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),n=URL.createObjectURL(v),i=document.createElement("a");i.href=n;let S="æ— è€ƒç‚¹é¢˜ç›®";if(F.noMajorOnly&&(S+="_æ— ç§‘ç›®"),F.major_ids.length>0)if(F.major_ids.length===1){const h=le.value.find(y=>String(y.id)===String(F.major_ids[0]));S+=`_${h?h.name:F.major_ids[0]}`}else S+=`_ç­‰${F.major_ids.length}ä¸ªç§‘ç›®`;S+=`_${new Date().toISOString().split("T")[0]}.json`,i.download=S,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),d.success(`æˆåŠŸå¯¼å‡º ${s.length} é“æ— è€ƒç‚¹é¢˜ç›®`),tl.value=!1}catch(o){console.error("å¯¼å‡ºå¤±è´¥:",o),d.error("å¯¼å‡ºå¤±è´¥: "+(o.message||"æœªçŸ¥é”™è¯¯"))}finally{hl.value=!1}},so=()=>{_e.major_id=H.major_id||"",_e.jsonData="",al.value=!0},ro=async()=>{var e;if(!_e.jsonData.trim()){d.warning("è¯·è¾“å…¥JSONæ•°æ®");return}let o;try{if(o=JSON.parse(_e.jsonData),!Array.isArray(o))throw new Error("JSONæ•°æ®å¿…é¡»æ˜¯æ•°ç»„æ ¼å¼")}catch(s){d.error("JSONæ ¼å¼é”™è¯¯: "+s.message);return}Nl.value=!0;try{const s=await V.batchAddTagsToQuestions({major_id:_e.major_id,data:o});s.code===0?(d.success(`æˆåŠŸä¸º ${((e=s.data)==null?void 0:e.successCount)||0} é“é¢˜ç›®æ·»åŠ è€ƒç‚¹`),al.value=!1,ee()):d.error(s.message||"æ·»åŠ å¤±è´¥")}catch(s){console.error("æ‰¹é‡æ·»åŠ è€ƒç‚¹å¤±è´¥:",s),d.error("æ‰¹é‡æ·»åŠ è€ƒç‚¹å¤±è´¥: "+(s.message||"æœªçŸ¥é”™è¯¯"))}finally{Nl.value=!1}},zl=async o=>{var e,s;try{await fl();const v=await V.getComputerQuestionDetail(o);if(m.value=v.data,console.log("é¢˜ç›®è¯¦æƒ…:",m.value),console.log("ç§‘ç›®ID:",m.value.major_id),console.log("ç§‘ç›®åˆ—è¡¨:",le.value),typeof m.value.options=="string")try{m.value.options=JSON.parse(m.value.options)}catch{m.value.options=[]}if(m.value.major_id&&(await Z(m.value.major_id),console.log("ç« èŠ‚åˆ—è¡¨:",Se.value),m.value.chapter_id))try{const i=((e=(await V.getComputerTags({chapterId:m.value.chapter_id,pageSize:1e3})).data)==null?void 0:e.list)||[];sl.value=i.filter(y=>y.tag_name&&!/^\d+$/.test(y.tag_name)),console.log("è€ƒç‚¹åˆ—è¡¨ï¼ˆä½œä¸ºå°èŠ‚ï¼‰:",sl.value);const h=(m.value.tags||[]).find(y=>sl.value.some(C=>String(C.tag_id)===String(y.tag_id)));h?Fl.value=String(h.tag_id):Fl.value=""}catch(n){console.error("åŠ è½½è€ƒç‚¹å¤±è´¥:",n),sl.value=[],Fl.value=""}if(m.value.tags&&m.value.tags.length>0){const n=m.value.tags.filter(i=>i.tag_id&&!Ll.value[i.tag_id]).map(i=>i.tag_id);if(n.length>0)try{(((s=(await V.getComputerTags({keyword:n.join(","),pageSize:n.length})).data)==null?void 0:s.list)||[]).forEach(h=>{const y=[];h.major_name&&y.push(h.major_name),h.parent_chapter_name&&y.push(h.parent_chapter_name),h.chapter_name&&y.push(h.chapter_name),y.length>0?Ll.value[h.tag_id]=y.join(" > "):Ll.value[h.tag_id]="æœªåˆ†é…ç« èŠ‚"})}catch(i){console.error("æ‰¹é‡åŠ è½½è€ƒç‚¹ç« èŠ‚ä¿¡æ¯å¤±è´¥:",i)}}et.value=Yl(m.value.stem_richtext),lt.value=Yl(m.value.answer_richtext),at.value=Yl(m.value.analysis),await ra(),rl.value=!0}catch(v){console.error("è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥:",v),d.error("è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥")}},uo=o=>{const e={1:"å•é€‰é¢˜",2:"å¤šé€‰é¢˜",3:"å¡«ç©ºé¢˜",4:"è§£ç­”é¢˜",5:"åˆ¤æ–­é¢˜"};m.value&&(m.value.exercise_type_name=e[o]||"")},io=o=>{m.value&&(m.value.chapter_id=""),Z(o)},po=async()=>{if(m.value){El.value=!0;try{const o={...m.value,knowledgeTags:(m.value.tags||[]).map(e=>e.tag_name).filter(Boolean)};await V.updateComputerQuestion(m.value.question_id,o),$e.value&&(await V.updateComputerFeedbackStatus($e.value.id,{status:2,admin_remark:Pe.value}),$e.value=null,_l()),d.success("ä¿å­˜æˆåŠŸ"),rl.value=!1,ee()}catch(o){console.error("ä¿å­˜å¤±è´¥:",o),d.error("ä¿å­˜å¤±è´¥")}finally{El.value=!1}}},mo=o=>{xe.confirm("ç¡®å®šè¦åˆ é™¤è¿™é“é¢˜å—ï¼Ÿ","è­¦å‘Š",{type:"error"}).then(async()=>{try{await V.deleteComputerQuestion(o),d.success("åˆ é™¤æˆåŠŸ"),ee()}catch(e){console.error("åˆ é™¤å¤±è´¥:",e)}})},co=()=>{m.value.options||(m.value.options=[]);const o=String.fromCharCode(65+m.value.options.length);m.value.options.push({option_key:o,option_value:""})},vo=o=>{m.value.options&&(m.value.options.splice(o,1),m.value.options.forEach((e,s)=>{e.option_key=String.fromCharCode(65+s)}))},za=async(o,e)=>{var y,C;if(!o||!o.chapter_id)return!1;const v=(await V.getChapterById(o.chapter_id)).data;if(!v)return!1;const n=m.value.major_id,i=m.value.chapter_id,S=String(v.major_id),h=String(v.chapter_id);if(!n&&!i)return m.value.major_id=S,await Z(S),m.value.chapter_id=h,d.success(`å·²è‡ªåŠ¨å…³è”ç§‘ç›®å’Œç« èŠ‚ï¼š${v.chapter_name}`),!0;if(n!==S||i!==h){const w=((y=le.value.find(T=>String(T.id)===String(n)))==null?void 0:y.name)||n||"æ— ",x=((C=Se.value.find(T=>String(T.chapter_id)===String(i)))==null?void 0:C.chapter_name)||i||"æ— ";try{await xe.confirm(`è€ƒç‚¹çš„æ‰€å±ä¿¡æ¯ä¸æ‚¨å½“å‰è®¾ç½®ä¸ä¸€è‡´ï¼š

å½“å‰ï¼š${w} / ${x}
è€ƒç‚¹ï¼š${v.subject_name||S} / ${v.chapter_name}

æ˜¯å¦æ›´æ–°ä¸ºè€ƒç‚¹çš„æ‰€å±ç§‘ç›®å’Œç« èŠ‚ï¼Ÿ`,"ç§‘ç›®ç« èŠ‚ä¸ä¸€è‡´",{confirmButtonText:"æ›´æ–°",cancelButtonText:"ä¿æŒå½“å‰",type:"warning",dangerouslyUseHTMLString:!1}),m.value.major_id=S,await Z(S),m.value.chapter_id=h,d.success(`å·²æ›´æ–°ä¸ºï¼š${v.chapter_name}`)}catch{d.info("ä¿æŒå½“å‰ç§‘ç›®ç« èŠ‚è®¾ç½®")}}return!0},fo=()=>{R.major_id=m.value.major_id||"",R.chapter_id=m.value.chapter_id||"",R.tag_id="",nl.value=[],Ue.value=[],R.major_id&&Oa(R.major_id),R.chapter_id&&Da(R.chapter_id),ol.value=!0},_o=async o=>{R.chapter_id="",R.tag_id="",nl.value=[],Ue.value=[],o&&await Oa(o)},go=async o=>{R.tag_id="",Ue.value=[],o&&await Da(o)},Oa=async o=>{var e;try{const s=await V.getComputerChapters({majorId:o});console.log("è·å–ç« èŠ‚åˆ—è¡¨å®Œæ•´å“åº”:",s);const v=((e=s.data)==null?void 0:e.data)||s.data||[],n=Array.isArray(v)?v:v.chapters||[];console.log("è§£æåçš„ç« èŠ‚åˆ—è¡¨:",n),nl.value=n.map(i=>({id:i.id||i.chapter_id,name:i.name||i.chapter_name||"æœªå‘½åç« èŠ‚"}))}catch(s){console.error("è·å–ç« èŠ‚åˆ—è¡¨å¤±è´¥:",s),nl.value=[]}},Da=async o=>{var e;try{const s=await V.getComputerTags({chapterId:o,pageSize:1e3});console.log("è·å–è€ƒç‚¹åˆ—è¡¨å®Œæ•´å“åº”:",s);const v=((e=s.data)==null?void 0:e.data)||s.data||{},n=v.list||v||[];console.log("è§£æåçš„è€ƒç‚¹åˆ—è¡¨:",n),Ue.value=n.map(i=>({tag_id:i.tag_id||i.id,tag_name:i.tag_name||i.name||"æœªå‘½åè€ƒç‚¹"}))}catch(s){console.error("è·å–è€ƒç‚¹åˆ—è¡¨å¤±è´¥:",s),Ue.value=[]}},yo=async()=>{const o=R.tag_id;if(!o)return;const e=Ue.value.find(v=>String(v.tag_id)===String(o));if(!e){d.error("æœªæ‰¾åˆ°é€‰æ‹©çš„è€ƒç‚¹");return}if(m.value.tags||(m.value.tags=[]),m.value.tags.some(v=>String(v.tag_id)===String(o))){d.warning("è¯¥è€ƒç‚¹å·²å­˜åœ¨");return}await za(e,e.tag_name),m.value.tags.push({tag_id:e.tag_id,tag_name:e.tag_name}),d.success("æ·»åŠ æˆåŠŸ"),ol.value=!1},bo=async()=>{xe.prompt("è¯·è¾“å…¥çŸ¥è¯†ç‚¹æ ‡ç­¾åç§°æˆ–ID","æ·»åŠ æ ‡ç­¾",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",inputValidator:o=>!o||o.trim()===""?"æ ‡ç­¾åç§°æˆ–IDä¸èƒ½ä¸ºç©º":!0}).then(async({value:o})=>{const e=o.trim();try{let s=null;if(/^\d+$/.test(e))try{const n=await V.getKnowledgeTagById(e);n.data&&(s=n.data)}catch{}if(!s){const n=await V.getKnowledgeTagByName(e);n.data&&(s=n.data)}if(s&&await za(s,s.tag_name||e),m.value.tags||(m.value.tags=[]),m.value.tags.some(n=>(typeof n=="string"?n:n.tag_name)===((s==null?void 0:s.tag_name)||e))){d.warning("è¯¥æ ‡ç­¾å·²å­˜åœ¨");return}m.value.tags.push({tag_id:s==null?void 0:s.tag_id,tag_name:(s==null?void 0:s.tag_name)||e}),d.success("æ·»åŠ æˆåŠŸ")}catch(s){console.error("æ·»åŠ æ ‡ç­¾å¤±è´¥:",s),m.value.tags||(m.value.tags=[]),m.value.tags.push({tag_name:e}),d.success("æ·»åŠ æˆåŠŸï¼ˆæœªæ‰¾åˆ°å¯¹åº”è€ƒç‚¹ä¿¡æ¯ï¼‰")}}).catch(()=>{})},ho=o=>{m.value.tags&&m.value.tags.splice(o,1)},wo=()=>{m.value.subs||(m.value.subs=[]),m.value.subs.push({stem:"",answer:"",analysis:"",score:""})},ko=o=>{m.value.subs&&m.value.subs.splice(o,1)},Co=o=>{if(se.value.some(s=>s.name===o.name)){d.warning(`æ–‡ä»¶ ${o.name} å·²å­˜åœ¨`);return}const e=new FileReader;e.onload=s=>{try{const v=JSON.parse(s.target.result);Array.isArray(v)?(se.value.push({name:o.name,data:v,raw:o.raw}),d.success(`æˆåŠŸåŠ è½½ ${o.name}ï¼ŒåŒ…å« ${v.length} é“é¢˜ç›®`),Na()):d.error(`æ–‡ä»¶ ${o.name} æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ›æ•°ç»„`)}catch(v){console.error("è§£æ JSON å¤±è´¥:",v),d.error(`è§£æ ${o.name} å¤±è´¥: ${v.message}`)}},e.readAsText(o.raw)},Na=()=>{const o=se.value.flatMap(s=>s.data||[]),e=new Map;o.forEach(s=>{const v=`${s.fromSchool}-${s.examTime}-${s.examCode}-${s.examFullName}`;e.has(v)||e.set(v,{title:s.examFullName||"æœªå‘½åè¯•å·",school:s.fromSchool||"æœªçŸ¥",year:s.examTime||"æœªçŸ¥",questions:[]}),e.get(v).questions.push(s)}),Ze.value=Array.from(e.values())},Vo=o=>{se.value.splice(o,1),Na(),se.value.length===0&&(Ze.value=[])},Fa=()=>{se.value=[],Ze.value=[],Tl.value=1,jl.value=1},xo=async()=>{var e,s,v;if(se.value.length===0){d.warning("è¯·å…ˆä¸Šä¼ è¯•å·æ–‡ä»¶");return}const o=se.value.flatMap(n=>n.data||[]);if(o.length===0){d.warning("æ²¡æœ‰è¦å¯¼å…¥çš„é¢˜ç›®");return}B.value=!0;try{const n=await V.importComputerPaper({questions:o,paperInfo:{paperType:Tl.value,tagParseMode:jl.value}});d.success(((e=n.data)==null?void 0:e.message)||`æˆåŠŸå¯¼å…¥ ${o.length} é“é¢˜ç›®`),Fa()}catch(n){console.error("å¯¼å…¥å¤±è´¥:",n),d.error("å¯¼å…¥å¤±è´¥: "+(((v=(s=n.response)==null?void 0:s.data)==null?void 0:v.message)||n.message))}finally{B.value=!1}},So=()=>{const o=[{exerciseId:"ç¤ºä¾‹ID-001",exerciseType:"å•é€‰é¢˜",stem:"è¿™æ˜¯å•é€‰é¢˜çš„é¢˜å¹²",answer:"A",analysis:"è¿™æ˜¯è§£æå†…å®¹",options:{A:"é€‰é¡¹Aå†…å®¹",B:"é€‰é¡¹Bå†…å®¹",C:"é€‰é¡¹Cå†…å®¹",D:"é€‰é¡¹Då†…å®¹"},majorId:"",chapterId:"",level:3,totalScore:5,knowledgeTags:["æ ‡ç­¾1","æ ‡ç­¾2"],fromSchool:"ç¤ºä¾‹å­¦æ ¡",examTime:"2024",examFullName:"ç¤ºä¾‹è¯•å·"},{exerciseId:"ç¤ºä¾‹ID-002",exerciseType:"å¤šé€‰é¢˜",stem:"è¿™æ˜¯å¤šé€‰é¢˜çš„é¢˜å¹²",answer:"AB",analysis:"è¿™æ˜¯è§£æå†…å®¹",options:{A:"é€‰é¡¹Aå†…å®¹",B:"é€‰é¡¹Bå†…å®¹",C:"é€‰é¡¹Cå†…å®¹",D:"é€‰é¡¹Då†…å®¹"},majorId:"",chapterId:"",level:3,totalScore:5,knowledgeTags:["æ ‡ç­¾1"],fromSchool:"ç¤ºä¾‹å­¦æ ¡",examTime:"2024",examFullName:"ç¤ºä¾‹è¯•å·"},{exerciseId:"ç¤ºä¾‹ID-003",exerciseType:"å¡«ç©ºé¢˜",stem:"è¿™æ˜¯å¡«ç©ºé¢˜é¢˜å¹²ï¼Œæœ‰____ä¸ªç©º",answer:'["ç­”æ¡ˆ1", "ç­”æ¡ˆ2"]',analysis:"è¿™æ˜¯è§£æå†…å®¹",options:[{content:"ç­”æ¡ˆ1"},{content:"ç­”æ¡ˆ2"}],majorId:"",chapterId:"",level:3,totalScore:10,knowledgeTags:["æ ‡ç­¾1"],fromSchool:"ç¤ºä¾‹å­¦æ ¡",examTime:"2024",examFullName:"ç¤ºä¾‹è¯•å·"},{exerciseId:"ç¤ºä¾‹ID-004",exerciseType:"è§£ç­”é¢˜",stem:"è¿™æ˜¯è§£ç­”é¢˜é¢˜å¹²",answer:"è§£ç­”é¢˜ç­”æ¡ˆ",analysis:"è¿™æ˜¯è§£æå†…å®¹",options:[{questionStem:"å°é¢˜1",questionAnswer:"å°é¢˜1ç­”æ¡ˆ",questionAnalysis:"å°é¢˜1è§£æ",questionOrder:1,questionScore:5}],majorId:"",chapterId:"",level:4,totalScore:15,knowledgeTags:["æ ‡ç­¾1"],fromSchool:"ç¤ºä¾‹å­¦æ ¡",examTime:"2024",examFullName:"ç¤ºä¾‹è¯•å·"},{exerciseId:"ç¤ºä¾‹ID-005",exerciseType:"åˆ¤æ–­é¢˜",stem:"è¿™æ˜¯åˆ¤æ–­é¢˜é¢˜å¹²",answer:"æ­£ç¡®",analysis:"è¿™æ˜¯è§£æå†…å®¹",options:{A:"æ­£ç¡®",B:"é”™è¯¯"},majorId:"",chapterId:"",level:2,totalScore:2,knowledgeTags:["æ ‡ç­¾1"],fromSchool:"ç¤ºä¾‹å­¦æ ¡",examTime:"2024",examFullName:"ç¤ºä¾‹è¯•å·"}],e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),v=document.createElement("a");v.href=s,v.download="è®¡ç®—æœºè¯•é¢˜å¯¼å…¥æ¨¡æ¿.json",document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(s),d.success("æ¨¡æ¿ä¸‹è½½æˆåŠŸ")},To=o=>{if(ie.value.some(s=>s.name===o.name)){d.warning(`æ–‡ä»¶ ${o.name} å·²å­˜åœ¨`);return}const e=new FileReader;e.onload=s=>{try{const v=JSON.parse(s.target.result);if(Array.isArray(v)){const n=["å•é€‰é¢˜","å¤šé€‰é¢˜","å¡«ç©ºé¢˜","è§£ç­”é¢˜","åˆ¤æ–­é¢˜"],i=v.filter((S,h)=>!S.exerciseType||!n.includes(S.exerciseType)?(console.warn(`ç¬¬ ${h+1} é“é¢˜é¢˜å‹æ— æ•ˆ:`,S.exerciseType),!0):!S.stem&&!S.exerciseStem?(console.warn(`ç¬¬ ${h+1} é“é¢˜ç¼ºå°‘é¢˜å¹²`),!0):!1);i.length>0&&d.warning(`æ–‡ä»¶ ${o.name} ä¸­æœ‰ ${i.length} é“é¢˜ç›®æ ¼å¼ä¸æ­£ç¡®`),ie.value.push({name:o.name,data:v,raw:o.raw}),d.success(`æˆåŠŸåŠ è½½ ${o.name}ï¼ŒåŒ…å« ${v.length} é“è¯•é¢˜`)}else d.error(`æ–‡ä»¶ ${o.name} æ ¼å¼é”™è¯¯ï¼ŒæœŸæœ›æ•°ç»„`)}catch(v){console.error("è§£æ JSON å¤±è´¥:",v),d.error(`è§£æ ${o.name} å¤±è´¥: ${v.message}`)}},e.readAsText(o.raw)},jo=o=>{ie.value.splice(o,1),d.success("æ–‡ä»¶å·²ç§»é™¤")},La=()=>{ie.value=[],d.success("å·²æ¸…ç©ºæ‰€æœ‰æ–‡ä»¶")},$o=async()=>{var e,s,v,n,i;if(ie.value.length===0){d.warning("æ²¡æœ‰è¦å¯¼å…¥çš„è¯•é¢˜æ–‡ä»¶");return}const o=ie.value.flatMap(S=>S.data||[]);if(o.length===0){d.warning("æ²¡æœ‰è¦å¯¼å…¥çš„è¯•é¢˜");return}Zl.value=!0;try{const S=await V.importComputerQuestions(o);d.success(((e=S.data)==null?void 0:e.message)||`æˆåŠŸå¯¼å…¥ ${((v=(s=S.data)==null?void 0:s.data)==null?void 0:v.successCount)||o.length} é“è¯•é¢˜`),La(),z.value==="questions"&&ee()}catch(S){console.error("å¯¼å…¥è¯•é¢˜å¤±è´¥:",S),d.error("å¯¼å…¥å¤±è´¥: "+(((i=(n=S.response)==null?void 0:n.data)==null?void 0:i.message)||S.message))}finally{Zl.value=!1}};return Wa(z,o=>{o==="corrections"&&_l(),o==="questions"&&ee(),o==="wrong-stats"&&Aa(),o==="subjects-chapters"&&(fl(),ge.value&&Z(ge.value.id)),o==="tags"&&(ja(),de())}),No(()=>{_l(),fl(),ee(),ja()}),(o,e)=>{var qa,Ha;const s=I("el-radio-button"),v=I("el-radio-group"),n=I("el-button"),i=I("el-table-column"),S=I("el-tag"),h=I("el-table"),y=I("el-tab-pane"),C=I("el-icon"),w=I("el-input"),x=I("el-col"),T=I("el-option"),E=I("el-select"),gl=I("el-checkbox"),Ea=I("el-button-group"),ne=I("el-row"),oa=I("el-pagination"),b=I("el-form-item"),ce=I("el-form"),re=I("el-dialog"),Ee=I("el-alert"),Ba=I("el-upload"),Uo=I("el-tooltip"),Ol=I("el-tabs"),na=I("el-progress"),Pa=I("el-rate"),Be=I("el-input-number"),Ja=I("el-divider"),Io=I("el-switch"),Qo=I("View"),Ra=I("el-text"),Mo=I("el-collapse-item"),Ao=I("el-collapse"),zo=I("el-card"),Oo=I("ArrowLeft"),sa=I("el-statistic"),pe=Fo("loading");return p(),g("div",Zo,[l(Ol,{modelValue:z.value,"onUpdate:modelValue":e[34]||(e[34]=a=>z.value=a),type:"border-card"},{default:t(()=>[l(y,{label:"çº é”™åé¦ˆ",name:"corrections"},{default:t(()=>[u("div",Yo,[l(v,{modelValue:fe.status,"onUpdate:modelValue":e[0]||(e[0]=a=>fe.status=a),onChange:_l},{default:t(()=>[l(s,{label:1},{default:t(()=>[...e[116]||(e[116]=[r("å¾…å¤„ç†",-1)])]),_:1}),l(s,{label:2},{default:t(()=>[...e[117]||(e[117]=[r("å·²å¤„ç†",-1)])]),_:1}),l(s,{label:""},{default:t(()=>[...e[118]||(e[118]=[r("å…¨éƒ¨",-1)])]),_:1})]),_:1},8,["modelValue"]),l(n,{class:"ml-10",onClick:_l},{default:t(()=>[...e[119]||(e[119]=[r("åˆ·æ–°",-1)])]),_:1})]),me((p(),$(h,{data:ue.value,border:"",stripe:""},{default:t(()=>[l(i,{prop:"id",label:"ID",width:"80",align:"center"}),l(i,{prop:"Type",label:"ç±»å‹",width:"100",align:"center"}),l(i,{prop:"Content",label:"åé¦ˆå†…å®¹","min-width":"200","show-overflow-tooltip":""}),l(i,{prop:"QuestionID",label:"é¢˜ç›®ID",width:"120",align:"center"}),l(i,{prop:"Status",label:"çŠ¶æ€",width:"100",align:"center"},{default:t(({row:a})=>[l(S,{type:a.Status===2?"success":"danger"},{default:t(()=>[r(k(a.Status===2?"å·²å¤„ç†":"å¾…å¤„ç†"),1)]),_:2},1032,["type"])]),_:1}),l(i,{prop:"CreatedAt",label:"æäº¤æ—¶é—´",width:"160",align:"center"},{default:t(({row:a})=>[r(k(tt(a.CreatedAt)),1)]),_:1}),l(i,{label:"æ“ä½œ",width:"180",align:"center",fixed:"right"},{default:t(({row:a})=>[l(n,{size:"small",type:"primary",onClick:_=>to(a)},{default:t(()=>[...e[120]||(e[120]=[r("å¤„ç†",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",onClick:_=>zl(a.QuestionID)},{default:t(()=>[...e[121]||(e[121]=[r("ç¼–è¾‘é¢˜ç›®",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[pe,A.value]])]),_:1}),l(y,{label:"é¢˜ç›®ç®¡ç†",name:"questions"},{default:t(()=>[u("div",en,[l(ne,{gutter:20,align:"middle"},{default:t(()=>[l(x,{span:6},{default:t(()=>[l(w,{modelValue:H.keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>H.keyword=a),placeholder:"æœç´¢é¢˜ç›®å†…å®¹æˆ–ID...",clearable:"",onKeyup:ua(ee,["enter"])},{append:t(()=>[l(n,{onClick:ee},{default:t(()=>[l(C,null,{default:t(()=>[l(O(ia))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(x,{span:4},{default:t(()=>[l(E,{modelValue:H.major_id,"onUpdate:modelValue":e[2]||(e[2]=a=>H.major_id=a),placeholder:"æ‰€å±ç§‘ç›®",clearable:"",onChange:ee,style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(x,{span:3},{default:t(()=>[l(E,{modelValue:H.type,"onUpdate:modelValue":e[3]||(e[3]=a=>H.type=a),placeholder:"é¢˜å‹",clearable:"",onChange:ee,style:{width:"100%"}},{default:t(()=>[l(T,{label:"å•é€‰é¢˜",value:"å•é€‰é¢˜"}),l(T,{label:"å¤šé€‰é¢˜",value:"å¤šé€‰é¢˜"}),l(T,{label:"å¡«ç©ºé¢˜",value:"å¡«ç©ºé¢˜"}),l(T,{label:"è§£ç­”é¢˜",value:"è§£ç­”é¢˜"}),l(T,{label:"åˆ¤æ–­é¢˜",value:"åˆ¤æ–­é¢˜"})]),_:1},8,["modelValue"])]),_:1}),l(x,{span:2},{default:t(()=>[l(gl,{modelValue:H.noTags,"onUpdate:modelValue":e[4]||(e[4]=a=>H.noTags=a),onChange:ee},{default:t(()=>[...e[122]||(e[122]=[r("æ— è€ƒç‚¹",-1)])]),_:1},8,["modelValue"])]),_:1}),l(x,{span:2},{default:t(()=>[l(gl,{modelValue:H.noMajor,"onUpdate:modelValue":e[5]||(e[5]=a=>H.noMajor=a),onChange:ee},{default:t(()=>[...e[123]||(e[123]=[r("æ— ç§‘ç›®",-1)])]),_:1},8,["modelValue"])]),_:1}),l(x,{span:7,style:{"text-align":"right"}},{default:t(()=>[l(Ea,null,{default:t(()=>[l(n,{type:"primary",onClick:kt},{default:t(()=>[l(C,null,{default:t(()=>[l(O(yl))]),_:1}),e[124]||(e[124]=r("åˆ›å»º ",-1))]),_:1}),l(n,{type:"success",onClick:oo},{default:t(()=>[l(C,null,{default:t(()=>[l(O(Ka))]),_:1}),e[125]||(e[125]=r("å¯¼å‡º ",-1))]),_:1}),l(n,{type:"warning",onClick:so},{default:t(()=>[l(C,null,{default:t(()=>[l(O(Lo))]),_:1}),e[126]||(e[126]=r("åŠ è€ƒç‚¹ ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),me((p(),$(h,{data:bl.value,border:"",stripe:""},{default:t(()=>[l(i,{prop:"question_id",label:"ID",width:"150",align:"center"}),l(i,{prop:"exercise_type_name",label:"é¢˜å‹",width:"100",align:"center"}),l(i,{prop:"stem",label:"é¢˜å¹²æ‘˜è¦","min-width":"300","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{innerHTML:Fe(a.stem)},null,8,ln)]),_:1}),l(i,{prop:"major_name",label:"æ‰€å±ç§‘ç›®",width:"120",align:"center"}),l(i,{label:"æ“ä½œ",width:"150",align:"center",fixed:"right"},{default:t(({row:a})=>[l(n,{size:"small",onClick:_=>zl(a.question_id)},{default:t(()=>[...e[127]||(e[127]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:_=>mo(a.question_id)},{default:t(()=>[...e[128]||(e[128]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[pe,j.value]]),u("div",an,[l(oa,{"current-page":H.page,"onUpdate:currentPage":e[6]||(e[6]=a=>H.page=a),"page-size":H.pageSize,"onUpdate:pageSize":e[7]||(e[7]=a=>H.pageSize=a),total:ma.value,layout:"total, prev, pager, next",onCurrentChange:ee},null,8,["current-page","page-size","total"])])]),_:1}),l(re,{modelValue:ol.value,"onUpdate:modelValue":e[12]||(e[12]=a=>ol.value=a),title:"é€‰æ‹©è€ƒç‚¹",width:"600px","close-on-click-modal":!1},{footer:t(()=>[l(n,{onClick:e[11]||(e[11]=a=>ol.value=!1)},{default:t(()=>[...e[129]||(e[129]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:yo,disabled:!R.tag_id},{default:t(()=>[...e[130]||(e[130]=[r("ç¡®å®š",-1)])]),_:1},8,["disabled"])]),default:t(()=>[l(ce,{"label-width":"80px"},{default:t(()=>[l(b,{label:"é€‰æ‹©ç§‘ç›®"},{default:t(()=>[l(E,{modelValue:R.major_id,"onUpdate:modelValue":e[8]||(e[8]=a=>R.major_id=a),placeholder:"è¯·é€‰æ‹©ç§‘ç›®",clearable:"",style:{width:"100%"},onChange:_o},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"é€‰æ‹©ç« èŠ‚"},{default:t(()=>[l(E,{modelValue:R.chapter_id,"onUpdate:modelValue":e[9]||(e[9]=a=>R.chapter_id=a),placeholder:"è¯·é€‰æ‹©ç« èŠ‚",clearable:"",style:{width:"100%"},onChange:go,disabled:!R.major_id},{default:t(()=>[(p(!0),g(D,null,L(nl.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),l(b,{label:"é€‰æ‹©è€ƒç‚¹"},{default:t(()=>[l(E,{modelValue:R.tag_id,"onUpdate:modelValue":e[10]||(e[10]=a=>R.tag_id=a),placeholder:"è¯·é€‰æ‹©è€ƒç‚¹",clearable:"",style:{width:"100%"},disabled:!R.chapter_id,filterable:""},{default:t(()=>[(p(!0),g(D,null,L(Ue.value,a=>(p(),$(T,{key:a.tag_id,label:a.tag_name||a.tag_id||"æœªå‘½åè€ƒç‚¹",value:String(a.tag_id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:tl.value,"onUpdate:modelValue":e[18]||(e[18]=a=>tl.value=a),title:"å¯¼å‡ºæ— è€ƒç‚¹é¢˜ç›®",width:"550px","close-on-click-modal":!1},{footer:t(()=>[l(n,{onClick:e[17]||(e[17]=a=>tl.value=!1)},{default:t(()=>[...e[135]||(e[135]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:no,loading:hl.value},{default:t(()=>[...e[136]||(e[136]=[r("ç¡®è®¤å¯¼å‡º",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(ce,{model:F,"label-width":"120px"},{default:t(()=>[l(b,{label:"é€‰æ‹©ç§‘ç›®"},{default:t(()=>[l(E,{modelValue:F.major_ids,"onUpdate:modelValue":e[13]||(e[13]=a=>F.major_ids=a),placeholder:"è¯·é€‰æ‹©ç§‘ç›®ï¼ˆå¯å¤šé€‰ï¼Œä¸é€‰åˆ™å¯¼å‡ºæ‰€æœ‰ï¼‰",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[131]||(e[131]=u("div",{class:"form-tip"},"è¯·é€‰æ‹©è¦å¯¼å‡ºæ— è€ƒç‚¹é¢˜ç›®çš„ç§‘ç›®ï¼Œä¸é€‰åˆ™å¯¼å‡ºæ‰€æœ‰ç§‘ç›®",-1))]),_:1}),l(b,null,{default:t(()=>[l(gl,{modelValue:F.noMajorOnly,"onUpdate:modelValue":e[14]||(e[14]=a=>F.noMajorOnly=a)},{default:t(()=>[...e[132]||(e[132]=[r("ä»…å¯¼å‡ºæ²¡æœ‰ç§‘ç›®çš„é¢˜ç›®",-1)])]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"åŒ…å«é¢˜ç›®ç±»å‹"},{default:t(()=>[l(gl,{modelValue:F.includeOptions,"onUpdate:modelValue":e[15]||(e[15]=a=>F.includeOptions=a)},{default:t(()=>[...e[133]||(e[133]=[r("åŒ…å«é€‰æ‹©é¢˜é€‰é¡¹",-1)])]),_:1},8,["modelValue"]),l(gl,{modelValue:F.includeSubs,"onUpdate:modelValue":e[16]||(e[16]=a=>F.includeSubs=a)},{default:t(()=>[...e[134]||(e[134]=[r("åŒ…å«è§£ç­”é¢˜å°é¢˜",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(re,{modelValue:al.value,"onUpdate:modelValue":e[22]||(e[22]=a=>al.value=a),title:"æ‰¹é‡ä¸ºæ— è€ƒç‚¹é¢˜ç›®æ·»åŠ è€ƒç‚¹",width:"800px","close-on-click-modal":!1},{footer:t(()=>[l(n,{onClick:e[21]||(e[21]=a=>al.value=!1)},{default:t(()=>[...e[139]||(e[139]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:ro,loading:Nl.value},{default:t(()=>[...e[140]||(e[140]=[r("ç¡®è®¤æ·»åŠ ",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(ce,{model:_e,"label-width":"120px"},{default:t(()=>[l(b,{label:"é€‰æ‹©ç§‘ç›®"},{default:t(()=>[l(E,{modelValue:_e.major_id,"onUpdate:modelValue":e[19]||(e[19]=a=>_e.major_id=a),placeholder:"è¯·é€‰æ‹©ç§‘ç›®",clearable:"",style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[137]||(e[137]=u("div",{class:"form-tip"},"é€‰æ‹©ç§‘ç›®åï¼Œå°†åªå¤„ç†è¯¥ç§‘ç›®ä¸‹æ²¡æœ‰è€ƒç‚¹çš„é¢˜ç›®",-1))]),_:1}),l(b,{label:"JSONæ•°æ®"},{default:t(()=>[l(w,{modelValue:_e.jsonData,"onUpdate:modelValue":e[20]||(e[20]=a=>_e.jsonData=a),type:"textarea",rows:15,placeholder:`è¯·ç²˜è´´JSONæ•°æ®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
[
  {
    'question_id': 'é¢˜ç›®ID',
    'knowledgeTags': ['è€ƒç‚¹ID1', 'è€ƒç‚¹ID2']
  }
]`},null,8,["modelValue"]),e[138]||(e[138]=u("div",{class:"form-tip"},[u("p",null,"JSONæ ¼å¼è¯´æ˜ï¼š"),u("p",null,"1. question_id: é¢˜ç›®çš„å”¯ä¸€æ ‡è¯†ID"),u("p",null,"2. knowledgeTags: è¦æ·»åŠ çš„è€ƒç‚¹IDæ•°ç»„"),u("p",null,'3. å¯ä»¥é€šè¿‡"å¯¼å‡ºæ— è€ƒç‚¹é¢˜ç›®"åŠŸèƒ½è·å–é¢˜ç›®ID')],-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(y,{label:"å¯¼å…¥è¯•é¢˜",name:"import"},{default:t(()=>[u("div",tn,[l(Ol,{modelValue:J.value,"onUpdate:modelValue":e[25]||(e[25]=a=>J.value=a),type:"border-card"},{default:t(()=>[l(y,{label:"è¯•å·å¯¼å…¥",name:"paper-import"},{default:t(()=>[l(Ee,{title:"è¯•å·å¯¼å…¥è¯´æ˜",type:"info",closable:!1,class:"mb-20"},{default:t(()=>[...e[141]||(e[141]=[u("div",{style:{"line-height":"1.8"}},[u("p",null,"1. æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ª JSON è¯•å·æ–‡ä»¶"),u("p",null,"2. æ¯ä¸ª JSON æ–‡ä»¶åº”åŒ…å«ä¸€ä¸ªé¢˜ç›®æ•°ç»„"),u("p",null,"3. ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®å­¦æ ¡ã€å¹´ä»½ã€è¯•å·ä»£ç åˆ†ç»„è¯†åˆ«ä¸åŒçš„è¯•å·"),u("p",null,"4. å¦‚æœé¢˜ç›®ä¸å­˜åœ¨ä¼šè‡ªåŠ¨å¯¼å…¥ï¼Œå·²å­˜åœ¨çš„é¢˜ç›®ä¼šç›´æ¥å…³è”")],-1)])]),_:1}),l(Ba,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"on-change":Co,"file-list":se.value,accept:".json",multiple:""},{tip:t(()=>[...e[142]||(e[142]=[u("div",{class:"el-upload__tip"}," æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ª JSON è¯•å·æ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶ä¸­çš„é¢˜ç›®å°†åˆå¹¶å¤„ç† ",-1)])]),default:t(()=>[l(C,{class:"el-icon--upload"},{default:t(()=>[l(O(Xa))]),_:1}),e[143]||(e[143]=u("div",{class:"el-upload__text"},[r(" å°†è¯•å· JSON æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),u("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"]),se.value.length>0?(p(),g("div",on,[l(Ee,{title:`å·²åŠ è½½ ${se.value.length} ä¸ªæ–‡ä»¶ï¼Œå…± ${Za.value} é“é¢˜ç›®ï¼Œæ£€æµ‹åˆ° ${Ze.value.length} å¼ è¯•å·`,type:"info",closable:!1,"show-icon":""},null,8,["title"]),u("div",nn,[l(ce,{inline:!0},{default:t(()=>[l(b,{label:"è¯•å·ç±»å‹"},{default:t(()=>[l(v,{modelValue:Tl.value,"onUpdate:modelValue":e[23]||(e[23]=a=>Tl.value=a)},{default:t(()=>[l(s,{label:1},{default:t(()=>[...e[144]||(e[144]=[r("çœŸé¢˜å·",-1)])]),_:1}),l(s,{label:2},{default:t(()=>[...e[145]||(e[145]=[r("æ¨¡æ‹Ÿå·",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"çŸ¥è¯†ç‚¹è§£ææ¨¡å¼"},{default:t(()=>[l(v,{modelValue:jl.value,"onUpdate:modelValue":e[24]||(e[24]=a=>jl.value=a)},{default:t(()=>[l(s,{label:1},{default:t(()=>[...e[146]||(e[146]=[r("æ ‡å‡†æ¨¡å¼",-1)])]),_:1}),l(s,{label:2},{default:t(()=>[...e[147]||(e[147]=[r("è€ƒç‚¹æ¨¡å¼",-1)])]),_:1})]),_:1},8,["modelValue"]),l(Uo,{placement:"top"},{content:t(()=>[...e[148]||(e[148]=[u("div",{style:{"max-width":"300px"}},[u("p",null,[u("b",null,"æ ‡å‡†æ¨¡å¼"),r("ï¼šknowledgeTags[0]=ç§‘ç›®ID, [1]=ç« èŠ‚ID, [3]=è€ƒç‚¹ç»„ID")]),u("p",{style:{"margin-top":"5px"}},[u("b",null,"è€ƒç‚¹æ¨¡å¼"),r("ï¼šknowledgeTagså…¨éƒ¨æ˜¯è€ƒç‚¹ç»„IDï¼Œç³»ç»Ÿè‡ªåŠ¨åæŸ¥ç§‘ç›®å’Œç« èŠ‚")])],-1)])]),default:t(()=>[l(C,{class:"ml-5",style:{cursor:"pointer"}},{default:t(()=>[l(O(Eo))]),_:1})]),_:1})]),_:1})]),_:1})]),u("div",sn,[l(h,{data:se.value,border:"",size:"small"},{default:t(()=>[l(i,{prop:"name",label:"æ–‡ä»¶å","min-width":"200"}),l(i,{label:"é¢˜ç›®æ•°é‡",width:"120",align:"center"},{default:t(({row:a})=>{var _;return[r(k(((_=a.data)==null?void 0:_.length)||0),1)]}),_:1}),l(i,{label:"æ“ä½œ",width:"100",align:"center"},{default:t(({$index:a})=>[l(n,{size:"small",type:"danger",link:"",onClick:_=>Vo(a)},{default:t(()=>[...e[149]||(e[149]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",rn,[l(n,{type:"primary",loading:B.value,onClick:xo},{default:t(()=>[...e[150]||(e[150]=[r("å¼€å§‹å¯¼å…¥è¯•å·",-1)])]),_:1},8,["loading"]),l(n,{onClick:Fa},{default:t(()=>[...e[151]||(e[151]=[r("æ¸…ç©ºæ‰€æœ‰",-1)])]),_:1})]),Ze.value.length>0?(p(),g("div",un,[e[152]||(e[152]=u("h4",null,"æ£€æµ‹åˆ°çš„è¯•å·ï¼š",-1)),l(h,{data:Ze.value,border:"",size:"small"},{default:t(()=>[l(i,{prop:"title",label:"è¯•å·åç§°","min-width":"200"}),l(i,{prop:"school",label:"æ¥æºå­¦æ ¡",width:"150"}),l(i,{prop:"year",label:"å¹´ä»½",width:"100"}),l(i,{label:"é¢˜ç›®æ•°é‡",width:"100",align:"center"},{default:t(({row:a})=>[r(k(a.questions.length),1)]),_:1})]),_:1},8,["data"])])):M("",!0)])):M("",!0)]),_:1}),l(y,{label:"æ‰¹é‡å¯¼å…¥è¯•é¢˜",name:"question-import"},{default:t(()=>[l(Ee,{title:"æ‰¹é‡å¯¼å…¥è¯´æ˜",type:"info",closable:!1,class:"mb-20"},{default:t(()=>[...e[153]||(e[153]=[u("div",{style:{"line-height":"1.8"}},[u("p",null,"1. æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ª JSON æ–‡ä»¶"),u("p",null,"2. æ¯ä¸ª JSON æ–‡ä»¶åº”åŒ…å«ä¸€ä¸ªé¢˜ç›®æ•°ç»„"),u("p",null,"3. é¢˜å‹æ”¯æŒï¼šå•é€‰é¢˜ã€å¤šé€‰é¢˜ã€å¡«ç©ºé¢˜ã€è§£ç­”é¢˜ã€åˆ¤æ–­é¢˜"),u("p",null,"4. å¯ä»¥å…ˆä¸‹è½½æ¨¡æ¿æŸ¥çœ‹æ•°æ®æ ¼å¼")],-1)])]),_:1}),u("div",dn,[l(n,{type:"primary",link:"",onClick:So},{default:t(()=>[l(C,null,{default:t(()=>[l(O(Ka))]),_:1}),e[154]||(e[154]=r(" ä¸‹è½½å¯¼å…¥æ¨¡æ¿ ",-1))]),_:1})]),l(Ba,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"on-change":To,"file-list":ie.value,accept:".json",multiple:""},{tip:t(()=>[...e[155]||(e[155]=[u("div",{class:"el-upload__tip"}," æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ª JSON æ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶ä¸­çš„é¢˜ç›®å°†åˆå¹¶å¯¼å…¥ ",-1)])]),default:t(()=>[l(C,{class:"el-icon--upload"},{default:t(()=>[l(O(Xa))]),_:1}),e[156]||(e[156]=u("div",{class:"el-upload__text"},[r(" å°†è¯•é¢˜ JSON æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),u("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"]),ie.value.length>0?(p(),g("div",pn,[l(Ee,{title:`å·²åŠ è½½ ${ie.value.length} ä¸ªæ–‡ä»¶ï¼Œå…± ${$l.value} é“è¯•é¢˜`,type:"success",closable:!1,"show-icon":""},null,8,["title"]),u("div",mn,[l(h,{data:ie.value,border:"",size:"small"},{default:t(()=>[l(i,{prop:"name",label:"æ–‡ä»¶å","min-width":"200"}),l(i,{label:"é¢˜ç›®æ•°é‡",width:"120",align:"center"},{default:t(({row:a})=>{var _;return[r(k(((_=a.data)==null?void 0:_.length)||0),1)]}),_:1}),l(i,{label:"æ“ä½œ",width:"100",align:"center"},{default:t(({$index:a})=>[l(n,{size:"small",type:"danger",link:"",onClick:_=>jo(a)},{default:t(()=>[...e[157]||(e[157]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",cn,[l(n,{type:"primary",loading:Zl.value,onClick:$o},{default:t(()=>[...e[158]||(e[158]=[r("å¼€å§‹å¯¼å…¥è¯•é¢˜",-1)])]),_:1},8,["loading"]),l(n,{onClick:La},{default:t(()=>[...e[159]||(e[159]=[r("æ¸…ç©ºæ‰€æœ‰",-1)])]),_:1})]),$l.value>0?(p(),g("div",vn,[e[160]||(e[160]=u("h4",null,"è¯•é¢˜é¢„è§ˆï¼ˆå‰5é“ï¼‰ï¼š",-1)),l(h,{data:Ya.value,border:"",size:"small"},{default:t(()=>[l(i,{prop:"exerciseType",label:"é¢˜å‹",width:"100"}),l(i,{prop:"stem",label:"é¢˜å¹²","show-overflow-tooltip":""},{default:t(({row:a})=>[r(k(Fe(a.stem||a.exerciseStem||"")),1)]),_:1}),l(i,{prop:"answer",label:"ç­”æ¡ˆ",width:"150","show-overflow-tooltip":""})]),_:1},8,["data"]),$l.value>5?(p(),g("p",fn," è¿˜æœ‰ "+k($l.value-5)+" é“è¯•é¢˜... ",1)):M("",!0)])):M("",!0)])):M("",!0)]),_:1})]),_:1},8,["modelValue"])])]),_:1}),l(y,{label:"é”™é¢˜ç»Ÿè®¡",name:"wrong-stats"},{default:t(()=>[u("div",_n,[l(n,{type:"primary",onClick:Aa,loading:U.value},{default:t(()=>[...e[161]||(e[161]=[r("åˆ·æ–°ç»Ÿè®¡æ•°æ®",-1)])]),_:1},8,["loading"])]),me((p(),$(h,{data:X.value,border:"",stripe:""},{default:t(()=>[l(i,{prop:"QuestionID",label:"é¢˜ç›®ID",width:"180",align:"center"}),l(i,{prop:"exercise_type_name",label:"é¢˜å‹",width:"100",align:"center"}),l(i,{prop:"stem",label:"é¢˜å¹²å†…å®¹","min-width":"300","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{innerHTML:Fe(a.stem)},null,8,gn)]),_:1}),l(i,{prop:"error_count",label:"é”™è¯¯äººæ•°",width:"100",align:"center",sortable:""}),l(i,{prop:"total_attempts",label:"æ€»ç»ƒä¹ æ¬¡æ•°",width:"120",align:"center",sortable:""}),l(i,{prop:"master_count",label:"å·²æŒæ¡äººæ•°",width:"120",align:"center",sortable:""},{default:t(({row:a})=>[l(S,{type:"success"},{default:t(()=>[r(k(a.master_count),1)]),_:2},1024)]),_:1}),l(i,{label:"é”™è¯¯ç‡",width:"120",align:"center"},{default:t(({row:a})=>[l(na,{percentage:Al(a),status:Al(a)>50?"exception":"warning"},null,8,["percentage","status"])]),_:1}),l(i,{label:"æ“ä½œ",width:"100",align:"center"},{default:t(({row:a})=>[l(n,{size:"small",onClick:_=>zl(a.QuestionID)},{default:t(()=>[...e[162]||(e[162]=[r("æŸ¥çœ‹è¯¦æƒ…",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[pe,U.value]])]),_:1}),l(y,{label:"ç§‘ç›®ç« èŠ‚ç®¡ç†",name:"subjects-chapters"},{default:t(()=>[u("div",yn,[u("div",bn,[u("div",hn,[e[164]||(e[164]=u("span",{class:"header-title"},"ç§‘ç›®åˆ—è¡¨",-1)),l(n,{type:"primary",size:"small",onClick:e[26]||(e[26]=a=>xa())},{default:t(()=>[...e[163]||(e[163]=[r("+ æ–°å»º",-1)])]),_:1})]),me((p(),g("div",wn,[(p(!0),g(D,null,L(le.value,a=>{var _;return p(),g("div",{key:a.id,class:da(["subject-item",{active:((_=ge.value)==null?void 0:_.id)===a.id}]),onClick:Q=>Sa(a)},[u("div",Cn,[u("div",Vn,k(a.name),1),l(S,{type:a.is_on_shelf===1?"success":"info",size:"small",effect:"plain"},{default:t(()=>[r(k(a.is_on_shelf===1?"å·²ä¸Šæ¶":"å·²ä¸‹æ¶"),1)]),_:2},1032,["type"])]),u("div",{class:"subject-actions",onClick:e[27]||(e[27]=ye(()=>{},["stop"]))},[l(n,{link:"",type:"primary",size:"small",onClick:Q=>xa(a)},{default:t(()=>[...e[165]||(e[165]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(n,{link:"",type:a.is_on_shelf===1?"warning":"success",size:"small",onClick:Q=>nt(a)},{default:t(()=>[r(k(a.is_on_shelf===1?"ä¸‹æ¶":"ä¸Šæ¶"),1)]),_:2},1032,["type","onClick"])])],10,kn)}),128))])),[[pe,Bl.value]])]),u("div",xn,[u("div",Sn,[u("div",Tn,[u("span",jn,k(ge.value?ge.value.name:"è¯·é€‰æ‹©ç§‘ç›®"),1),ge.value?(p(),$(S,{key:0,size:"small",type:"info"},{default:t(()=>[r(k(Se.value.length)+" ä¸ªç« èŠ‚",1)]),_:1})):M("",!0)]),l(n,{type:"primary",onClick:e[28]||(e[28]=a=>Ta()),disabled:!ge.value},{default:t(()=>[l(C,null,{default:t(()=>[l(O(yl))]),_:1}),e[166]||(e[166]=r(" æ–°å»ºç« èŠ‚ ",-1))]),_:1},8,["disabled"])]),me((p(),$(h,{data:st.value,border:"",stripe:"","empty-text":ge.value?"æš‚æ— ç« èŠ‚":"è¯·å…ˆé€‰æ‹©å·¦ä¾§ç§‘ç›®",style:{width:"100%"}},{default:t(()=>[l(i,{prop:"name",label:"ç« èŠ‚åç§°",align:"left","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{class:da(["chapter-name-cell",{"has-children":a.hasChildren,"is-expanded":a.isExpanded,"is-section":a.isSection}]),onClick:_=>a.isChapter?rt(a):null},[a.isChapter?(p(),g("div",Un,[a.hasChildren?(p(),$(C,{key:0,class:"expand-icon"},{default:t(()=>[a.isExpanded?(p(),$(O(Bo),{key:1})):(p(),$(O(Ga),{key:0}))]),_:2},1024)):(p(),g("span",In))])):(p(),g("span",Qn)),u("span",{class:"chapter-name",style:Po({paddingLeft:a.level>0?"20px":"0"})},k(a.name),5),a.isChapter&&a.hasLoaded?(p(),$(S,{key:2,size:"small",type:"info",class:"section-count-tag"},{default:t(()=>[r(k(a.sectionCount)+"ä¸ªè€ƒç‚¹ ",1)]),_:2},1024)):M("",!0)],10,$n)]),_:1}),l(i,{prop:"totalQuestions",label:"é¢˜ç›®æ•°é‡",width:"100",align:"center"}),l(i,{label:"æ“ä½œ",width:"360",align:"center",fixed:"right"},{default:t(({row:a})=>[a.isChapter?(p(),g(D,{key:0},[l(n,{size:"small",type:"info",onClick:ye(_=>Et(a),["stop"])},{default:t(()=>[...e[167]||(e[167]=[r("+ åˆ›å»ºè€ƒç‚¹",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"primary",onClick:ye(_=>Dt(a),["stop"])},{default:t(()=>[...e[168]||(e[168]=[r("+ åˆ›å»ºé¢˜ç›®",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"success",onClick:ye(_=>Pt(a),["stop"])},{default:t(()=>[...e[169]||(e[169]=[r("æ·»åŠ é¢˜ç›®",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",onClick:ye(_=>Ta(a),["stop"])},{default:t(()=>[...e[170]||(e[170]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:ye(_=>dt(a.id),["stop"])},{default:t(()=>[...e[171]||(e[171]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])],64)):(p(),g(D,{key:1},[l(n,{size:"small",type:"primary",onClick:ye(_=>Nt(a),["stop"])},{default:t(()=>[...e[172]||(e[172]=[r("+ åˆ›å»ºé¢˜ç›®",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"success",onClick:ye(_=>Ft(a),["stop"])},{default:t(()=>[...e[173]||(e[173]=[r("æ·»åŠ é¢˜ç›®",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",onClick:ye(_=>Lt(a),["stop"])},{default:t(()=>[...e[174]||(e[174]=[r("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:ye(_=>Bt(a),["stop"])},{default:t(()=>[...e[175]||(e[175]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])],64))]),_:1})]),_:1},8,["data","empty-text"])),[[pe,Pl.value]])])])]),_:1}),l(y,{label:"è€ƒç‚¹ç®¡ç†",name:"tags"},{default:t(()=>[u("div",Mn,[l(ne,{gutter:20,align:"middle"},{default:t(()=>[l(x,{span:6},{default:t(()=>[l(E,{modelValue:K.chapterId,"onUpdate:modelValue":e[29]||(e[29]=a=>K.chapterId=a),placeholder:"é€‰æ‹©ç« èŠ‚ç­›é€‰",clearable:"",onChange:de,style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(Qe.value,a=>(p(),$(T,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(x,{span:6},{default:t(()=>[l(w,{modelValue:K.keyword,"onUpdate:modelValue":e[30]||(e[30]=a=>K.keyword=a),placeholder:"æœç´¢è€ƒç‚¹åç§°æˆ–ID...",clearable:"",onKeyup:ua(de,["enter"])},{append:t(()=>[l(n,{onClick:de},{default:t(()=>[l(C,null,{default:t(()=>[l(O(ia))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(x,{span:12,style:{"text-align":"right"}},{default:t(()=>[l(n,{type:"warning",onClick:ft},{default:t(()=>[...e[176]||(e[176]=[r("æŸ¥çœ‹å¾…åˆ†ç±»",-1)])]),_:1}),l(n,{type:"primary",onClick:_t},{default:t(()=>[...e[177]||(e[177]=[r("+ åˆ›å»ºè€ƒç‚¹",-1)])]),_:1}),l(n,{type:"success",onClick:vt},{default:t(()=>[...e[178]||(e[178]=[r("æ ¡å¯¹è€ƒç‚¹åç§°",-1)])]),_:1}),qe.value.length>0?(p(),$(n,{key:0,type:"success",onClick:bt},{default:t(()=>[r(" æ‰¹é‡ç§»åŠ¨("+k(qe.value.length)+") ",1)]),_:1})):M("",!0)]),_:1})]),_:1})]),me((p(),$(h,{data:ca.value,border:"",stripe:"",onSelectionChange:gt,onExpandChange:yt,"row-key":"tag_id"},{default:t(()=>[l(i,{type:"selection",width:"55",align:"center"}),l(i,{type:"expand",width:"50"},{default:t(({row:a})=>[u("div",An,[u("div",zn,[u("span",On,"è¯¥è€ƒç‚¹ä¸‹çš„é¢˜ç›®ï¼ˆå…± "+k((He.value[a.tag_id]||[]).length)+" é¢˜ï¼‰",1),l(n,{size:"small",type:"primary",onClick:_=>Ia(a)},{default:t(()=>[...e[179]||(e[179]=[r("åˆ·æ–°",-1)])]),_:1},8,["onClick"])]),wl.value[a.tag_id]?me((p(),g("div",Dn,[...e[180]||(e[180]=[r("åŠ è½½ä¸­...",-1)])])),[[pe,wl.value[a.tag_id]]]):He.value[a.tag_id]?(He.value[a.tag_id]||[]).length===0?(p(),g("div",Fn," è¯¥è€ƒç‚¹ä¸‹æš‚æ— é¢˜ç›® ")):(p(),g("div",Ln,[(p(!0),g(D,null,L(He.value[a.tag_id],(_,Q)=>(p(),g("div",{key:_.question_id,class:"question-item"},[u("div",En,[u("span",Bn,"é¢˜ç›® "+k(Q+1),1),u("span",Pn,k(_.exercise_type_name),1),u("span",Jn,"ID: "+k(_.question_id),1)]),u("div",Rn,[_.exam_full_name?(p(),g("div",qn,[e[181]||(e[181]=u("span",{class:"meta-label"},"æ¥æºï¼š",-1)),u("span",Hn,k(_.exam_full_name),1)])):M("",!0),_.exam_time?(p(),g("div",Wn,[e[182]||(e[182]=u("span",{class:"meta-label"},"å¹´ä»½ï¼š",-1)),u("span",Kn,k(_.exam_time),1)])):M("",!0),_.chapter_name?(p(),g("div",Xn,[e[183]||(e[183]=u("span",{class:"meta-label"},"ç« èŠ‚ï¼š",-1)),u("span",Gn,k(_.chapter_name),1)])):M("",!0),_.all_tags&&_.all_tags.length>0?(p(),g("div",Zn,[e[184]||(e[184]=u("span",{class:"meta-label"},"è€ƒç‚¹ï¼š",-1)),u("span",Yn,[(p(!0),g(D,null,L(_.all_tags,ll=>(p(),$(S,{key:ll.tag_id,size:"small",class:"tag-item"},{default:t(()=>[r(k(ll.tag_name),1)]),_:2},1024))),128))])])):M("",!0)]),u("div",es,[u("div",{class:"question-stem",innerHTML:_.stem},null,8,ls),_.options&&_.options.length>0?(p(),g("div",as,[(p(!0),g(D,null,L(_.options,ll=>(p(),g("div",{key:ll.option_key,class:"option-line"},[u("span",ts,k(ll.option_key)+".",1),u("span",{class:"option-value",innerHTML:ll.option_value},null,8,os)]))),128))])):M("",!0),_.answer?(p(),g("div",ns,[e[185]||(e[185]=u("strong",null,"ç­”æ¡ˆï¼š",-1)),u("span",{innerHTML:_.answer},null,8,ss)])):M("",!0),_.analysis?(p(),g("div",rs,[e[186]||(e[186]=u("strong",null,"è§£æï¼š",-1)),u("span",{innerHTML:_.analysis},null,8,us)])):M("",!0)])]))),128))])):(p(),g("div",Nn,' ç‚¹å‡»"åˆ·æ–°"åŠ è½½é¢˜ç›® '))])]),_:1}),l(i,{prop:"tag_id",label:"ID",width:"180",align:"center"}),l(i,{prop:"tag_name",label:"åç§°","min-width":"200"},{default:t(({row:a})=>[Rl.value===a.tag_id?(p(),$(w,{key:0,modelValue:Je.value,"onUpdate:modelValue":e[31]||(e[31]=_=>Je.value=_),size:"small",onBlur:_=>Ua(a),onKeyup:ua(_=>Ua(a),["enter"]),ref_key:"tagNameInput",ref:fa},null,8,["modelValue","onBlur","onKeyup"])):(p(),g("span",{key:1,class:da({"unnamed-tag":!a.tag_name||/^\d+$/.test(a.tag_name)}),onDblclick:_=>$a(a)},k(a.tag_name||"(æœªå‘½å)"),43,is))]),_:1}),l(i,{prop:"chapter_name",label:"æ‰€å±ç« èŠ‚",width:"200"}),l(i,{prop:"question_count",label:"é¢˜ç›®æ•°",width:"100",align:"center"}),l(i,{label:"æ“ä½œ",width:"250",align:"center",fixed:"right"},{default:t(({row:a})=>[l(n,{size:"small",type:"primary",onClick:_=>$a(a)},{default:t(()=>[...e[187]||(e[187]=[r("ç¼–è¾‘åç§°",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",onClick:_=>pt(a)},{default:t(()=>[...e[188]||(e[188]=[r("ç§»åŠ¨ç« èŠ‚",-1)])]),_:1},8,["onClick"]),l(n,{size:"small",type:"danger",onClick:_=>ct(a.tag_id)},{default:t(()=>[...e[189]||(e[189]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[pe,Jl.value]]),u("div",ds,[l(oa,{"current-page":K.page,"onUpdate:currentPage":e[32]||(e[32]=a=>K.page=a),"page-size":K.pageSize,"onUpdate:pageSize":e[33]||(e[33]=a=>K.pageSize=a),total:va.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:de,onCurrentChange:de},null,8,["current-page","page-size","total"])])]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:dl.value,"onUpdate:modelValue":e[37]||(e[37]=a=>dl.value=a),title:"ç§»åŠ¨è€ƒç‚¹åˆ°å…¶ä»–ç« èŠ‚",width:"500px"},{footer:t(()=>[l(n,{onClick:e[36]||(e[36]=a=>dl.value=!1)},{default:t(()=>[...e[190]||(e[190]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:mt},{default:t(()=>[...e[191]||(e[191]=[r("ç¡®å®š",-1)])]),_:1})]),default:t(()=>[l(ce,{"label-width":"100px"},{default:t(()=>[l(b,{label:"ç›®æ ‡ç« èŠ‚"},{default:t(()=>[l(E,{modelValue:pl.value,"onUpdate:modelValue":e[35]||(e[35]=a=>pl.value=a),placeholder:"é€‰æ‹©ç›®æ ‡ç« èŠ‚",style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(Qe.value,a=>(p(),$(T,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:ml.value,"onUpdate:modelValue":e[40]||(e[40]=a=>ml.value=a),title:"æ‰¹é‡ç§»åŠ¨è€ƒç‚¹",width:"500px"},{footer:t(()=>[l(n,{onClick:e[39]||(e[39]=a=>ml.value=!1)},{default:t(()=>[...e[192]||(e[192]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:ht},{default:t(()=>[...e[193]||(e[193]=[r("ç¡®å®šç§»åŠ¨",-1)])]),_:1})]),default:t(()=>[u("p",ps,"å·²é€‰æ‹© "+k(qe.value.length)+" ä¸ªè€ƒç‚¹",1),l(ce,{"label-width":"100px"},{default:t(()=>[l(b,{label:"ç›®æ ‡ç« èŠ‚"},{default:t(()=>[l(E,{modelValue:o.batchTargetChapterId,"onUpdate:modelValue":e[38]||(e[38]=a=>o.batchTargetChapterId=a),placeholder:"é€‰æ‹©ç›®æ ‡ç« èŠ‚",style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(Qe.value,a=>(p(),$(T,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:Re.value,"onUpdate:modelValue":e[44]||(e[44]=a=>Re.value=a),title:"åˆ›å»ºæ–°è€ƒç‚¹",width:"500px"},{footer:t(()=>[l(n,{onClick:e[43]||(e[43]=a=>Re.value=!1)},{default:t(()=>[...e[194]||(e[194]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:wt},{default:t(()=>[...e[195]||(e[195]=[r("ç¡®å®š",-1)])]),_:1})]),default:t(()=>[l(ce,{"label-width":"100px"},{default:t(()=>[l(b,{label:"è€ƒç‚¹åç§°"},{default:t(()=>[l(w,{modelValue:ae.name,"onUpdate:modelValue":e[41]||(e[41]=a=>ae.name=a),placeholder:"è¯·è¾“å…¥è€ƒç‚¹åç§°"},null,8,["modelValue"])]),_:1}),l(b,{label:"æ‰€å±ç« èŠ‚"},{default:t(()=>[l(E,{modelValue:ae.chapterId,"onUpdate:modelValue":e[42]||(e[42]=a=>ae.chapterId=a),placeholder:"é€‰æ‹©æ‰€å±ç« èŠ‚",style:{width:"100%"},disabled:!!cl.value},{default:t(()=>[(p(!0),g(D,null,L(Qe.value,a=>(p(),$(T,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:rl.value,"onUpdate:modelValue":e[62]||(e[62]=a=>rl.value=a),title:"ç¼–è¾‘é¢˜ç›®",width:"1000px",top:"3vh","destroy-on-close":"",class:"question-edit-dialog"},{footer:t(()=>[l(n,{onClick:e[61]||(e[61]=a=>rl.value=!1)},{default:t(()=>[...e[204]||(e[204]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:po,loading:El.value},{default:t(()=>[...e[205]||(e[205]=[r("ä¿å­˜ä¿®æ”¹",-1)])]),_:1},8,["loading"])]),default:t(()=>[m.value?(p(),$(ce,{key:0,model:m.value,"label-width":"100px",class:"question-edit-form"},{default:t(()=>[l(ne,{gutter:20},{default:t(()=>[l(x,{span:8},{default:t(()=>[l(b,{label:"é¢˜å‹"},{default:t(()=>[l(E,{modelValue:m.value.exercise_type,"onUpdate:modelValue":e[45]||(e[45]=a=>m.value.exercise_type=a),style:{width:"100%"},onChange:uo},{default:t(()=>[l(T,{label:"å•é€‰é¢˜",value:1}),l(T,{label:"å¤šé€‰é¢˜",value:2}),l(T,{label:"å¡«ç©ºé¢˜",value:3}),l(T,{label:"è§£ç­”é¢˜",value:4}),l(T,{label:"åˆ¤æ–­é¢˜",value:5})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{span:8},{default:t(()=>[l(b,{label:"éš¾åº¦"},{default:t(()=>[l(Pa,{modelValue:m.value.level,"onUpdate:modelValue":e[46]||(e[46]=a=>m.value.level=a),max:5},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:8},{default:t(()=>[l(b,{label:"åˆ†å€¼"},{default:t(()=>[l(Be,{modelValue:m.value.total_score,"onUpdate:modelValue":e[47]||(e[47]=a=>m.value.total_score=a),min:0,max:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ne,{gutter:20},{default:t(()=>[l(x,{span:6},{default:t(()=>[l(b,{label:"æ‰€å±ç§‘ç›®"},{default:t(()=>[l(E,{modelValue:m.value.major_id,"onUpdate:modelValue":e[48]||(e[48]=a=>m.value.major_id=a),style:{width:"100%"},placeholder:"è¯·é€‰æ‹©ç§‘ç›®",onChange:io},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(b,{label:"æ‰€å±ç« èŠ‚"},{default:t(()=>[u("div",ms,[l(E,{modelValue:m.value.chapter_id,"onUpdate:modelValue":e[49]||(e[49]=a=>m.value.chapter_id=a),style:{flex:"1","min-width":"200px"},placeholder:"è¯·é€‰æ‹©ç« èŠ‚"},{default:t(()=>[(p(!0),g(D,null,L(Se.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(x,{span:6},{default:t(()=>[l(b,{label:"é¢˜å·"},{default:t(()=>[l(Be,{modelValue:m.value.exercise_number,"onUpdate:modelValue":e[50]||(e[50]=a=>m.value.exercise_number=a),min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ne,{gutter:20},{default:t(()=>[l(x,{span:8},{default:t(()=>[l(b,{label:"è€ƒè¯•å¹´ä»½"},{default:t(()=>[l(w,{modelValue:m.value.exam_time,"onUpdate:modelValue":e[51]||(e[51]=a=>m.value.exam_time=a),placeholder:"å¦‚ï¼š2025å¹´"},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:8},{default:t(()=>[l(b,{label:"å­¦æ ¡/æ¥æº"},{default:t(()=>[l(w,{modelValue:m.value.from_school,"onUpdate:modelValue":e[52]||(e[52]=a=>m.value.from_school=a),placeholder:"å¦‚ï¼šå…¨å›½ç»Ÿè€ƒ"},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:8},{default:t(()=>[l(b,{label:"ç§‘ç›®ä»£ç "},{default:t(()=>[l(w,{modelValue:m.value.exam_code,"onUpdate:modelValue":e[53]||(e[53]=a=>m.value.exam_code=a),placeholder:"å¦‚ï¼š408"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(b,{label:"çŸ¥è¯†ç‚¹æ ‡ç­¾"},{default:t(()=>[u("div",cs,[(p(!0),g(D,null,L(m.value.tags||[],(a,_)=>(p(),$(S,{key:_,closable:"",onClose:Q=>ho(_),class:"tag-item"},{default:t(()=>[r(k(a.tag_name||a),1)]),_:2},1032,["onClose"]))),128)),l(Ea,null,{default:t(()=>[l(n,{type:"primary",link:"",size:"small",onClick:fo},{default:t(()=>[l(C,null,{default:t(()=>[l(O(ia))]),_:1}),e[196]||(e[196]=r(" ä»è€ƒç‚¹é€‰æ‹© ",-1))]),_:1}),l(n,{type:"success",link:"",size:"small",onClick:bo},{default:t(()=>[l(C,null,{default:t(()=>[l(O(yl))]),_:1}),e[197]||(e[197]=r(" è¾“å…¥æ·»åŠ  ",-1))]),_:1})]),_:1})])]),_:1}),l(b,{label:"é¢˜å¹²",class:"form-item-stem"},{default:t(()=>[u("div",vs,[l(be,{modelValue:m.value.stem,"onUpdate:modelValue":e[54]||(e[54]=a=>m.value.stem=a),placeholder:"è¯·è¾“å…¥é¢˜å¹²",height:120},null,8,["modelValue"])])]),_:1}),m.value.exercise_type===1||m.value.exercise_type===2||m.value.exercise_type===5?(p(),$(b,{key:0,label:"é€‰é¡¹",class:"form-item-options"},{default:t(()=>[u("div",fs,[(p(!0),g(D,null,L(m.value.options,(a,_)=>(p(),g("div",{key:_,class:"option-edit-row"},[l(w,{modelValue:a.option_key,"onUpdate:modelValue":Q=>a.option_key=Q,style:{width:"50px"},placeholder:"é€‰é¡¹",size:"small"},null,8,["modelValue","onUpdate:modelValue"]),u("div",_s,[l(be,{modelValue:a.option_value,"onUpdate:modelValue":Q=>a.option_value=Q,placeholder:"é€‰é¡¹å†…å®¹",height:80},null,8,["modelValue","onUpdate:modelValue"])]),l(n,{type:"danger",size:"small",onClick:Q=>vo(_)},{default:t(()=>[...e[198]||(e[198]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]))),128))]),l(n,{type:"primary",size:"small",onClick:co,class:"add-option-btn"},{default:t(()=>[l(C,null,{default:t(()=>[l(O(yl))]),_:1}),e[199]||(e[199]=r(" æ·»åŠ é€‰é¡¹ ",-1))]),_:1})]),_:1})):M("",!0),m.value.exercise_type===4?(p(),$(b,{key:1,label:"å°é¢˜åˆ—è¡¨"},{default:t(()=>[u("div",gs,[(p(!0),g(D,null,L(m.value.subs||[],(a,_)=>(p(),g("div",{key:_,class:"sub-item-editor"},[u("div",ys,[u("span",bs,"å°é¢˜ "+k(_+1),1),l(w,{modelValue:a.score,"onUpdate:modelValue":Q=>a.score=Q,placeholder:"åˆ†å€¼",style:{width:"80px"},size:"small"},{append:t(()=>[...e[200]||(e[200]=[r("åˆ†",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"]),l(n,{type:"danger",size:"small",onClick:Q=>ko(_)},{default:t(()=>[...e[201]||(e[201]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),u("div",hs,[l(b,{label:"å°é¢˜é¢˜å¹²"},{default:t(()=>[l(be,{modelValue:a.stem,"onUpdate:modelValue":Q=>a.stem=Q,placeholder:"è¯·è¾“å…¥å°é¢˜é¢˜å¹²",height:80},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(b,{label:"å°é¢˜ç­”æ¡ˆ"},{default:t(()=>[l(be,{modelValue:a.answer,"onUpdate:modelValue":Q=>a.answer=Q,placeholder:"è¯·è¾“å…¥å°é¢˜ç­”æ¡ˆ",height:80},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(b,{label:"å°é¢˜è§£æ"},{default:t(()=>[l(be,{modelValue:a.analysis,"onUpdate:modelValue":Q=>a.analysis=Q,placeholder:"è¯·è¾“å…¥å°é¢˜è§£æ",height:80},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]))),128))]),l(n,{type:"primary",size:"small",onClick:wo,class:"mt-10"},{default:t(()=>[l(C,null,{default:t(()=>[l(O(yl))]),_:1}),e[202]||(e[202]=r(" æ·»åŠ å°é¢˜ ",-1))]),_:1})]),_:1})):M("",!0),l(b,{label:"ç­”æ¡ˆ",class:"form-item-answer"},{default:t(()=>[u("div",ws,[l(be,{modelValue:m.value.answer,"onUpdate:modelValue":e[55]||(e[55]=a=>m.value.answer=a),placeholder:"è¯·è¾“å…¥ç­”æ¡ˆ",height:100},null,8,["modelValue"])])]),_:1}),l(b,{label:"è§£æ",class:"form-item-analysis"},{default:t(()=>[u("div",ks,[l(be,{modelValue:m.value.analysis,"onUpdate:modelValue":e[56]||(e[56]=a=>m.value.analysis=a),placeholder:"è¯·è¾“å…¥è§£æ",height:120},null,8,["modelValue"])])]),_:1}),l(b,{label:"è¯•å·åˆ†å€¼",class:"form-item-score"},{default:t(()=>[l(Be,{modelValue:m.value.paper_score,"onUpdate:modelValue":e[57]||(e[57]=a=>m.value.paper_score=a),min:0,max:100},null,8,["modelValue"])]),_:1}),l(b,{label:"è€ƒè¯•å…¨ç§°"},{default:t(()=>[l(w,{modelValue:m.value.exam_full_name,"onUpdate:modelValue":e[58]||(e[58]=a=>m.value.exam_full_name=a),placeholder:"å¦‚ï¼šè®¡ç®—æœºå­¦ç§‘åŸºç¡€ç»¼åˆ"},null,8,["modelValue"])]),_:1}),l(b,{label:"è§†é¢‘URL"},{default:t(()=>[l(w,{modelValue:m.value.video_url,"onUpdate:modelValue":e[59]||(e[59]=a=>m.value.video_url=a),placeholder:"è¯·è¾“å…¥è§†é¢‘é“¾æ¥ï¼ˆå¦‚æœ‰ï¼‰"},null,8,["modelValue"])]),_:1}),$e.value?(p(),g("div",Cs,[l(Ja,{"content-position":"left"},{default:t(()=>[...e[203]||(e[203]=[r("çº é”™å¤„ç†",-1)])]),_:1}),l(b,{label:"ç®¡ç†å‘˜å¤‡æ³¨"},{default:t(()=>[l(w,{modelValue:Pe.value,"onUpdate:modelValue":e[60]||(e[60]=a=>Pe.value=a),type:"textarea",placeholder:"è¾“å…¥å¤„ç†æƒ…å†µå¤‡æ³¨..."},null,8,["modelValue"])]),_:1})])):M("",!0)]),_:1},8,["model"])):M("",!0)]),_:1},8,["modelValue"]),l(re,{modelValue:ul.value,"onUpdate:modelValue":e[69]||(e[69]=a=>ul.value=a),title:(qa=q.value)!=null&&qa.id?"ç¼–è¾‘ç§‘ç›®":"åˆ›å»ºç§‘ç›®",width:"500px","destroy-on-close":""},{footer:t(()=>[u("span",Vs,[l(n,{onClick:e[68]||(e[68]=a=>ul.value=!1)},{default:t(()=>[...e[206]||(e[206]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:ot},{default:t(()=>[...e[207]||(e[207]=[r("ä¿å­˜",-1)])]),_:1})])]),default:t(()=>[q.value?(p(),$(ce,{key:0,model:q.value,"label-width":"100px"},{default:t(()=>[l(b,{label:"ç§‘ç›®åç§°",required:""},{default:t(()=>[l(w,{modelValue:q.value.subject_name,"onUpdate:modelValue":e[63]||(e[63]=a=>q.value.subject_name=a),placeholder:"è¯·è¾“å…¥ç§‘ç›®åç§°"},null,8,["modelValue"])]),_:1}),l(b,{label:"ç§‘ç›®ä»£ç "},{default:t(()=>[l(w,{modelValue:q.value.subject_code,"onUpdate:modelValue":e[64]||(e[64]=a=>q.value.subject_code=a),placeholder:"è¯·è¾“å…¥ç§‘ç›®ä»£ç "},null,8,["modelValue"])]),_:1}),l(b,{label:"æ’åº"},{default:t(()=>[l(Be,{modelValue:q.value.sort,"onUpdate:modelValue":e[65]||(e[65]=a=>q.value.sort=a),min:0},null,8,["modelValue"])]),_:1}),l(b,{label:"åˆ†ç±»åç§°"},{default:t(()=>[l(w,{modelValue:q.value.category_name,"onUpdate:modelValue":e[66]||(e[66]=a=>q.value.category_name=a),placeholder:"è¯·è¾“å…¥åˆ†ç±»åç§°"},null,8,["modelValue"])]),_:1}),l(b,{label:"æ˜¯å¦ä¸Šæ¶"},{default:t(()=>[l(Io,{modelValue:q.value.is_on_shelf,"onUpdate:modelValue":e[67]||(e[67]=a=>q.value.is_on_shelf=a),"active-value":1,"inactive-value":0,"active-text":"ä¸Šæ¶","inactive-text":"ä¸‹æ¶"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):M("",!0)]),_:1},8,["modelValue","title"]),l(re,{modelValue:il.value,"onUpdate:modelValue":e[75]||(e[75]=a=>il.value=a),title:(Ha=G.value)!=null&&Ha.id?"ç¼–è¾‘ç« èŠ‚":"åˆ›å»ºç« èŠ‚",width:"500px","destroy-on-close":""},{footer:t(()=>[u("span",xs,[l(n,{onClick:e[74]||(e[74]=a=>il.value=!1)},{default:t(()=>[...e[208]||(e[208]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:it},{default:t(()=>[...e[209]||(e[209]=[r("ä¿å­˜",-1)])]),_:1})])]),default:t(()=>[G.value?(p(),$(ce,{key:0,model:G.value,"label-width":"100px"},{default:t(()=>[l(b,{label:"æ‰€å±ç§‘ç›®",required:""},{default:t(()=>[l(E,{modelValue:G.value.major_id,"onUpdate:modelValue":e[70]||(e[70]=a=>G.value.major_id=a),style:{width:"100%"},disabled:""},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"ç« èŠ‚åç§°",required:""},{default:t(()=>[l(w,{modelValue:G.value.chapter_name,"onUpdate:modelValue":e[71]||(e[71]=a=>G.value.chapter_name=a),placeholder:"è¯·è¾“å…¥ç« èŠ‚åç§°"},null,8,["modelValue"])]),_:1}),l(b,{label:"ç« èŠ‚ä»£ç "},{default:t(()=>[l(w,{modelValue:G.value.chapter_code,"onUpdate:modelValue":e[72]||(e[72]=a=>G.value.chapter_code=a),placeholder:"è¯·è¾“å…¥ç« èŠ‚ä»£ç "},null,8,["modelValue"])]),_:1}),l(b,{label:"æ’åº"},{default:t(()=>[l(Be,{modelValue:G.value.sort,"onUpdate:modelValue":e[73]||(e[73]=a=>G.value.sort=a),min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):M("",!0)]),_:1},8,["modelValue","title"]),l(re,{modelValue:Me.value,"onUpdate:modelValue":e[95]||(e[95]=a=>Me.value=a),title:"åˆ›å»ºé¢˜ç›®",width:"80%",top:"5vh","destroy-on-close":"",onClose:Ct},{footer:t(()=>[u("span",Ps,[l(n,{onClick:e[94]||(e[94]=a=>Me.value=!1)},{default:t(()=>[...e[224]||(e[224]=[r("å–æ¶ˆ",-1)])]),_:1}),l(n,{type:"primary",onClick:Ot,loading:ql.value},{default:t(()=>[r(k(Ve.value?`åˆ›å»º (ç¬¬ ${P.value+1}/${N.value.length} é¢˜)`:"åˆ›å»º"),1)]),_:1},8,["loading"])])]),default:t(()=>[l(Ao,{modelValue:ga.value,"onUpdate:modelValue":e[78]||(e[78]=a=>ga.value=a),class:"mb-20"},{default:t(()=>[l(Mo,{title:"ğŸ“‹ JSONæ ¼å¼å¯¼å…¥ï¼ˆå¿«é€Ÿåˆ›å»ºï¼‰",name:"json"},{default:t(()=>[l(Ee,{title:"æ”¯æŒä»JSONå¿«é€Ÿå¯¼å…¥é¢˜ç›®æ•°æ®",description:"ç²˜è´´JSONæ•°æ®åç‚¹å‡»è§£æï¼Œå°†è‡ªåŠ¨å¡«å……è¡¨å•ã€‚æ”¯æŒæ‰¹é‡å¯¼å…¥å¤šä¸ªé¢˜ç›®ã€‚",type:"info",closable:!1,class:"mb-10"}),l(w,{modelValue:Ae.value,"onUpdate:modelValue":e[76]||(e[76]=a=>Ae.value=a),type:"textarea",rows:6,placeholder:`è¯·ç²˜è´´JSONæ ¼å¼çš„é¢˜ç›®æ•°æ®...
ç¤ºä¾‹æ ¼å¼:
{
  "exercise_type_name": "å•é€‰é¢˜",
  "stem": "é¢˜ç›®å†…å®¹",
  "options": [{"option_key": "A", "option_value": "é€‰é¡¹A"}],
  "answer": "A",
  "analysis": "è§£æå†…å®¹",
  "knowledgeTags": ["è€ƒç‚¹1"]
}`},null,8,["modelValue"]),u("div",Ss,[l(n,{type:"primary",onClick:xt},{default:t(()=>[...e[210]||(e[210]=[r("è§£æJSON",-1)])]),_:1}),l(n,{onClick:$t},{default:t(()=>[...e[211]||(e[211]=[r("æ¸…ç©º",-1)])]),_:1}),l(n,{type:"success",link:"",onClick:e[77]||(e[77]=a=>Hl.value=!0)},{default:t(()=>[...e[212]||(e[212]=[r("æŸ¥çœ‹æ ¼å¼ç¤ºä¾‹",-1)])]),_:1})]),Ve.value&&N.value.length>0?(p(),g("div",Ts,[l(Ee,{title:`å·²è§£æ ${N.value.length} é“é¢˜ç›®`,type:"success",closable:!1,"show-icon":"",class:"mb-10"},null,8,["title"]),l(ne,{gutter:10},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(n,{type:"warning",size:"large",style:{width:"100%"},loading:Le.value,onClick:Qa},{default:t(()=>[l(C,null,{default:t(()=>[l(O(Jo))]),_:1}),r(" ä¸€é”®å¯¼å…¥å…¨éƒ¨é¢˜ç›® ("+k(N.value.length)+"é“) ",1)]),_:1},8,["loading"])]),_:1}),l(x,{span:12},{default:t(()=>[l(n,{type:"info",size:"large",style:{width:"100%"},onClick:jt},{default:t(()=>[l(C,null,{default:t(()=>[l(Qo)]),_:1}),e[213]||(e[213]=r(" é¢„è§ˆé¢˜ç›®åˆ—è¡¨ ",-1))]),_:1})]),_:1})]),_:1}),l(Ra,{type:"info",size:"small",class:"mt-5",style:{display:"block"}},{default:t(()=>[...e[214]||(e[214]=[r(" æç¤ºï¼šä¸€é”®å¯¼å…¥å°†è‡ªåŠ¨ä¸ºæ‰€æœ‰é¢˜ç›®è®¾ç½®ç›¸åŒçš„ç§‘ç›®å’Œç« èŠ‚ ",-1)])]),_:1})])):M("",!0)]),_:1})]),_:1},8,["modelValue"]),f.value?(p(),$(ce,{key:0,model:f.value,"label-position":"top"},{default:t(()=>[l(ne,{gutter:20},{default:t(()=>[l(x,{span:6},{default:t(()=>[l(b,{label:"é¢˜å‹",required:""},{default:t(()=>[l(E,{modelValue:f.value.exercise_type_name,"onUpdate:modelValue":e[79]||(e[79]=a=>f.value.exercise_type_name=a),style:{width:"100%"}},{default:t(()=>[l(T,{label:"å•é€‰é¢˜",value:"å•é€‰é¢˜"}),l(T,{label:"å¤šé€‰é¢˜",value:"å¤šé€‰é¢˜"}),l(T,{label:"å¡«ç©ºé¢˜",value:"å¡«ç©ºé¢˜"}),l(T,{label:"è§£ç­”é¢˜",value:"è§£ç­”é¢˜"}),l(T,{label:"åˆ¤æ–­é¢˜",value:"åˆ¤æ–­é¢˜"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{span:6},{default:t(()=>[l(b,{label:"æ‰€å±ç§‘ç›®",required:""},{default:t(()=>[l(E,{modelValue:f.value.major_id,"onUpdate:modelValue":e[80]||(e[80]=a=>f.value.major_id=a),style:{width:"100%"},onChange:Vt},{default:t(()=>[(p(!0),g(D,null,L(le.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{span:6},{default:t(()=>[l(b,{label:"æ‰€å±ç« èŠ‚"},{default:t(()=>[l(E,{modelValue:f.value.chapter_id,"onUpdate:modelValue":e[81]||(e[81]=a=>f.value.chapter_id=a),style:{width:"100%"}},{default:t(()=>[(p(!0),g(D,null,L(he.value,a=>(p(),$(T,{key:a.id,label:a.name,value:String(a.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{span:6},{default:t(()=>[l(b,{label:"éš¾åº¦"},{default:t(()=>[l(Pa,{modelValue:f.value.level,"onUpdate:modelValue":e[82]||(e[82]=a=>f.value.level=a),max:5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(b,{label:"çº¯æ–‡æœ¬é¢˜å¹²",required:""},{default:t(()=>[l(w,{modelValue:f.value.stem,"onUpdate:modelValue":e[83]||(e[83]=a=>f.value.stem=a),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥é¢˜å¹²"},null,8,["modelValue"])]),_:1}),l(b,{label:"é¢˜å¹²(å¯Œæ–‡æœ¬)"},{default:t(()=>[u("div",js,[l(n,{type:"primary",link:"",onClick:e[84]||(e[84]=a=>We.value=!We.value)},{default:t(()=>[r(k(We.value?"æ”¶èµ·å¯Œæ–‡æœ¬ç¼–è¾‘å™¨":"å±•å¼€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"),1)]),_:1}),We.value?(p(),g("div",$s,[l(be,{modelValue:f.value.stem_richtext,"onUpdate:modelValue":e[85]||(e[85]=a=>f.value.stem_richtext=a),height:200,placeholder:"è¯·è¾“å…¥å¯Œæ–‡æœ¬é¢˜å¹²..."},null,8,["modelValue"])])):M("",!0)])]),_:1}),["å•é€‰é¢˜","å¤šé€‰é¢˜"].includes(f.value.exercise_type_name)?(p(),g("div",Us,[l(b,{label:"é€‰é¡¹"},{default:t(()=>[u("div",Is,[(p(!0),g(D,null,L(f.value.options,(a,_)=>(p(),g("div",{key:_,class:"option-item"},[u("div",Qs,[u("span",Ms,k(String.fromCharCode(65+_)),1),l(w,{modelValue:a.option_value,"onUpdate:modelValue":Q=>a.option_value=Q,type:"textarea",rows:2,placeholder:"é€‰é¡¹å†…å®¹",class:"option-input"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{link:"",type:"danger",onClick:Q=>It(_)},{default:t(()=>[...e[215]||(e[215]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])])]))),128))]),l(n,{type:"primary",link:"",onClick:Ut,class:"mt-10"},{default:t(()=>[...e[216]||(e[216]=[r("+ æ·»åŠ é€‰é¡¹",-1)])]),_:1})]),_:1})])):M("",!0),f.value.exercise_type_name==="è§£ç­”é¢˜"?(p(),g("div",As,[l(b,{label:"å°é¢˜åˆ—è¡¨"},{default:t(()=>[u("div",zs,[(p(!0),g(D,null,L(f.value.subQuestions,(a,_)=>(p(),g("div",{key:_,class:"sub-question-item"},[l(zo,{class:"sub-question-card",header:`å°é¢˜ ${_+1}`},{default:t(()=>[l(b,{label:"å°é¢˜é¢˜å¹²"},{default:t(()=>[l(w,{modelValue:a.sub_stem,"onUpdate:modelValue":Q=>a.sub_stem=Q,type:"textarea",rows:2,placeholder:"è¯·è¾“å…¥å°é¢˜é¢˜å¹²"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(b,{label:"å°é¢˜ç­”æ¡ˆ"},{default:t(()=>[l(w,{modelValue:a.sub_answer,"onUpdate:modelValue":Q=>a.sub_answer=Q,type:"textarea",rows:2,placeholder:"è¯·è¾“å…¥å°é¢˜ç­”æ¡ˆ"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(b,{label:"å°é¢˜è§£æ"},{default:t(()=>[l(w,{modelValue:a.sub_analysis,"onUpdate:modelValue":Q=>a.sub_analysis=Q,type:"textarea",rows:2,placeholder:"è¯·è¾“å…¥å°é¢˜è§£æ"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(b,{label:"å°é¢˜åˆ†å€¼"},{default:t(()=>[l(Be,{modelValue:a.sub_score,"onUpdate:modelValue":Q=>a.sub_score=Q,min:0,max:100},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),u("div",Os,[l(n,{link:"",type:"danger",onClick:Q=>Mt(_)},{default:t(()=>[...e[217]||(e[217]=[r("åˆ é™¤å°é¢˜",-1)])]),_:1},8,["onClick"])])]),_:2},1032,["header"])]))),128))]),l(n,{type:"primary",link:"",onClick:Qt,class:"mt-10"},{default:t(()=>[...e[218]||(e[218]=[r("+ æ·»åŠ å°é¢˜",-1)])]),_:1})]),_:1})])):M("",!0),l(b,{label:"çº¯æ–‡æœ¬ç­”æ¡ˆ"},{default:t(()=>[l(w,{modelValue:f.value.answer,"onUpdate:modelValue":e[86]||(e[86]=a=>f.value.answer=a),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥ç­”æ¡ˆ"},null,8,["modelValue"])]),_:1}),l(b,{label:"ç­”æ¡ˆ(å¯Œæ–‡æœ¬)"},{default:t(()=>[u("div",Ds,[l(n,{type:"primary",link:"",onClick:e[87]||(e[87]=a=>Ke.value=!Ke.value)},{default:t(()=>[r(k(Ke.value?"æ”¶èµ·å¯Œæ–‡æœ¬ç¼–è¾‘å™¨":"å±•å¼€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"),1)]),_:1}),Ke.value?(p(),g("div",Ns,[l(be,{modelValue:f.value.answer_richtext,"onUpdate:modelValue":e[88]||(e[88]=a=>f.value.answer_richtext=a),height:200,placeholder:"è¯·è¾“å…¥å¯Œæ–‡æœ¬ç­”æ¡ˆ..."},null,8,["modelValue"])])):M("",!0)])]),_:1}),l(b,{label:"è§£æ(å¯Œæ–‡æœ¬)"},{default:t(()=>[u("div",Fs,[l(n,{type:"primary",link:"",onClick:e[89]||(e[89]=a=>Xe.value=!Xe.value)},{default:t(()=>[r(k(Xe.value?"æ”¶èµ·å¯Œæ–‡æœ¬ç¼–è¾‘å™¨":"å±•å¼€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"),1)]),_:1}),Xe.value?(p(),g("div",Ls,[l(be,{modelValue:f.value.analysis_richtext,"onUpdate:modelValue":e[90]||(e[90]=a=>f.value.analysis_richtext=a),height:200,placeholder:"è¯·è¾“å…¥è§£æ..."},null,8,["modelValue"])])):M("",!0)])]),_:1}),l(ne,{gutter:20},{default:t(()=>[l(x,{span:8},{default:t(()=>[l(b,{label:"æ€»åˆ†"},{default:t(()=>[l(Be,{modelValue:f.value.total_score,"onUpdate:modelValue":e[91]||(e[91]=a=>f.value.total_score=a),min:0,max:100},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:8},{default:t(()=>[l(b,{label:"è¯•å·åç§°"},{default:t(()=>[l(w,{modelValue:f.value.exam_full_name,"onUpdate:modelValue":e[92]||(e[92]=a=>f.value.exam_full_name=a),placeholder:"è¯•å·åç§°"},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:8},{default:t(()=>[l(b,{label:"å¹´ä»½"},{default:t(()=>[l(w,{modelValue:f.value.exam_time,"onUpdate:modelValue":e[93]||(e[93]=a=>f.value.exam_time=a),placeholder:"å¹´ä»½"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(b,{label:"çŸ¥è¯†ç‚¹æ ‡ç­¾"},{default:t(()=>[u("div",Es,[(p(!0),g(D,null,L(f.value.knowledgeTags,(a,_)=>(p(),g("div",{key:_,class:"tag-item"},[l(w,{modelValue:f.value.knowledgeTags[_],"onUpdate:modelValue":Q=>f.value.knowledgeTags[_]=Q,placeholder:"æ ‡ç­¾åç§°",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"]),l(n,{link:"",type:"danger",onClick:Q=>zt(_)},{default:t(()=>[...e[219]||(e[219]=[r("åˆ é™¤",-1)])]),_:1},8,["onClick"])]))),128)),l(n,{type:"primary",link:"",onClick:At,class:"mt-10"},{default:t(()=>[...e[220]||(e[220]=[r("+ æ·»åŠ æ ‡ç­¾",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])):M("",!0),Ve.value&&N.value.length>1?(p(),g("div",Bs,[l(Ja),l(ne,{align:"middle",justify:"center"},{default:t(()=>[l(x,{span:8,style:{"text-align":"center"}},{default:t(()=>[l(n,{type:"primary",disabled:P.value===0,onClick:Tt},{default:t(()=>[l(C,null,{default:t(()=>[l(Oo)]),_:1}),e[221]||(e[221]=r(" ä¸Šä¸€é¢˜ ",-1))]),_:1},8,["disabled"])]),_:1}),l(x,{span:8,style:{"text-align":"center"}},{default:t(()=>[l(S,{type:"info",size:"large"},{default:t(()=>[r(" ç¬¬ "+k(P.value+1)+" / "+k(N.value.length)+" é¢˜ ",1)]),_:1})]),_:1}),l(x,{span:8,style:{"text-align":"center"}},{default:t(()=>[l(n,{type:"primary",disabled:P.value===N.value.length-1,onClick:St},{default:t(()=>[e[222]||(e[222]=r(" ä¸‹ä¸€é¢˜ ",-1)),l(C,null,{default:t(()=>[l(O(Ga))]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),l(ne,{style:{"margin-top":"10px"}},{default:t(()=>[l(x,{span:24,style:{"text-align":"center"}},{default:t(()=>[l(Ra,{type:"info"},{default:t(()=>[...e[223]||(e[223]=[r('ç‚¹å‡»"åˆ›å»º"ä¿å­˜å½“å‰é¢˜ç›®ï¼Œç„¶åç»§ç»­ä¸‹ä¸€é¢˜',-1)])]),_:1})]),_:1})]),_:1})])):M("",!0)]),_:1},8,["modelValue"]),l(re,{modelValue:Ul.value,"onUpdate:modelValue":e[97]||(e[97]=a=>Ul.value=a),title:"æ‰¹é‡å¯¼å…¥é¢˜ç›®é¢„è§ˆ",width:"80%",top:"5vh"},{footer:t(()=>[u("span",Ks,[l(n,{onClick:e[96]||(e[96]=a=>Ul.value=!1)},{default:t(()=>[...e[225]||(e[225]=[r("å…³é—­",-1)])]),_:1}),Le.value?M("",!0):(p(),$(n,{key:0,type:"warning",loading:Le.value,onClick:Qa},{default:t(()=>[r(" ä¸€é”®å¯¼å…¥å…¨éƒ¨ ("+k(N.value.length)+"é“) ",1)]),_:1},8,["loading"]))])]),default:t(()=>[Le.value?(p(),g("div",Js,[l(na,{percentage:Math.round(Y.value.current/Y.value.total*100),format:()=>`${Y.value.current}/${Y.value.total}`,"stroke-width":20,status:"success"},null,8,["percentage","format"]),l(ne,{class:"mt-10",justify:"center"},{default:t(()=>[l(x,{span:8,style:{"text-align":"center"}},{default:t(()=>[l(sa,{title:"æˆåŠŸ",value:Y.value.success,"value-style":"color: #67C23A"},null,8,["value"])]),_:1}),l(x,{span:8,style:{"text-align":"center"}},{default:t(()=>[l(sa,{title:"å¤±è´¥",value:Y.value.failed,"value-style":"color: #F56C6C"},null,8,["value"])]),_:1}),l(x,{span:8,style:{"text-align":"center"}},{default:t(()=>[l(sa,{title:"æ€»è®¡",value:Y.value.total},null,8,["value"])]),_:1})]),_:1})])):M("",!0),me((p(),$(h,{data:N.value,height:"500"},{default:t(()=>[l(i,{type:"index",label:"åºå·",width:"60"}),l(i,{label:"é¢˜å‹",width:"100"},{default:t(({row:a})=>[l(S,{size:"small"},{default:t(()=>[r(k(a.exercise_type_name||a.type||"å•é€‰é¢˜"),1)]),_:2},1024)]),_:1}),l(i,{label:"é¢˜å¹²","show-overflow-tooltip":""},{default:t(({row:a})=>[u("span",{innerHTML:a.stem||a.title||a.question||"æ— é¢˜å¹²"},null,8,Rs)]),_:1}),l(i,{label:"é€‰é¡¹/å°é¢˜æ•°",width:"120"},{default:t(({row:a})=>[a.options&&a.options.length>0?(p(),g("span",qs,k(a.options.length)+" ä¸ªé€‰é¡¹ ",1)):a.subQuestions&&a.subQuestions.length>0?(p(),g("span",Hs,k(a.subQuestions.length)+" ä¸ªå°é¢˜ ",1)):(p(),g("span",Ws,"-"))]),_:1}),l(i,{label:"æ¥æº",width:"150","show-overflow-tooltip":""},{default:t(({row:a})=>[r(k(a.exam_full_name||a.source||"-"),1)]),_:1}),l(i,{label:"å¹´ä»½",width:"80"},{default:t(({row:a})=>[r(k(a.exam_time||a.year||"-"),1)]),_:1})]),_:1},8,["data"])),[[pe,Le.value]])]),_:1},8,["modelValue"]),l(re,{modelValue:Hl.value,"onUpdate:modelValue":e[104]||(e[104]=a=>Hl.value=a),title:"JSONæ ¼å¼ç¤ºä¾‹",width:"70%",top:"5vh"},{default:t(()=>[l(Ol,{type:"border-card"},{default:t(()=>[l(y,{label:"å•é€‰é¢˜ç¤ºä¾‹"},{default:t(()=>[u("pre",Xs,k(O(ya)),1),l(n,{type:"primary",onClick:e[98]||(e[98]=a=>Ge(O(ya)))},{default:t(()=>[...e[226]||(e[226]=[r("å¤åˆ¶ç¤ºä¾‹",-1)])]),_:1})]),_:1}),l(y,{label:"å¤šé€‰é¢˜ç¤ºä¾‹"},{default:t(()=>[u("pre",Gs,k(O(ba)),1),l(n,{type:"primary",onClick:e[99]||(e[99]=a=>Ge(O(ba)))},{default:t(()=>[...e[227]||(e[227]=[r("å¤åˆ¶ç¤ºä¾‹",-1)])]),_:1})]),_:1}),l(y,{label:"å¡«ç©ºé¢˜ç¤ºä¾‹"},{default:t(()=>[u("pre",Zs,k(O(ha)),1),l(n,{type:"primary",onClick:e[100]||(e[100]=a=>Ge(O(ha)))},{default:t(()=>[...e[228]||(e[228]=[r("å¤åˆ¶ç¤ºä¾‹",-1)])]),_:1})]),_:1}),l(y,{label:"è§£ç­”é¢˜ç¤ºä¾‹"},{default:t(()=>[u("pre",Ys,k(O(wa)),1),l(n,{type:"primary",onClick:e[101]||(e[101]=a=>Ge(O(wa)))},{default:t(()=>[...e[229]||(e[229]=[r("å¤åˆ¶ç¤ºä¾‹",-1)])]),_:1})]),_:1}),l(y,{label:"è§£ç­”é¢˜(å¸¦å°é¢˜)ç¤ºä¾‹"},{default:t(()=>[u("pre",er,k(O(ka)),1),l(n,{type:"primary",onClick:e[102]||(e[102]=a=>Ge(O(ka)))},{default:t(()=>[...e[230]||(e[230]=[r("å¤åˆ¶ç¤ºä¾‹",-1)])]),_:1})]),_:1}),l(y,{label:"æ‰¹é‡å¯¼å…¥ç¤ºä¾‹"},{default:t(()=>[u("pre",lr,k(O(Ca)),1),l(n,{type:"primary",onClick:e[103]||(e[103]=a=>Ge(O(Ca)))},{default:t(()=>[...e[231]||(e[231]=[r("å¤åˆ¶ç¤ºä¾‹",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:kl.value,"onUpdate:modelValue":e[115]||(e[115]=a=>kl.value=a),title:"æ·»åŠ é¢˜ç›®åˆ°ç« èŠ‚",width:"90%",top:"5vh","destroy-on-close":""},{footer:t(()=>[u("span",fr,[l(n,{onClick:e[114]||(e[114]=a=>kl.value=!1)},{default:t(()=>[...e[234]||(e[234]=[r("å…³é—­",-1)])]),_:1})])]),default:t(()=>[we.value?(p(),g("div",ar,[l(Ee,{title:`æ­£åœ¨ä¸ºç« èŠ‚ [${we.value.name}] æ·»åŠ é¢˜ç›®`,type:"info",closable:!1,class:"mb-20"},null,8,["title"]),l(Ol,{modelValue:Wl.value,"onUpdate:modelValue":e[113]||(e[113]=a=>Wl.value=a),type:"border-card",class:"mb-20",onTabChange:Gt},{default:t(()=>[l(y,{label:"ä»é”™é¢˜ç»Ÿè®¡é€‰æ‹©",name:"wrong-stats"},{default:t(()=>[u("div",tr,[l(n,{type:"success",onClick:qt,disabled:ze.value.length===0,loading:Ql.value},{default:t(()=>[r(" æ·»åŠ é€‰ä¸­çš„ "+k(ze.value.length)+" é“é¢˜ç›® ",1)]),_:1},8,["disabled","loading"])]),me((p(),$(h,{data:Cl.value,border:"",stripe:"",onSelectionChange:Rt,height:"400"},{default:t(()=>[l(i,{type:"selection",width:"55",align:"center"}),l(i,{prop:"QuestionID",label:"é¢˜ç›®ID",width:"150",align:"center","show-overflow-tooltip":""}),l(i,{prop:"exercise_type_name",label:"é¢˜å‹",width:"80",align:"center"}),l(i,{prop:"stem",label:"é¢˜å¹²å†…å®¹","min-width":"250","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{innerHTML:Fe(a.stem)},null,8,or)]),_:1}),l(i,{prop:"error_count",label:"é”™è¯¯äººæ•°",width:"90",align:"center",sortable:""}),l(i,{prop:"total_attempts",label:"æ€»ç»ƒä¹ æ¬¡æ•°",width:"100",align:"center",sortable:""}),l(i,{label:"é”™è¯¯ç‡",width:"100",align:"center"},{default:t(({row:a})=>[l(na,{percentage:Al(a),status:Al(a)>50?"exception":"warning"},null,8,["percentage","status"])]),_:1})]),_:1},8,["data"])),[[pe,Kl.value]])]),_:1}),l(y,{label:"ä»é¢˜åº“æœç´¢é€‰æ‹©",name:"search"},{default:t(()=>[u("div",nr,[l(ne,{gutter:10},{default:t(()=>[l(x,{span:8},{default:t(()=>[l(w,{modelValue:te.keyword,"onUpdate:modelValue":e[105]||(e[105]=a=>te.keyword=a),placeholder:"æœç´¢é¢˜ç›®å†…å®¹æˆ–ID...",clearable:"",onInput:Ht},null,8,["modelValue"])]),_:1}),l(x,{span:5},{default:t(()=>[l(E,{modelValue:te.type,"onUpdate:modelValue":e[106]||(e[106]=a=>te.type=a),placeholder:"é¢˜å‹",clearable:"",style:{width:"100%"},onChange:Ml},{default:t(()=>[l(T,{label:"å•é€‰é¢˜",value:"å•é€‰é¢˜"}),l(T,{label:"å¤šé€‰é¢˜",value:"å¤šé€‰é¢˜"}),l(T,{label:"å¡«ç©ºé¢˜",value:"å¡«ç©ºé¢˜"}),l(T,{label:"è§£ç­”é¢˜",value:"è§£ç­”é¢˜"}),l(T,{label:"åˆ¤æ–­é¢˜",value:"åˆ¤æ–­é¢˜"})]),_:1},8,["modelValue"])]),_:1}),l(x,{span:11},{default:t(()=>[l(n,{type:"success",onClick:Kt,disabled:Oe.value.length===0},{default:t(()=>[r(" æ·»åŠ é€‰ä¸­çš„ "+k(Oe.value.length)+" é“é¢˜ç›® ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),me((p(),$(h,{data:Vl.value,border:"",stripe:"",onSelectionChange:Wt,height:"400"},{default:t(()=>[l(i,{type:"selection",width:"55",align:"center"}),l(i,{prop:"question_id",label:"é¢˜ç›®ID",width:"150",align:"center","show-overflow-tooltip":""}),l(i,{prop:"exercise_type_name",label:"é¢˜å‹",width:"80",align:"center"}),l(i,{prop:"stem",label:"é¢˜å¹²å†…å®¹","min-width":"300","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{innerHTML:Fe(a.stem)},null,8,sr)]),_:1}),l(i,{prop:"major_name",label:"æ‰€å±ç§‘ç›®",width:"120",align:"center"})]),_:1},8,["data"])),[[pe,Xl.value]]),u("div",rr,[l(oa,{"current-page":te.page,"onUpdate:currentPage":e[107]||(e[107]=a=>te.page=a),"page-size":te.pageSize,"onUpdate:pageSize":e[108]||(e[108]=a=>te.pageSize=a),total:Va.value,layout:"total, prev, pager, next",onCurrentChange:Ml},null,8,["current-page","page-size","total"])])]),_:1}),l(y,{label:"ä»è¯•å·é€‰æ‹©",name:"from-paper"},{default:t(()=>[u("div",ur,[l(ne,{gutter:10},{default:t(()=>[l(x,{span:6},{default:t(()=>[l(E,{modelValue:ke.type,"onUpdate:modelValue":e[109]||(e[109]=a=>ke.type=a),placeholder:"è¯•å·ç±»å‹",clearable:"",style:{width:"100%"},onChange:Yt},{default:t(()=>[l(T,{label:"çœŸé¢˜å·",value:"1"}),l(T,{label:"æ¨¡æ‹Ÿå·",value:"2"})]),_:1},8,["modelValue"])]),_:1}),l(x,{span:10},{default:t(()=>[l(E,{modelValue:ke.selectedPaper,"onUpdate:modelValue":e[110]||(e[110]=a=>ke.selectedPaper=a),placeholder:"é€‰æ‹©è¯•å·",filterable:"",style:{width:"100%"},onChange:eo,loading:vl.value},{default:t(()=>[(p(!0),g(D,null,L(Te.value,a=>(p(),$(T,{key:a.id,label:`${a.title} (${a.year||"æ— å¹´ä»½"} ${a.school||""})`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),l(x,{span:8},{default:t(()=>[l(n,{type:"success",onClick:ao,disabled:Ce.value.length===0},{default:t(()=>[r(" æ·»åŠ é€‰ä¸­çš„ "+k(Ce.value.length)+" é“é¢˜ç›® ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),De.value.length>0?(p(),g("div",ir,[l(ne,{gutter:10},{default:t(()=>[l(x,{span:8},{default:t(()=>[l(w,{modelValue:oe.keyword,"onUpdate:modelValue":e[111]||(e[111]=a=>oe.keyword=a),placeholder:"ç­›é€‰é¢˜ç›®å†…å®¹...",clearable:"",onInput:Ma},null,8,["modelValue"])]),_:1}),l(x,{span:6},{default:t(()=>[l(E,{modelValue:oe.type,"onUpdate:modelValue":e[112]||(e[112]=a=>oe.type=a),placeholder:"é¢˜å‹ç­›é€‰",clearable:"",style:{width:"100%"},onChange:Ma},{default:t(()=>[l(T,{label:"å•é€‰é¢˜",value:"å•é€‰é¢˜"}),l(T,{label:"å¤šé€‰é¢˜",value:"å¤šé€‰é¢˜"}),l(T,{label:"å¡«ç©ºé¢˜",value:"å¡«ç©ºé¢˜"}),l(T,{label:"è§£ç­”é¢˜",value:"è§£ç­”é¢˜"}),l(T,{label:"åˆ¤æ–­é¢˜",value:"åˆ¤æ–­é¢˜"})]),_:1},8,["modelValue"])]),_:1}),l(x,{span:10},{default:t(()=>[u("span",dr,"å…± "+k(Ne.value.length)+" / "+k(De.value.length)+" é“é¢˜ç›®",1)]),_:1})]),_:1})])):M("",!0),me((p(),$(h,{data:Ne.value,border:"",stripe:"",onSelectionChange:lo,height:"400"},{default:t(()=>[l(i,{type:"selection",width:"55",align:"center"}),l(i,{prop:"exercise_number",label:"é¢˜å·",width:"70",align:"center"}),l(i,{prop:"exercise_type_name",label:"é¢˜å‹",width:"90",align:"center"}),l(i,{prop:"stem",label:"é¢˜å¹²å†…å®¹","min-width":"300","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{innerHTML:Fe(a.stem)},null,8,pr)]),_:1}),l(i,{prop:"score",label:"åˆ†å€¼",width:"70",align:"center"})]),_:1},8,["data"])),[[pe,Gl.value]])]),_:1}),l(y,{label:"å½“å‰ç« èŠ‚é¢˜é›†",name:"current-set"},{default:t(()=>[u("div",mr,[l(n,{onClick:el,loading:Sl.value},{default:t(()=>[...e[232]||(e[232]=[r("åˆ·æ–°",-1)])]),_:1},8,["loading"]),u("span",cr,"å…± "+k(xl.value.length)+" é“é¢˜ç›®",1)]),me((p(),$(h,{data:xl.value,border:"",stripe:"",height:"400"},{default:t(()=>[l(i,{prop:"question_id",label:"é¢˜ç›®ID",width:"150",align:"center","show-overflow-tooltip":""}),l(i,{prop:"exercise_type_name",label:"é¢˜å‹",width:"80",align:"center"}),l(i,{prop:"stem",label:"é¢˜å¹²å†…å®¹","min-width":"300","show-overflow-tooltip":""},{default:t(({row:a})=>[u("div",{innerHTML:Fe(a.stem)},null,8,vr)]),_:1}),l(i,{label:"æ“ä½œ",width:"100",align:"center"},{default:t(({row:a})=>[l(n,{size:"small",type:"danger",onClick:_=>Xt(a.question_id)},{default:t(()=>[...e[233]||(e[233]=[r("ç§»é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[pe,Sl.value]])]),_:1})]),_:1},8,["modelValue"])])):M("",!0)]),_:1},8,["modelValue"])])}}},kr=Do(_r,[["__scopeId","data-v-44d695c8"]]);export{kr as default};
