import{_ as el,i as ll,o as u,c as _,a as l,e as s,w as o,I as tl,p as h,E as y,f as v,r as f,g as ne,u as ol,D as al,k,a8 as Ce,d as p,m as b,F as A,y as N,n as Ve,z as T,a5 as he,Z as be,a9 as nl,t as Q,M as xe,T as sl,aa as il,ab as rl,J as se,b as ul,O as dl,C as pl,G as Me}from"./index-CYafs7gL.js";import{d as cl}from"./vuedraggable.umd-ZGnjsCIV.js";import{R as $}from"./RichEditor-DhNxoQ6j.js";import"./style-Ca15nGLt.js";const ml={class:"tutorial-chapter-manage"},_l={class:"content mt-20"},vl={class:"card-header"},yl={class:"chapter-tree-container"},fl={key:0,class:"loading-container"},gl={key:1,class:"empty-container"},kl=["onClick"],wl={class:"chapter-name"},Cl={class:"chapter-count"},Vl={key:0,class:"section-list"},hl=["onClick"],bl={class:"section-name"},xl={class:"section-count"},Ml={key:0,class:"question-list"},ql={key:0,class:"question-loading"},Ql={key:1,class:"question-empty"},Tl={key:2},Ul={class:"question-toolbar"},zl={class:"question-item"},Sl={class:"question-index"},$l={class:"question-type"},Ol=["innerHTML"],Dl={class:"question-actions"},El={class:"select-question-container"},Fl={class:"filter-bar mb-20"},Hl=["innerHTML"],Ll={class:"pagination-container mt-20"},Bl={class:"editor-wrapper"},Al={class:"options-list"},Nl={class:"option-editor-wrapper"},Il={class:"subs-list"},Rl={class:"sub-header"},Kl={class:"sub-index"},Gl={class:"sub-content"},Jl={class:"editor-wrapper"},Pl={class:"editor-wrapper"},Zl={key:0,class:"question-detail"},jl={class:"question-info"},Wl=["innerHTML"],Xl={key:0},Yl={key:1,class:"options-list"},et=["innerHTML"],lt=["innerHTML"],tt={key:2},ot=["innerHTML"],at={__name:"TutorialChapterManage",setup(nt){const qe=tl(),Qe=ol(),U=qe.params.id,J=v(null),P=v(!1),Z=v([]),O=v([]),D=v([]),x=v({}),j=v({}),W=v({}),z=v(!1),X=v(!1),r=ne({id:null,name:"",parentId:null,parentName:"",sortOrder:0,level:1}),I=v(!1),ie=v(null),re=v(-1),F=v(null),g=ne({keyword:"",type:"",page:1,pageSize:10}),ue=v([]),de=v(0),Y=v(!1),H=v(!1),S=v(null),ee=v(!1),n=ne({exercise_type:1,exercise_type_name:"单选题",stem:"",options:[{option_key:"A",option_value:""},{option_key:"B",option_value:""},{option_key:"C",option_value:""},{option_key:"D",option_value:""}],answer:"",analysis:"",total_score:2,subs:[]}),le=v(!1),C=v(null),Te=async()=>{try{const t=await h.getTutorialDetail(U);J.value=t.data}catch(t){console.error("获取教辅详情失败:",t),y.error("获取教辅详情失败")}},te=async()=>{P.value=!0;try{const t=await h.getTutorialChapters(U);Z.value=t.data||[]}catch(t){console.error("获取章节列表失败:",t),y.error("获取章节列表失败")}finally{P.value=!1}},Ue=t=>{const e=O.value.indexOf(t);e>-1?O.value.splice(e,1):O.value.push(t)},ze=async t=>{const e=D.value.indexOf(t.id);e>-1?D.value.splice(e,1):(D.value.push(t.id),x.value[t.id]||await oe(t.id))},oe=async t=>{j.value[t]=!0;try{const e=await h.getChapterQuestions(t);x.value[t]=e.data||[]}catch(e){console.error("获取题目列表失败:",e),y.error("获取题目列表失败"),x.value[t]=[]}finally{j.value[t]=!1}},Se=()=>{r.id=null,r.name="",r.parentId=null,r.parentName="",r.sortOrder=0,r.level=1,z.value=!0},$e=t=>{r.id=null,r.name="",r.parentId=t.id,r.parentName=t.name,r.sortOrder=0,r.level=2,z.value=!0},pe=t=>{r.id=t.id,r.name=t.name,r.parentId=t.parent_id,r.parentName=t.parent_name||"",r.sortOrder=t.sort_order||0,r.level=t.level||1,z.value=!0},Oe=async()=>{if(!r.name.trim()){y.warning("请输入章节名称");return}X.value=!0;try{const t={name:r.name,sort_order:r.sortOrder,level:r.level,parent_id:r.parentId};r.id?(await h.updateTutorialChapter(r.id,t),y.success("更新成功")):(await h.createTutorialChapter(U,t),y.success("创建成功")),z.value=!1,te()}catch(t){console.error("保存章节失败:",t),y.error("保存章节失败")}finally{X.value=!1}},ce=async t=>{try{await Me.confirm(t.level===1?"确定要删除该章节吗？将同时删除其下所有小节和题目关联。":"确定要删除该小节吗？将同时删除其下的题目关联。","警告",{type:"warning"}),await h.deleteTutorialChapter(t.id),y.success("删除成功"),te()}catch(e){e!=="cancel"&&(console.error("删除章节失败:",e),y.error("删除章节失败"))}},me=(t,e=!1,d=-1,m=null)=>{ie.value=t,re.value=e?d:-1,F.value=m,g.keyword="",g.type="",g.page=1,R(),I.value=!0},R=async()=>{var t,e;Y.value=!0;try{const d=await h.getQuestions({keyword:g.keyword,type:g.type,page:g.page,pageSize:g.pageSize});ue.value=((t=d.data)==null?void 0:t.list)||[],de.value=((e=d.data)==null?void 0:e.total)||0}catch(d){console.error("搜索题目失败:",d),y.error("搜索题目失败")}finally{Y.value=!1}},De=async t=>{var d;const e=ie.value;try{re.value>-1&&F.value&&await h.removeTutorialQuestion(U,F.value),await h.addTutorialQuestion({tutorial_id:U,chapter_id:e.id,question_id:t.question_id,sort_order:((d=x.value[e.id])==null?void 0:d.length)||0}),await oe(e.id),e.question_count=(e.question_count||0)+(F.value?0:1),y.success(F.value?"替换成功":"添加成功"),I.value=!1}catch(m){console.error("选择题目失败:",m),y.error("选择题目失败")}},Ee=(t,e,d)=>{me(t,!0,d,e.question_id)},Fe=async(t,e,d)=>{try{await Me.confirm("确定要删除该题目吗？","提示",{type:"warning"}),await h.removeTutorialQuestion(U,e.question_id),x.value[t.id].splice(d,1),t.question_count=Math.max(0,(t.question_count||0)-1),y.success("删除成功")}catch(m){m!=="cancel"&&(console.error("删除题目失败:",m),y.error("删除题目失败"))}},He=t=>{S.value=t,n.exercise_type=1,n.exercise_type_name="单选题",n.stem="",n.options=[{option_key:"A",option_value:""},{option_key:"B",option_value:""},{option_key:"C",option_value:""},{option_key:"D",option_value:""}],n.answer="",n.analysis="",n.total_score=2,n.subs=[],H.value=!0},Le=t=>{const e={1:"单选题",2:"多选题",3:"填空题",4:"解答题",5:"判断题"};n.exercise_type_name=e[t]||"单选题",t===5&&n.options.length===0&&(n.options=[{option_key:"A",option_value:"正确"},{option_key:"B",option_value:"错误"}])},Be=()=>{const t=n.options.length,e=String.fromCharCode(65+t);n.options.push({option_key:e,option_value:""})},Ae=t=>{n.options.length>2?(n.options.splice(t,1),n.options.forEach((e,d)=>{e.option_key=String.fromCharCode(65+d)})):y.warning("至少需要保留两个选项")},Ne=()=>{n.subs||(n.subs=[]),n.subs.push({stem:"",answer:"",analysis:"",score:""})},Ie=t=>{n.subs&&n.subs.length>0&&n.subs.splice(t,1)},Re=async()=>{var t,e;if(!n.stem.trim()){y.warning("请输入题干");return}if(!n.answer.trim()){y.warning("请输入答案");return}ee.value=!0;try{let d=null;[1,2,5].includes(n.exercise_type)&&n.options.length>0&&(d={},n.options.forEach(E=>{E.option_key&&E.option_value&&(d[E.option_key]=E.option_value)}));const m={exercise_type_name:n.exercise_type_name,stem:n.stem,answer:n.answer,analysis:n.analysis,total_score:n.total_score,options:d,subs:n.exercise_type===4?n.subs:null},K=(t=(await h.createQuestion(m)).data)==null?void 0:t.question_id;K&&S.value&&(await h.addTutorialQuestion({tutorial_id:U,chapter_id:S.value.id,question_id:K,sort_order:((e=x.value[S.value.id])==null?void 0:e.length)||0}),await oe(S.value.id),S.value.question_count=(S.value.question_count||0)+1,y.success("添加成功"),H.value=!1,n.exercise_type=1,n.exercise_type_name="单选题",n.stem="",n.options=[{option_key:"A",option_value:""},{option_key:"B",option_value:""},{option_key:"C",option_value:""},{option_key:"D",option_value:""}],n.answer="",n.analysis="",n.total_score=2,n.subs=[])}catch(d){console.error("手动添加题目失败:",d),y.error("手动添加题目失败")}finally{ee.value=!1}},Ke=t=>{C.value=t,le.value=!0},Ge=t=>{W.value[t.id]=!0},Je=async t=>{const e=x.value[t.id];if(!(!e||e.length===0))try{const d=e.map((m,c)=>({question_id:m.question_id,sort_order:c+1}));await h.updateTutorialQuestionOrder({chapter_id:t.id,questions:d}),y.success("顺序保存成功"),W.value[t.id]=!1}catch(d){console.error("保存顺序失败:",d),y.error("保存顺序失败")}},_e=t=>t?t.replace(/<[^>]+>/g,""):"",Pe=()=>{Qe.push("/computer/tutorials")};return ll(()=>{Te(),te()}),(t,e)=>{var ke;const d=f("el-page-header"),m=f("el-icon"),c=f("el-button"),K=f("el-empty"),E=f("el-scrollbar"),Ze=f("el-card"),L=f("el-input"),V=f("el-form-item"),ve=f("el-input-number"),ye=f("el-form"),G=f("el-dialog"),M=f("el-option"),fe=f("el-select"),B=f("el-table-column"),je=f("el-table"),We=f("el-pagination"),ge=f("el-col"),Xe=f("el-row"),Ye=al("loading");return u(),_("div",ml,[l(d,{onBack:Pe,title:((ke=J.value)==null?void 0:ke.name)||"教辅章节管理"},null,8,["title"]),s("div",_l,[l(Ze,null,{header:o(()=>{var a;return[s("div",vl,[s("h3",null,Q((a=J.value)==null?void 0:a.name)+" - 章节管理",1),l(c,{type:"primary",onClick:Se},{default:o(()=>[l(m,null,{default:o(()=>[l(k(se))]),_:1}),e[19]||(e[19]=p(" 添加章节 ",-1))]),_:1})])]}),default:o(()=>[s("div",yl,[P.value?(u(),_("div",fl,[l(m,{class:"is-loading"},{default:o(()=>[l(k(Ce))]),_:1}),e[20]||(e[20]=p(" 加载中... ",-1))])):Z.value.length===0?(u(),_("div",gl,[l(K,{description:"暂无章节"})])):b("",!0),(u(!0),_(A,null,N(Z.value,a=>{var q;return u(),_("div",{key:a.id,class:"chapter-item"},[s("div",{class:Ve(["chapter-header",{expanded:O.value.includes(a.id)}]),onClick:i=>Ue(a.id)},[l(m,{class:"expand-icon"},{default:o(()=>[O.value.includes(a.id)?(u(),T(k(be),{key:1})):(u(),T(k(he),{key:0}))]),_:2},1024),l(m,{class:"folder-icon"},{default:o(()=>[l(k(nl))]),_:1}),s("span",wl,Q(a.name),1),s("span",Cl,"("+Q(((q=a.children)==null?void 0:q.length)||0)+"节)",1),s("span",{class:"chapter-actions",onClick:e[0]||(e[0]=xe(()=>{},["stop"]))},[l(c,{size:"small",type:"primary",link:"",onClick:i=>$e(a)},{default:o(()=>[...e[21]||(e[21]=[p(" 添加节 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"primary",link:"",onClick:i=>pe(a)},{default:o(()=>[...e[22]||(e[22]=[p(" 编辑 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"danger",link:"",onClick:i=>ce(a)},{default:o(()=>[...e[23]||(e[23]=[p(" 删除 ",-1)])]),_:1},8,["onClick"])])],10,kl),O.value.includes(a.id)?(u(),_("div",Vl,[(u(!0),_(A,null,N(a.children,i=>(u(),_("div",{key:i.id,class:"section-item"},[s("div",{class:Ve(["section-header",{expanded:D.value.includes(i.id)}]),onClick:w=>ze(i)},[l(m,{class:"expand-icon"},{default:o(()=>[D.value.includes(i.id)?(u(),T(k(be),{key:1})):(u(),T(k(he),{key:0}))]),_:2},1024),l(m,{class:"document-icon"},{default:o(()=>[l(k(sl))]),_:1}),s("span",bl,Q(i.name),1),s("span",xl,"("+Q(i.question_count||0)+"题)",1),s("span",{class:"section-actions",onClick:e[1]||(e[1]=xe(()=>{},["stop"]))},[l(c,{size:"small",type:"primary",link:"",onClick:w=>me(i)},{default:o(()=>[...e[24]||(e[24]=[p(" 选择题 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"success",link:"",onClick:w=>He(i)},{default:o(()=>[...e[25]||(e[25]=[p(" 手动录入 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"primary",link:"",onClick:w=>pe(i)},{default:o(()=>[...e[26]||(e[26]=[p(" 编辑 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"danger",link:"",onClick:w=>ce(i)},{default:o(()=>[...e[27]||(e[27]=[p(" 删除 ",-1)])]),_:1},8,["onClick"])])],10,hl),D.value.includes(i.id)?(u(),_("div",Ml,[j.value[i.id]?(u(),_("div",ql,[l(m,{class:"is-loading"},{default:o(()=>[l(k(Ce))]),_:1}),e[28]||(e[28]=p(" 加载中... ",-1))])):!x.value[i.id]||x.value[i.id].length===0?(u(),_("div",Ql," 暂无题目 ")):(u(),_("div",Tl,[s("div",Ul,[W.value[i.id]?(u(),T(c,{key:0,type:"success",size:"small",onClick:w=>Je(i)},{default:o(()=>[l(m,null,{default:o(()=>[l(k(il))]),_:1}),e[29]||(e[29]=p(" 保存顺序 ",-1))]),_:1},8,["onClick"])):b("",!0)]),l(E,{"max-height":"400px"},{default:o(()=>[l(k(cl),{modelValue:x.value[i.id],"onUpdate:modelValue":w=>x.value[i.id]=w,"item-key":"question_id",handle:".drag-handle",onEnd:w=>Ge(i),class:"question-drag-list"},{item:o(({element:w,index:ae})=>[s("div",zl,[l(m,{class:"drag-handle"},{default:o(()=>[l(k(rl))]),_:1}),s("span",Sl,Q(ae+1)+".",1),s("span",$l,"["+Q(w.exercise_type_name)+"]",1),s("span",{class:"question-stem",innerHTML:_e(w.stem)},null,8,Ol),s("span",Dl,[l(c,{size:"small",type:"primary",link:"",onClick:we=>Ke(w)},{default:o(()=>[...e[30]||(e[30]=[p(" 查看 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"warning",link:"",onClick:we=>Ee(i,w,ae)},{default:o(()=>[...e[31]||(e[31]=[p(" 重选 ",-1)])]),_:1},8,["onClick"]),l(c,{size:"small",type:"danger",link:"",onClick:we=>Fe(i,w,ae)},{default:o(()=>[...e[32]||(e[32]=[p(" 删除 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue","onEnd"])]),_:2},1024)]))])):b("",!0)]))),128))])):b("",!0)])}),128))])]),_:1})]),l(G,{modelValue:z.value,"onUpdate:modelValue":e[5]||(e[5]=a=>z.value=a),title:r.id?"编辑章节":"添加章节",width:"500px"},{footer:o(()=>[l(c,{onClick:e[4]||(e[4]=a=>z.value=!1)},{default:o(()=>[...e[33]||(e[33]=[p("取消",-1)])]),_:1}),l(c,{type:"primary",onClick:Oe,loading:X.value},{default:o(()=>[...e[34]||(e[34]=[p("保存",-1)])]),_:1},8,["loading"])]),default:o(()=>[l(ye,{model:r,"label-width":"100px"},{default:o(()=>[l(V,{label:"章节名称",required:""},{default:o(()=>[l(L,{modelValue:r.name,"onUpdate:modelValue":e[2]||(e[2]=a=>r.name=a),placeholder:"请输入章节名称"},null,8,["modelValue"])]),_:1}),r.parentId?(u(),T(V,{key:0,label:"父章节"},{default:o(()=>[l(L,{value:r.parentName,disabled:""},null,8,["value"])]),_:1})):b("",!0),l(V,{label:"排序"},{default:o(()=>[l(ve,{modelValue:r.sortOrder,"onUpdate:modelValue":e[3]||(e[3]=a=>r.sortOrder=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(G,{modelValue:I.value,"onUpdate:modelValue":e[10]||(e[10]=a=>I.value=a),title:"选择题目",width:"900px"},{default:o(()=>[s("div",El,[s("div",Fl,[l(L,{modelValue:g.keyword,"onUpdate:modelValue":e[6]||(e[6]=a=>g.keyword=a),placeholder:"搜索题目...",clearable:"",style:{width:"300px"},onKeyup:ul(R,["enter"])},{append:o(()=>[l(c,{onClick:R},{default:o(()=>[l(m,null,{default:o(()=>[l(k(dl))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(fe,{modelValue:g.type,"onUpdate:modelValue":e[7]||(e[7]=a=>g.type=a),placeholder:"题型",clearable:"",style:{width:"150px","margin-left":"10px"}},{default:o(()=>[l(M,{label:"单选题",value:"单选题"}),l(M,{label:"多选题",value:"多选题"}),l(M,{label:"填空题",value:"填空题"}),l(M,{label:"解答题",value:"解答题"}),l(M,{label:"判断题",value:"判断题"})]),_:1},8,["modelValue"])]),pl((u(),T(je,{data:ue.value,border:"",stripe:"",height:"400"},{default:o(()=>[l(B,{type:"index",label:"序号",width:"60",align:"center"}),l(B,{prop:"question_id",label:"题目ID",width:"150","show-overflow-tooltip":""}),l(B,{prop:"exercise_type_name",label:"题型",width:"100",align:"center"}),l(B,{prop:"stem",label:"题干","min-width":"300","show-overflow-tooltip":""},{default:o(({row:a})=>[s("div",{innerHTML:_e(a.stem)},null,8,Hl)]),_:1}),l(B,{label:"操作",width:"100",align:"center",fixed:"right"},{default:o(({row:a})=>[l(c,{type:"primary",size:"small",onClick:q=>De(a)},{default:o(()=>[...e[35]||(e[35]=[p("选择",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ye,Y.value]]),s("div",Ll,[l(We,{"current-page":g.page,"onUpdate:currentPage":e[8]||(e[8]=a=>g.page=a),"page-size":g.pageSize,"onUpdate:pageSize":e[9]||(e[9]=a=>g.pageSize=a),total:de.value,layout:"total, prev, pager, next",onCurrentChange:R},null,8,["current-page","page-size","total"])])])]),_:1},8,["modelValue"]),l(G,{modelValue:H.value,"onUpdate:modelValue":e[17]||(e[17]=a=>H.value=a),title:"手动录入题目",width:"1000px",top:"3vh","destroy-on-close":"",class:"question-edit-dialog"},{footer:o(()=>[l(c,{onClick:e[16]||(e[16]=a=>H.value=!1)},{default:o(()=>[...e[41]||(e[41]=[p("取消",-1)])]),_:1}),l(c,{type:"primary",onClick:Re,loading:ee.value},{default:o(()=>[...e[42]||(e[42]=[p("保存",-1)])]),_:1},8,["loading"])]),default:o(()=>[l(ye,{model:n,"label-width":"100px",class:"question-edit-form"},{default:o(()=>[l(Xe,{gutter:20},{default:o(()=>[l(ge,{span:12},{default:o(()=>[l(V,{label:"题型"},{default:o(()=>[l(fe,{modelValue:n.exercise_type,"onUpdate:modelValue":e[11]||(e[11]=a=>n.exercise_type=a),style:{width:"100%"},onChange:Le},{default:o(()=>[l(M,{label:"单选题",value:1}),l(M,{label:"多选题",value:2}),l(M,{label:"填空题",value:3}),l(M,{label:"解答题",value:4}),l(M,{label:"判断题",value:5})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(ge,{span:12},{default:o(()=>[l(V,{label:"分值"},{default:o(()=>[l(ve,{modelValue:n.total_score,"onUpdate:modelValue":e[12]||(e[12]=a=>n.total_score=a),min:0,max:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V,{label:"题干",class:"form-item-stem"},{default:o(()=>[s("div",Bl,[l($,{modelValue:n.stem,"onUpdate:modelValue":e[13]||(e[13]=a=>n.stem=a),placeholder:"请输入题干",height:120},null,8,["modelValue"])])]),_:1}),[1,2,5].includes(n.exercise_type)?(u(),T(V,{key:0,label:"选项",class:"form-item-options"},{default:o(()=>[s("div",Al,[(u(!0),_(A,null,N(n.options,(a,q)=>(u(),_("div",{key:q,class:"option-edit-row"},[l(L,{modelValue:a.option_key,"onUpdate:modelValue":i=>a.option_key=i,style:{width:"50px"},placeholder:"选项",size:"small"},null,8,["modelValue","onUpdate:modelValue"]),s("div",Nl,[l($,{modelValue:a.option_value,"onUpdate:modelValue":i=>a.option_value=i,placeholder:"选项内容",height:80},null,8,["modelValue","onUpdate:modelValue"])]),l(c,{type:"danger",size:"small",onClick:i=>Ae(q)},{default:o(()=>[...e[36]||(e[36]=[p("删除",-1)])]),_:1},8,["onClick"])]))),128))]),l(c,{type:"primary",size:"small",onClick:Be,class:"add-option-btn"},{default:o(()=>[l(m,null,{default:o(()=>[l(k(se))]),_:1}),e[37]||(e[37]=p(" 添加选项 ",-1))]),_:1})]),_:1})):b("",!0),n.exercise_type===4?(u(),T(V,{key:1,label:"小题列表"},{default:o(()=>[s("div",Il,[(u(!0),_(A,null,N(n.subs||[],(a,q)=>(u(),_("div",{key:q,class:"sub-item-editor"},[s("div",Rl,[s("span",Kl,"小题 "+Q(q+1),1),l(L,{modelValue:a.score,"onUpdate:modelValue":i=>a.score=i,placeholder:"分值",style:{width:"80px"},size:"small"},{append:o(()=>[...e[38]||(e[38]=[p("分",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"]),l(c,{type:"danger",size:"small",onClick:i=>Ie(q)},{default:o(()=>[...e[39]||(e[39]=[p("删除",-1)])]),_:1},8,["onClick"])]),s("div",Gl,[l(V,{label:"小题题干"},{default:o(()=>[l($,{modelValue:a.stem,"onUpdate:modelValue":i=>a.stem=i,placeholder:"请输入小题题干",height:80},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(V,{label:"小题答案"},{default:o(()=>[l($,{modelValue:a.answer,"onUpdate:modelValue":i=>a.answer=i,placeholder:"请输入小题答案",height:80},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(V,{label:"小题解析"},{default:o(()=>[l($,{modelValue:a.analysis,"onUpdate:modelValue":i=>a.analysis=i,placeholder:"请输入小题解析",height:80},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]))),128))]),l(c,{type:"primary",size:"small",onClick:Ne,class:"mt-10"},{default:o(()=>[l(m,null,{default:o(()=>[l(k(se))]),_:1}),e[40]||(e[40]=p(" 添加小题 ",-1))]),_:1})]),_:1})):b("",!0),l(V,{label:"答案",class:"form-item-answer"},{default:o(()=>[s("div",Jl,[l($,{modelValue:n.answer,"onUpdate:modelValue":e[14]||(e[14]=a=>n.answer=a),placeholder:"请输入答案",height:100},null,8,["modelValue"])])]),_:1}),l(V,{label:"解析",class:"form-item-analysis"},{default:o(()=>[s("div",Pl,[l($,{modelValue:n.analysis,"onUpdate:modelValue":e[15]||(e[15]=a=>n.analysis=a),placeholder:"请输入解析",height:120},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(G,{modelValue:le.value,"onUpdate:modelValue":e[18]||(e[18]=a=>le.value=a),title:"题目详情",width:"800px"},{default:o(()=>[C.value?(u(),_("div",Zl,[s("div",jl,[s("p",null,[e[43]||(e[43]=s("strong",null,"题型：",-1)),p(Q(C.value.exercise_type_name),1)]),e[48]||(e[48]=s("p",null,[s("strong",null,"题干：")],-1)),s("div",{class:"question-content",innerHTML:C.value.stem},null,8,Wl),C.value.options&&C.value.options.length>0?(u(),_("p",Xl,[...e[44]||(e[44]=[s("strong",null,"选项：",-1)])])):b("",!0),C.value.options&&C.value.options.length>0?(u(),_("div",Yl,[(u(!0),_(A,null,N(C.value.options,a=>(u(),_("div",{key:a.option_key,class:"option-line"},[s("strong",null,Q(a.option_key)+".",1),e[45]||(e[45]=p()),s("span",{innerHTML:a.option_value},null,8,et)]))),128))])):b("",!0),s("p",null,[e[46]||(e[46]=s("strong",null,"答案：",-1)),s("span",{innerHTML:C.value.answer},null,8,lt)]),C.value.analysis?(u(),_("p",tt,[...e[47]||(e[47]=[s("strong",null,"解析：",-1)])])):b("",!0),C.value.analysis?(u(),_("div",{key:3,class:"analysis-content",innerHTML:C.value.analysis},null,8,ot)):b("",!0)])])):b("",!0)]),_:1},8,["modelValue"])])}}},dt=el(at,[["__scopeId","data-v-413f21b6"]]);export{dt as default};
