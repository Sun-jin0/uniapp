import{_ as C,aG as V,aH as c,K as E,aI as y,o as x,c as b,a as u,k as i,p as I,E as r}from"./index-1rGkZLYp.js";import{T as R,E as U}from"./style-BS9iE4ZN.js";const N={class:"rich-editor"},m="default",k={__name:"RichEditor",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"请输入内容..."},height:{type:Number,default:400}},emits:["update:modelValue","change"],setup(d,{emit:p}){V(e=>({v938a3e38:d.height+"px"}));const l=d,n=p,s=c(),t=c(l.modelValue);E(()=>l.modelValue,e=>{e!==t.value&&(t.value=e)});const f={excludeKeys:[]},h=async(e,o)=>{try{const a=await I.uploadImage(e);a.data&&a.data.url?(o(a.data.url,e.name,a.data.url),r.success("图片上传成功")):r.error("图片上传失败")}catch(a){console.error("图片上传失败:",a),r.error("图片上传失败: "+(a.message||"未知错误"))}},g={placeholder:l.placeholder,MENU_CONF:{uploadImage:{customUpload:h}}},v=e=>{s.value=e},_=e=>{const o=e.getHtml();t.value=o,n("update:modelValue",o),n("change",o)};return y(()=>{const e=s.value;e!=null&&e.destroy()}),(e,o)=>(x(),b("div",N,[u(i(R),{editor:s.value,defaultConfig:f,mode:m,class:"editor-toolbar"},null,8,["editor"]),u(i(U),{defaultConfig:g,mode:m,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),onOnCreated:v,onOnChange:_,class:"editor-content"},null,8,["modelValue"])]))}},O=C(k,[["__scopeId","data-v-6ead3c8b"]]);export{O as R};
